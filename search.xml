<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>stm32定时器中断</title>
      <link href="/archives/b21e5085.html"/>
      <url>/archives/b21e5085.html</url>
      
        <content type="html"><![CDATA[<h2 id="定时器基本介绍"><a href="#定时器基本介绍" class="headerlink" title="定时器基本介绍"></a>定时器基本介绍</h2><p>定时器分为基本定时器，通用定时器和高级定时器。STM32总共有8个定时器，分别是2个高级定时器（TIM1、TIM8），4个通用定时器（TIM2、TIM3、TIM4、TIM5）和2个基本定时器（TIM5、TIM6），高级定时器有通用定时器的所有功能，通用定时器有基本定时器的所有功能。</p><p><img src="https://s2.loli.net/2024/07/26/l7fHQuIYmxcaGCo.png"></p><p><img src="https://s2.loli.net/2024/07/26/PRbIQTNcdp2LsYw.png"></p><p>由上图可知，要定时器产生1s中断需要开启时钟-&gt;预分频-&gt;计数-&gt;中断</p><h2 id="时钟源"><a href="#时钟源" class="headerlink" title="时钟源"></a>时钟源</h2><p><img src="https://s2.loli.net/2024/07/26/FgGeKim7QvUXw2q.png"></p><p>时钟来源：</p><ul><li>内部时钟(CK_INT)</li><li>外部时钟模式1：外部输入脚(TIx)计数器可以在选定输入端的每个上升沿 或下降沿计数。</li><li>内部触发输入(ITRx)：使用一个定时器作为另一个定时器的预分频器，如可以配置一个定时器Timer1而作为另一个定时器Timer2的预分频器。</li><li>外部时钟模式2：外部触发输入(ETR)计数器能够在外部触发ETR的每一个上升沿或下降沿计数。</li></ul><p>外部晶振8Mhz倍频9倍&#x3D;72Mhz系统时钟，假如外部晶振损坏则以内部时钟（RC震荡器）8Mhz运行。</p><p>默认SystemInit函数下除非APB1的分频系数是1，否则通用定时器的时钟等于APB1时钟的2倍。APB1时钟&#x3D;36M，所以APB1的分频系数&#x3D;AHB&#x2F;APB1时钟&#x3D;2，所以，通用定时器时钟CK_INT&#x3D;2*36M&#x3D;72M</p><h2 id="时基单元"><a href="#时基单元" class="headerlink" title="时基单元"></a>时基单元</h2><p><img src="https://s2.loli.net/2024/07/26/jcEMFo4V3sRg5Jn.png"></p><p>可编程通用定时器的主要部分是一个16位计数器和与其相关的自动装载寄存器。这个计数器可 以向上计数、向下计数或者向上向下双向计数。此计数器时钟由预分频器分频得到。</p><p><strong>PSC预分频器CK_PSC</strong></p><p>预分频器可以将计数器的时钟频率按1到65536之间的任意值分频。这个控制寄存器带有缓冲器，它能够在工作时被改 变。新的预分频器参数在下一次更新事件到来时被采用。也就是说可以控制立刻更新预分频器值还是下个更新事件再更新预分频器值。</p><p><strong>自动重装载寄存器</strong></p><p>自动装载寄存器 (TIMx_ARR)，自动重装载寄存器 ARR 是一个 16位的寄存器，这里面装着计数器能计数的最大数值。当计数到这个值的时候，如果使能了中断的话，定时器就产生溢出中断。</p><p><strong>CNT计数器CK_CNT</strong></p><p>这个计数器可 以向上计数、向下计数或者向上向下双向计数。</p><p>向上计数：计数器从0计数到自动加载值(TIMx_ARR计数器的内容)，然后重新从0开始 计数并且产生一个计数器溢出事件。</p><p>向下计数：计 数器从自动装入的值(TIMx_ARR计数器的值)开始向下计数到0，然后从自动 装入的值重新开始并且产生一个计数器向下溢出事件。</p><p>向上向下双向计数（中央对齐模式）：计数器从0开始计数到自动加载的值(TIMx_ARR寄存器)−1，产生一个计数器 溢出事件，然后向下计数到1并且产生一个计数器下溢事件；然后再从0开始重新计数。</p><p><strong>定时时间</strong></p><p>定时时间是由时钟、PSC预分频器和自动重装载寄存器 ARR决定的。</p><p>计数器溢出频率：CK_CNT_OV &#x3D; CK_PSC &#x2F; (PSC + 1) &#x2F; (ARR + 1)</p><p>如果要定时1s则应设置1&#x3D;72M&#x2F;7200&#x2F;10000</p><p>PSC&#x3D;7200-1</p><p>ARR&#x3D;10000-1</p><p>可以理解为，72Mhz时钟经7200分频变为10000hz时钟，再计数10000次刚好就是1s。</p><h2 id="定时器定时中断"><a href="#定时器定时中断" class="headerlink" title="定时器定时中断"></a>定时器定时中断</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x.h&quot;</span>                  <span class="comment">// Device header</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Timer_Init</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//开启时钟，TM2</span></span><br><span class="line"><span class="built_in">RCC_APB1PeriphClockCmd</span>(RCC_APB1Periph_TIM2,ENABLE);</span><br><span class="line"><span class="comment">//选择时基单元的时钟源(默认内部时钟)</span></span><br><span class="line"><span class="built_in">TIM_InternalClockConfig</span>(TIM2);</span><br><span class="line"><span class="comment">//配置时基单元</span></span><br><span class="line">TIM_TimeBaseInitTypeDef TIM_TimeBaseInitStructure;</span><br><span class="line">TIM_TimeBaseInitStructure.TIM_ClockDivision = TIM_CKD_DIV1;<span class="comment">//滤波分频，不分频</span></span><br><span class="line">TIM_TimeBaseInitStructure.TIM_CounterMode = TIM_CounterMode_Up;<span class="comment">//计数器模式，向上计数</span></span><br><span class="line"><span class="comment">//定时频率=72M/(PSC+1)/(ARR+1)</span></span><br><span class="line">TIM_TimeBaseInitStructure.TIM_Period = <span class="number">10000</span><span class="number">-1</span>;<span class="comment">//自动重装值ARR</span></span><br><span class="line">TIM_TimeBaseInitStructure.TIM_Prescaler = <span class="number">7200</span><span class="number">-1</span>;<span class="comment">//预分频PSC</span></span><br><span class="line">TIM_TimeBaseInitStructure.TIM_RepetitionCounter = <span class="number">0</span>;<span class="comment">//重复计数器，这里用不上</span></span><br><span class="line"><span class="built_in">TIM_TimeBaseInit</span>(TIM2,&amp;TIM_TimeBaseInitStructure);<span class="comment">//配置时基单元</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//由于复位后自动更新中断，这里清除一下更新中断标志位</span></span><br><span class="line"><span class="built_in">TIM_ClearFlag</span>(TIM2,TIM_IT_Update);</span><br><span class="line"></span><br><span class="line"><span class="comment">//开启TIM2更新中断</span></span><br><span class="line"><span class="built_in">TIM_ITConfig</span>(TIM2,TIM_IT_Update,ENABLE);</span><br><span class="line"><span class="comment">//NVIC中断分组</span></span><br><span class="line"><span class="built_in">NVIC_PriorityGroupConfig</span>(NVIC_PriorityGroup_2);</span><br><span class="line"><span class="comment">//NVIC配置</span></span><br><span class="line">NVIC_InitTypeDef NVIC_InitStructure;</span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannel = TIM2_IRQn;<span class="comment">//选择配置NVIC的TIM2线</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;<span class="comment">//NVIC线路使能</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class="number">2</span>;<span class="comment">//抢占优先级为2</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class="number">1</span>;<span class="comment">//响应优先级为1</span></span><br><span class="line"><span class="built_in">NVIC_Init</span>(&amp;NVIC_InitStructure);<span class="comment">//配置NVIC</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//启动定时器</span></span><br><span class="line"><span class="built_in">TIM_Cmd</span>(TIM2,ENABLE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">TIM2_IRQHandler</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">TIM_GetITStatus</span>(TIM2,TIM_IT_Update)==SET)<span class="comment">//判断是否是TIM2的更新事件触发的中断</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">TIM_ClearFlag</span>(TIM2,TIM_IT_Update);<span class="comment">//清除更新中断标志位</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="定时器外部时钟"><a href="#定时器外部时钟" class="headerlink" title="定时器外部时钟"></a>定时器外部时钟</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x.h&quot;</span>                  <span class="comment">// Device header</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Timer_Init</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//开启时钟,TM2和GPIOA</span></span><br><span class="line"><span class="built_in">RCC_APB1PeriphClockCmd</span>(RCC_APB1Periph_TIM2,ENABLE);</span><br><span class="line"><span class="built_in">RCC_APB2PeriphClockCmd</span>(RCC_APB2Periph_GPIOA,ENABLE);</span><br><span class="line"><span class="comment">//GPIO初始化</span></span><br><span class="line">GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;<span class="comment">//上拉</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;</span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line"><span class="built_in">GPIO_Init</span>(GPIOA,&amp;GPIO_InitStructure);</span><br><span class="line"><span class="comment">//外部时钟配置，TIM2,不分频，不反向（高低电平有效不反向），不滤波</span></span><br><span class="line"><span class="built_in">TIM_ETRClockMode2Config</span>(TIM2,TIM_ExtTRGPSC_OFF,TIM_ExtTRGPolarity_NonInverted,<span class="number">0x00</span>);</span><br><span class="line"><span class="comment">//配置时基单元</span></span><br><span class="line">TIM_TimeBaseInitTypeDef TIM_TimeBaseInitStructure;</span><br><span class="line"><span class="comment">//滤波分频，不分频</span></span><br><span class="line">TIM_TimeBaseInitStructure.TIM_ClockDivision = TIM_CKD_DIV1;</span><br><span class="line"><span class="comment">//计数器模式，向上计数</span></span><br><span class="line">TIM_TimeBaseInitStructure.TIM_CounterMode = TIM_CounterMode_Up;</span><br><span class="line"><span class="comment">//定时频率=72M/(PSC+1)/(ARR+1)</span></span><br><span class="line"><span class="comment">//自动重装值ARR</span></span><br><span class="line">TIM_TimeBaseInitStructure.TIM_Period = <span class="number">10</span><span class="number">-1</span>;</span><br><span class="line"><span class="comment">//预分频PSC</span></span><br><span class="line">TIM_TimeBaseInitStructure.TIM_Prescaler = <span class="number">1</span><span class="number">-1</span>;</span><br><span class="line">TIM_TimeBaseInitStructure.TIM_RepetitionCounter = <span class="number">0</span>;<span class="comment">//重复计数器</span></span><br><span class="line"><span class="built_in">TIM_TimeBaseInit</span>(TIM2,&amp;TIM_TimeBaseInitStructure);</span><br><span class="line"></span><br><span class="line"><span class="comment">//由于复位后自动更新中断，这里清除一下更新中断标志位</span></span><br><span class="line"><span class="built_in">TIM_ClearFlag</span>(TIM2,TIM_IT_Update);</span><br><span class="line"></span><br><span class="line"><span class="comment">//使能更新中断</span></span><br><span class="line"><span class="built_in">TIM_ITConfig</span>(TIM2,TIM_IT_Update,ENABLE);</span><br><span class="line"><span class="comment">//NVIC中断分组</span></span><br><span class="line"><span class="built_in">NVIC_PriorityGroupConfig</span>(NVIC_PriorityGroup_2);</span><br><span class="line"><span class="comment">//NVIC配置</span></span><br><span class="line">NVIC_InitTypeDef NVIC_InitStructure;</span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannel = TIM2_IRQn;<span class="comment">//选择配置NVIC的TIM2线</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;<span class="comment">//指定NVIC线路使能</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class="number">2</span>;<span class="comment">//抢占优先级为2</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class="number">1</span>;<span class="comment">//响应优先级为1</span></span><br><span class="line"><span class="built_in">NVIC_Init</span>(&amp;NVIC_InitStructure);</span><br><span class="line"></span><br><span class="line"><span class="comment">//启动定时器</span></span><br><span class="line"><span class="built_in">TIM_Cmd</span>(TIM2,ENABLE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">uint16_t</span> <span class="title">Timer_GetCounter</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">TIM_GetCounter</span>(TIM2);<span class="comment">//返回定时器TIM2的CNT(计数值)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​</p>]]></content>
      
      
      <categories>
          
          <category> stm32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>stm32外部中断</title>
      <link href="/archives/a9067d6e.html"/>
      <url>/archives/a9067d6e.html</url>
      
        <content type="html"><![CDATA[<p>​ 开启外部中断需要</p><ul><li>设置AFIO</li><li>设置EXTI</li><li>设置NVIC</li></ul><h2 id="AFIO"><a href="#AFIO" class="headerlink" title="AFIO"></a>AFIO</h2><p>AFIO主要功能：引脚重映射、选择中断引脚</p><p>在这里选择中断引脚，所有GPIO口都可以作为中断引脚，但中断引脚不能选相同pin的脚，也就是PA1和PB1、PB1和PC1、PA1和PC1这类pin相同的不能同时选。</p><p><img src="https://s2.loli.net/2024/07/26/FRA4qfhLNgTmy6H.png"></p><h2 id="EXTI"><a href="#EXTI" class="headerlink" title="EXTI"></a>EXTI</h2><p>EXTI主要设置</p><p>中断线路（EXTI_Line0~EXTI_Line19，这里注意EXTI9-5、EXTI15-10分别共有一个中断）</p><p>使能</p><p>中断模式（EXTI_Mode_Interrupt中断触发模式和EXTI_Mode_Event事件触发模式）</p><p>外部中断触发方式（EXTI_Trigger_Rising上升沿触发、EXTI_Trigger_Falling下降沿触发、EXTI_Trigger_Rising_Falling上升沿下降沿都触发）</p><p><img src="https://s2.loli.net/2024/07/26/JlcEnzhVXS4KtYU.png"></p><p><img src="https://s2.loli.net/2024/07/26/LqA1uaFbzElitSM.png"></p><p><img src="https://s2.loli.net/2024/07/26/IuEgvVcx451LKlj.png"></p><h2 id="NVIC"><a href="#NVIC" class="headerlink" title="NVIC"></a>NVIC</h2><p>设置响应优先级和抢占优先级</p><p>响应优先级：优先响应等级较高的中断，0为最高优先级</p><p>抢占优先级：当有中断在执行，抢占优先级较高的可以打断正在执行的中断，也就是中断嵌套。</p><p>分组                                抢占优先级                        响应优先级</p><p><img src="https://s2.loli.net/2024/07/26/y7QWCimIJUAfKTM.png"></p><p>外部中断&#x2F;事件控制器框图</p><p><img src="https://s2.loli.net/2024/07/26/5RpebwOJioI1tBu.png"></p><h2 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">CountSensor_Init</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//开启GPIOB和AFIO的时钟</span></span><br><span class="line"><span class="built_in">RCC_APB2PeriphClockCmd</span>(RCC_APB2Periph_GPIOB,ENABLE);</span><br><span class="line"><span class="built_in">RCC_APB2PeriphClockCmd</span>(RCC_APB2Periph_AFIO,ENABLE);</span><br><span class="line"><span class="comment">//初始化GOPIO</span></span><br><span class="line">GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;</span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_14;</span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line"><span class="built_in">GPIO_Init</span>(GPIOB,&amp;GPIO_InitStructure);</span><br><span class="line"><span class="comment">//AFIO选择中断引脚,将外部中断的14号线映射到GPIOB，即选择PB14为外部中断引脚</span></span><br><span class="line"><span class="built_in">GPIO_EXTILineConfig</span>(GPIO_PortSourceGPIOB,GPIO_PinSource14);</span><br><span class="line"><span class="comment">//EXTI初始化</span></span><br><span class="line">EXTI_InitTypeDef EXTI_InitStructure;</span><br><span class="line">EXTI_InitStructure.EXTI_Line = EXTI_Line14;<span class="comment">//选择配置外部中断的14号线</span></span><br><span class="line">EXTI_InitStructure.EXTI_LineCmd = ENABLE;<span class="comment">//使能</span></span><br><span class="line">EXTI_InitStructure.EXTI_Mode = EXTI_Mode_Interrupt;<span class="comment">//指定外部中断线为中断模式</span></span><br><span class="line">EXTI_InitStructure.EXTI_Trigger = EXTI_Trigger_Falling;<span class="comment">//指定该外部中断为下降沿触发</span></span><br><span class="line"><span class="built_in">EXTI_Init</span>(&amp;EXTI_InitStructure);</span><br><span class="line"></span><br><span class="line"><span class="comment">//NVIC中断分组</span></span><br><span class="line"><span class="built_in">NVIC_PriorityGroupConfig</span>(NVIC_PriorityGroup_2);</span><br><span class="line"><span class="comment">//NVIC配置</span></span><br><span class="line">NVIC_InitTypeDef NVIC_InitStructure;</span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannel = EXTI15_10_IRQn;<span class="comment">//选择配置NVIC的EXTI15_10线</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;<span class="comment">//使能</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class="number">1</span>;<span class="comment">//指定NVIC线路的抢占优先级为1</span></span><br><span class="line">NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class="number">1</span>;<span class="comment">//指定NVIC线路的响应优先级为1</span></span><br><span class="line"><span class="built_in">NVIC_Init</span>(&amp;NVIC_InitStructure);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">EXTI15_10_IRQHandler</span><span class="params">(<span class="type">void</span>)</span><span class="comment">//函数名字代表要进入那个中断</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">EXTI_GetITStatus</span>(EXTI_Line14)==SET)<span class="comment">//判断是否是外部中断14号线触发的中断</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">EXTI_ClearITPendingBit</span>(EXTI_Line14);<span class="comment">//清除外部中断14号线的中断标志位</span></span><br><span class="line"><span class="comment">//这里写中断代码</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>stm32按键检测+光敏+蜂鸣器</title>
      <link href="/archives/36d32bbc.html"/>
      <url>/archives/36d32bbc.html</url>
      
        <content type="html"><![CDATA[<p>​###  按键检测</p><p>按键注意消抖，机械按下和松开时均伴随有一连串的抖动，一般为5ms～10ms。可通过软件或硬件消抖。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">Key_Init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//开启时钟,GPIOB</span></span><br><span class="line"><span class="built_in">RCC_APB2PeriphClockCmd</span>(RCC_APB2Periph_GPIOB,ENABLE);</span><br><span class="line"><span class="comment">//定义结构体变量</span></span><br><span class="line">GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line"><span class="comment">//设置GPIO模式，上拉输入</span></span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;</span><br><span class="line"><span class="comment">//设置GPIO引脚pin1和pin11</span></span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_1 | GPIO_Pin_11;</span><br><span class="line"><span class="comment">//设置GPIO速度</span></span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line"><span class="comment">//传入结构体，初始化GPIO</span></span><br><span class="line"><span class="built_in">GPIO_Init</span>(GPIOB,&amp;GPIO_InitStructure);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">uint8_t</span> <span class="title">key_GetNum</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">uint8_t</span> KeyNum = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//读取PB1的值等于0时代表按下按钮</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">GPIO_ReadInputDataBit</span>(GPIOB,GPIO_Pin_1)==<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Delay_ms</span>(<span class="number">20</span>);<span class="comment">//消抖</span></span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">GPIO_ReadInputDataBit</span>(GPIOB,GPIO_Pin_1)==<span class="number">0</span>);<span class="comment">//松手检测</span></span><br><span class="line"><span class="built_in">Delay_ms</span>(<span class="number">20</span>);<span class="comment">//消抖</span></span><br><span class="line">KeyNum=<span class="number">1</span>;<span class="comment">//赋键值</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//读取PB11的值等于0时代表按下按钮</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">GPIO_ReadInputDataBit</span>(GPIOB,GPIO_Pin_11)==<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Delay_ms</span>(<span class="number">20</span>);<span class="comment">//消抖</span></span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">GPIO_ReadInputDataBit</span>(GPIOB,GPIO_Pin_11)==<span class="number">0</span>);<span class="comment">//松手检测</span></span><br><span class="line"><span class="built_in">Delay_ms</span>(<span class="number">20</span>);<span class="comment">//消抖</span></span><br><span class="line">KeyNum=<span class="number">2</span>;<span class="comment">//赋键值</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> KeyNum;<span class="comment">//返回键值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="蜂鸣器"><a href="#蜂鸣器" class="headerlink" title="蜂鸣器"></a>蜂鸣器</h3><p>注意是有源蜂鸣器还是无源蜂鸣器，无源蜂鸣器是没有正负之分的，类似于喇叭，只要在两个腿上加载不同的频率的电信号就可以实现发声，根据不同的频率所发出的声音也是不一样的。有源蜂鸣器是有正负之分的，只需要加上电压就会发声，发出的声音音调单一</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x.h&quot;</span>                  <span class="comment">// Device header</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//初始化蜂鸣器</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Buzzer_Init</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">RCC_APB2PeriphClockCmd</span>(RCC_APB2Periph_GPIOB,ENABLE);</span><br><span class="line">GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;</span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_12;</span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line"><span class="built_in">GPIO_Init</span>(GPIOB,&amp;GPIO_InitStructure);</span><br><span class="line"></span><br><span class="line"><span class="built_in">GPIO_SetBits</span>(GPIOB,GPIO_Pin_12);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//打开蜂鸣器</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Buzzer_ON</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">GPIO_ResetBits</span>(GPIOB,GPIO_Pin_12);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//关闭蜂鸣器</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Buzzer_OFF</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">GPIO_SetBits</span>(GPIOB,GPIO_Pin_12);;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//蜂鸣器取反</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Buzzer_Turn</span><span class="params">(<span class="type">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//读取当前端口的值，如果为0这置1，如果为1则置0</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">GPIO_ReadOutputDataBit</span>(GPIOB,GPIO_Pin_12)==<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">GPIO_SetBits</span>(GPIOB,GPIO_Pin_12);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">GPIO_ResetBits</span>(GPIOB,GPIO_Pin_12);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="光敏传感器"><a href="#光敏传感器" class="headerlink" title="光敏传感器"></a>光敏传感器</h3><p>当模块检测到前方障碍物信号时，电路板上绿色指示灯点亮，同时OUT端口持续输出<strong>低电平</strong>信号</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x.h&quot;</span>                  <span class="comment">// Device header</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Delay.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//初始端口</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">LightSensor_Init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">RCC_APB2PeriphClockCmd</span>(RCC_APB2Periph_GPIOB,ENABLE);</span><br><span class="line">GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class="line">GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IPU;</span><br><span class="line">GPIO_InitStructure.GPIO_Pin = GPIO_Pin_13;</span><br><span class="line">GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line"><span class="built_in">GPIO_Init</span>(GPIOB,&amp;GPIO_InitStructure);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取端口电平</span></span><br><span class="line"><span class="function"><span class="type">uint8_t</span> <span class="title">LightSensor_Get</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">GPIO_ReadInputDataBit</span>(GPIOB,GPIO_Pin_13);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​</p>]]></content>
      
      
      <categories>
          
          <category> stm32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STM32点灯闪烁</title>
      <link href="/archives/d2c1832.html"/>
      <url>/archives/d2c1832.html</url>
      
        <content type="html"><![CDATA[<p>​ stm32c8t6引脚图</p><p><img src="https://s2.loli.net/2024/07/26/YueJTB653vr4NgX.png"></p><p>开发板引脚图</p><p><img src="https://s2.loli.net/2024/07/26/P3H7oU2V1xW8QXE.png"></p><p>GPIO端口的每个位可以由软件分别配置成 多种模式。</p><p>─ 输入浮空</p><p>─ 输入上拉</p><p>─ 输入下拉</p><p>─ 模拟输入</p><p>─ 开漏输出</p><p>─ 推挽式输出</p><p>─ 推挽式复用功能</p><p>─ 开漏复用功能</p><p>配置GPIO端口步骤：开启时钟-&gt;使用结构体设置输出模式、引脚、速度-&gt;初始化GPIO。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//开启时钟GPIOC</span></span><br><span class="line"><span class="built_in">RCC_APB2PeriphClockCmd</span>(RCC_APB2Periph_GPIOC,ENABLE);</span><br><span class="line"><span class="comment">//定义结构体变量</span></span><br><span class="line">GPIO_InitTypeDef GPIO_InitStructuer;</span><br><span class="line"><span class="comment">//设置GPIO模式，推挽输出模式</span></span><br><span class="line">GPIO_InitStructuer.GPIO_Mode = GPIO_Mode_Out_PP;</span><br><span class="line"><span class="comment">//设置GPIO引脚</span></span><br><span class="line">GPIO_InitStructuer.GPIO_Pin = GPIO_Pin_13;</span><br><span class="line"><span class="comment">//设置GPIO速度</span></span><br><span class="line">GPIO_InitStructuer.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line"><span class="comment">//传入结构体，初始化GPIO</span></span><br><span class="line"><span class="built_in">GPIO_Init</span>(GPIOC,&amp;GPIO_InitStructuer);</span><br></pre></td></tr></table></figure><p>在stm32f10x_gpio.h文件中可以看到，读、写、初始GPIO函数有</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">GPIO_DeInit</span><span class="params">(GPIO_TypeDef* GPIOx)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">GPIO_AFIODeInit</span><span class="params">(<span class="type">void</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">GPIO_Init</span><span class="params">(GPIO_TypeDef* GPIOx, GPIO_InitTypeDef* GPIO_InitStruct)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">GPIO_StructInit</span><span class="params">(GPIO_InitTypeDef* GPIO_InitStruct)</span></span>;</span><br><span class="line"><span class="function"><span class="type">uint8_t</span> <span class="title">GPIO_ReadInputDataBit</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin)</span></span>;</span><br><span class="line"><span class="function"><span class="type">uint16_t</span> <span class="title">GPIO_ReadInputData</span><span class="params">(GPIO_TypeDef* GPIOx)</span></span>;</span><br><span class="line"><span class="function"><span class="type">uint8_t</span> <span class="title">GPIO_ReadOutputDataBit</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin)</span></span>;</span><br><span class="line"><span class="function"><span class="type">uint16_t</span> <span class="title">GPIO_ReadOutputData</span><span class="params">(GPIO_TypeDef* GPIOx)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">GPIO_SetBits</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">GPIO_ResetBits</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">GPIO_WriteBit</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> GPIO_Pin, BitAction BitVal)</span></span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">GPIO_Write</span><span class="params">(GPIO_TypeDef* GPIOx, <span class="type">uint16_t</span> PortVal)</span></span>;</span><br></pre></td></tr></table></figure><p>这样就可以实现点灯闪烁操作了</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x.h&quot;</span>                  <span class="comment">// Device header</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;Delay.h&quot;</span> </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//开启时钟GPIOC</span></span><br><span class="line"><span class="built_in">RCC_APB2PeriphClockCmd</span>(RCC_APB2Periph_GPIOC,ENABLE);</span><br><span class="line"><span class="comment">//定义结构体变量</span></span><br><span class="line">GPIO_InitTypeDef GPIO_InitStructuer;</span><br><span class="line"><span class="comment">//设置GPIO模式，推挽输出模式</span></span><br><span class="line">GPIO_InitStructuer.GPIO_Mode = GPIO_Mode_Out_PP;</span><br><span class="line"><span class="comment">//设置GPIO引脚</span></span><br><span class="line">GPIO_InitStructuer.GPIO_Pin = GPIO_Pin_13;</span><br><span class="line"><span class="comment">//设置GPIO速度</span></span><br><span class="line">GPIO_InitStructuer.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line"><span class="comment">//传入结构体，初始化GPIO</span></span><br><span class="line"><span class="built_in">GPIO_Init</span>(GPIOC,&amp;GPIO_InitStructuer);</span><br><span class="line"><span class="comment">//设置PC13为低电平</span></span><br><span class="line"><span class="comment">//GPIO_ResetBits(GPIOC,GPIO_Pin_13);</span></span><br><span class="line"><span class="comment">//设置PC13为高电平</span></span><br><span class="line"><span class="comment">//GPIO_SetBits(GPIOC,GPIO_Pin_13);</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//设置PC13为低电平</span></span><br><span class="line"><span class="built_in">GPIO_WriteBit</span>(GPIOC,GPIO_Pin_13,Bit_SET);</span><br><span class="line"><span class="built_in">Delay_ms</span>(<span class="number">500</span>);</span><br><span class="line"><span class="comment">//设置PC13为高电平</span></span><br><span class="line"><span class="built_in">GPIO_WriteBit</span>(GPIOC,GPIO_Pin_13,Bit_RESET);</span><br><span class="line"><span class="built_in">Delay_ms</span>(<span class="number">500</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​</p>]]></content>
      
      
      <categories>
          
          <category> stm32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>51循迹小车（蓝牙+循迹+超声波+舵机+避障L298N）</title>
      <link href="/archives/41fab5a2.html"/>
      <url>/archives/41fab5a2.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://s2.loli.net/2024/07/26/AhgvfyWd6sTD1MF.png"></p><h2 id="基本驱动"><a href="#基本驱动" class="headerlink" title="基本驱动"></a>基本驱动</h2><p><strong>L298N电机驱动模块负责供电和控制电机驱动</strong></p><p>将电池12V供电接到12V供电上，作为输入。单片机及其他器件供电可以使用5V供电，这里的GND都接到一起。</p><p>输出A和输出B接到电机上，负责给电机供电和控制电机。</p><p>通道A使能和通道B使能以及逻辑输入部分都接到单片机上，在这里通道A使能和通道B使能接高电平使能，接PWM信号可以控制输出A和输出B的转速。</p><p>IN1 和 IN2 控制输出A</p><p>IN1&#x3D;1，IN2&#x3D;0，对应电机A正转</p><p>IN1&#x3D;0，IN2&#x3D;1，对应电机A反转</p><p>IN1、IN2同时输入高电平HIGH或低电平LOW，对应电机A停止转动</p><p>IN3 和 IN4 控制输出B</p><p>IN3&#x3D;1，IN4&#x3D;0，对应电机B正转</p><p>IN3&#x3D;0，IN4&#x3D;1，对应电机B反转</p><p>IN3、IN4同时输入高电平HIGH或低电平LOW，对应电机B停止转动</p><p>这里还要注意，如果电机堵转可能会烧毁其他器件，要注意不要让电机堵转。</p><p><img src="https://s2.loli.net/2024/07/26/QJMntwcFEAdlNT8.png"></p><p>代码参考</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义电机控制引脚  </span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;REG52.H&gt;</span></span></span><br><span class="line"></span><br><span class="line">sbit IN1=P1^<span class="number">1</span>;    <span class="comment">//左后轮</span></span><br><span class="line">sbit IN2=P1^<span class="number">2</span>; <span class="comment">//左前轮</span></span><br><span class="line">sbit IN3=P1^<span class="number">3</span>;   <span class="comment">//右后轮</span></span><br><span class="line">sbit IN4=P1^<span class="number">4</span>;<span class="comment">//右前轮</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">L_motor_go</span><span class="params">()</span><span class="comment">//左轮前进   </span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">IN2=<span class="number">1</span>; </span><br><span class="line">IN1=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">L_motor_back</span><span class="params">()</span><span class="comment">//左轮后退        </span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> IN2=<span class="number">0</span>; </span><br><span class="line"> IN1=<span class="number">1</span>;  </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">R_motor_go</span><span class="params">()</span> <span class="comment">//右轮前进        </span></span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line"> IN4=<span class="number">1</span>; </span><br><span class="line"> IN3=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">R_motor_back</span><span class="params">()</span> <span class="comment">//右轮后退      </span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> IN4=<span class="number">0</span>; </span><br><span class="line"> IN3=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">L_motor_stop</span><span class="params">()</span> <span class="comment">//左轮停止    </span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">IN2=<span class="number">0</span>; </span><br><span class="line">IN1=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">R_motor_stop</span><span class="params">()</span> <span class="comment">//右轮停止 </span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">IN4=<span class="number">0</span>; </span><br><span class="line">IN3=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REGX52.H&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;motor.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CAR.H&quot;</span></span></span><br><span class="line"></span><br><span class="line">sbit ENA=P1^<span class="number">5</span>;      <span class="comment">//左使能端</span></span><br><span class="line">sbit ENB=P1^<span class="number">6</span>;     <span class="comment">//右使能端</span></span><br><span class="line"></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> speed=<span class="number">50</span>;<span class="comment">//小车速度</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">timer0_Init</span><span class="params">()</span> <span class="comment">//100微秒@11.0592MHz</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  TMOD &amp;= <span class="number">0xF0</span>;<span class="comment">//设置定时器模式</span></span><br><span class="line">TMOD |= <span class="number">0x01</span>;<span class="comment">//设置定时器模式 </span></span><br><span class="line">    TH0 = <span class="number">0xff</span>;  </span><br><span class="line">    TL0 = <span class="number">0xa4</span>; </span><br><span class="line">    TF0 = <span class="number">0</span>;  </span><br><span class="line">    TR0 = <span class="number">1</span>; <span class="comment">// 启动定时器0  </span></span><br><span class="line">    ET0 = <span class="number">1</span>; <span class="comment">// 允许定时器0中断  </span></span><br><span class="line">    EA = <span class="number">1</span>; <span class="comment">// 总中断允许   </span></span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">timer0</span><span class="params">()</span> interrupt 1  </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">static</span> <span class="type">unsigned</span> <span class="type">char</span> count=<span class="number">0</span>;</span><br><span class="line">  TH0 = <span class="number">0xff</span>;  </span><br><span class="line">    TL0 = <span class="number">0xa4</span>; </span><br><span class="line">  count++;</span><br><span class="line"> <span class="keyword">if</span>(count &gt;=<span class="number">100</span>)</span><br><span class="line"> &#123;</span><br><span class="line"> count = <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">if</span>(count &lt; speed)<span class="comment">//小车PWM</span></span><br><span class="line"> &#123;</span><br><span class="line"> ENA = <span class="number">1</span>;</span><br><span class="line"> ENB = <span class="number">1</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line"> &#123;</span><br><span class="line"> ENA = <span class="number">0</span>;</span><br><span class="line"> ENB = <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">car_go</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">R_motor_go</span>();</span><br><span class="line"><span class="built_in">L_motor_go</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">car_back</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">R_motor_back</span>();</span><br><span class="line"><span class="built_in">L_motor_back</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">car_left</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">R_motor_back</span>();</span><br><span class="line"><span class="built_in">L_motor_go</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">car_right</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">R_motor_go</span>();</span><br><span class="line"><span class="built_in">L_motor_back</span>();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">car_stop</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">R_motor_stop</span>();</span><br><span class="line"><span class="built_in">L_motor_stop</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="蓝牙模块"><a href="#蓝牙模块" class="headerlink" title="蓝牙模块"></a>蓝牙模块</h2><p><img src="https://s2.loli.net/2024/07/26/Kxevtg9bd4Ij8pG.png"></p><p>TXD：发送端，一般表示为自己的发送端，<strong>正常通信必须接另一个设备的RXD。</strong></p><p>RXD：接收端，一般表示为自己的接收端，<strong>正常通信必须接另一个设备的TXD。</strong></p><p>只当作串口来用接VCC、GND、TXD、RXD就够了，使用前先测试以下，使用手机蓝牙调试器连接蓝牙，电脑使用USB转TTL接到蓝牙模块上，然后用串口助手测试收发是否正常。正常波特率9600，如果不知道可以使用AT指令修改或查询。</p><p>先按住HC05蓝牙模块上面的按键，再给蓝牙模块通电。蓝牙模块上面的LED进入慢闪模式(约1秒钟闪烁一次)，即可进行AT命令测试</p><p>AT命令格式为：波特率38400,8个数据位，1个停止位，无校验。每条指令输入完成后，必须按一下回车键再发送！</p><p>例如：输入AT，按一下回车键发送，蓝牙模块会返回OK</p><p>HC06在未连接蓝牙时可直接发送AT指令。</p><p>参考代码，主要实现控制小车和调试功能</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REGX52.H&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CAR.H&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;BLE.H&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CHAOSHENGBO.H&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> U_data;     <span class="comment">//接受数据存放</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> str[]=<span class="string">&quot; Speed: &quot;</span>;<span class="comment">//发送数据存放</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> str1[]=<span class="string">&quot; Length: &quot;</span>;</span><br><span class="line"><span class="keyword">extern</span> <span class="type">unsigned</span> <span class="type">char</span> flag1;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UartInit</span><span class="params">(<span class="type">void</span>)</span>        <span class="comment">//9600bps@11.0592MHz</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    PCON &amp;= <span class="number">0x7F</span>;            <span class="comment">//波特率不倍速</span></span><br><span class="line">    SCON = <span class="number">0x50</span>;            <span class="comment">//8位数据,可变波特率</span></span><br><span class="line">    TMOD &amp;= <span class="number">0x0F</span>;             <span class="comment">//设置定时器模式</span></span><br><span class="line">    TMOD |= <span class="number">0x20</span>;             <span class="comment">//设置定时器模式</span></span><br><span class="line">    TL1 = <span class="number">0xFD</span>;                <span class="comment">//设置定时初始值</span></span><br><span class="line">    TH1 = <span class="number">0xFD</span>;                <span class="comment">//设置定时重载值</span></span><br><span class="line">    ET1 = <span class="number">0</span>;                     <span class="comment">//禁止定时器中断</span></span><br><span class="line">    TR1 = <span class="number">1</span>;                  <span class="comment">//定时器1开始计时</span></span><br><span class="line">    EA  = <span class="number">1</span>;</span><br><span class="line">    ES  = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">receive</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> m)</span><span class="comment">//接受数据</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span>(m)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">case</span>  <span class="string">&#x27;W&#x27;</span>:      <span class="comment">//前进</span></span><br><span class="line">            <span class="built_in">car_go</span>();</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span>  <span class="string">&#x27;A&#x27;</span>:</span><br><span class="line">            <span class="built_in">car_left</span>();    <span class="comment">// 左转</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span>  <span class="string">&#x27;D&#x27;</span>:</span><br><span class="line">            <span class="built_in">car_right</span>();     <span class="comment">// 右转</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;S&#x27;</span>:</span><br><span class="line">            <span class="built_in">car_back</span>();   <span class="comment">//  后退</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;I&#x27;</span>:      <span class="comment">// 停止</span></span><br><span class="line">            <span class="built_in">car_stop</span>();</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;Q&#x27;</span>:      <span class="comment">// 速度加</span></span><br><span class="line">            speed+=<span class="number">5</span>;</span><br><span class="line"><span class="built_in">uart_send_string</span>(str);</span><br><span class="line"><span class="built_in">uart_send_byte</span>(speed/<span class="number">10</span>+<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="built_in">uart_send_byte</span>(speed%<span class="number">10</span>+<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;E&#x27;</span>:      <span class="comment">// 速度减</span></span><br><span class="line">            speed-=<span class="number">5</span>;</span><br><span class="line"><span class="built_in">uart_send_string</span>(str);</span><br><span class="line"><span class="built_in">uart_send_byte</span>(speed/<span class="number">10</span>+<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="built_in">uart_send_byte</span>(speed%<span class="number">10</span>+<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;B&#x27;</span>:      <span class="comment">// 显示信息</span></span><br><span class="line"><span class="built_in">showInfo</span>();</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;N&#x27;</span>:      <span class="comment">// 舵机角度加</span></span><br><span class="line">angle++;</span><br><span class="line"><span class="keyword">if</span>(angle&gt;<span class="number">25</span>)angle=<span class="number">25</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;M&#x27;</span>:      <span class="comment">// 舵机角度减</span></span><br><span class="line">angle--;</span><br><span class="line"><span class="keyword">if</span>(angle&lt;<span class="number">5</span>)angle=<span class="number">5</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;P&#x27;</span>:      <span class="comment">//循迹模式切换</span></span><br><span class="line">flag1=!flag1;</span><br><span class="line"><span class="built_in">uart_send_byte</span>(flag1);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">break</span>;        </span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//发送一个字符</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">uart_send_byte</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> byte_data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> SBUF = byte_data;</span><br><span class="line"><span class="keyword">while</span>(!TI);</span><br><span class="line">TI=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//发送一串字符串</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">uart_send_string</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> *str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"> <span class="keyword">while</span>(*str)</span><br><span class="line">&#123;</span><br><span class="line"> <span class="built_in">uart_send_byte</span>(*str++);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//显示信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">showInfo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">uart_send_string</span>(str);</span><br><span class="line"><span class="built_in">uart_send_byte</span>(speed/<span class="number">10</span>+<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="built_in">uart_send_byte</span>(speed%<span class="number">10</span>+<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="built_in">uart_send_string</span>(str1);</span><br><span class="line"><span class="built_in">uart_send_byte</span>(Length/<span class="number">100</span>+<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="built_in">uart_send_byte</span>(Length/<span class="number">10</span>%<span class="number">10</span>+<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line"><span class="built_in">uart_send_byte</span>(Length%<span class="number">10</span>+<span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//***************************************************************************   </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UartInit_seve</span><span class="params">()</span> interrupt 4</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(RI==<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">RI = <span class="number">0</span>;                  <span class="comment">//清除接受中断标志位</span></span><br><span class="line">U_data = SBUF;                    <span class="comment">//接受数据</span></span><br><span class="line"><span class="built_in">receive</span>(U_data);</span><br><span class="line">&#125;</span><br><span class="line">       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="循迹模块"><a href="#循迹模块" class="headerlink" title="循迹模块"></a>循迹模块</h2><p><img src="https://s2.loli.net/2024/07/26/VmenRG5irhAkw7N.png"></p><p><img src="https://s2.loli.net/2024/07/26/e7YbvulWJQDmNZG.png"></p><p>调节可调电阻设置测量距离，做到测到地板上黑线灯灭，没测到黑线灯亮的状态，通过排列所有情况组合可以达到循迹的效果</p><p>参考代码</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REGX52.H&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CAR.H&quot;</span></span></span><br><span class="line">sbit left1=P2^<span class="number">0</span>;</span><br><span class="line">sbit left2=P2^<span class="number">1</span>;</span><br><span class="line">sbit right3=P2^<span class="number">2</span>;</span><br><span class="line">sbit right4=P2^<span class="number">3</span>;</span><br><span class="line"><span class="comment">/*循迹情况分析*/</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">xunji</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;  </span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> a;                                 </span><br><span class="line"><span class="keyword">if</span>(left1==<span class="number">0</span> &amp;&amp;left2==<span class="number">0</span> &amp;&amp;right3==<span class="number">0</span> &amp;&amp;right4==<span class="number">0</span>)       <span class="comment">//0000 </span></span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(left1==<span class="number">0</span> &amp;&amp;left2==<span class="number">0</span> &amp;&amp;right3==<span class="number">0</span> &amp;&amp;right4==<span class="number">1</span>)  <span class="comment">//0001 </span></span><br><span class="line">a = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(left1==<span class="number">0</span> &amp;&amp;left2==<span class="number">0</span> &amp;&amp;right3==<span class="number">1</span> &amp;&amp;right4==<span class="number">0</span>)  <span class="comment">//0010</span></span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (left1==<span class="number">0</span> &amp;&amp;left2==<span class="number">0</span> &amp;&amp;right3==<span class="number">1</span> &amp;&amp;right4==<span class="number">1</span>) <span class="comment">//0011 </span></span><br><span class="line">a = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(left1==<span class="number">0</span> &amp;&amp;left2==<span class="number">1</span> &amp;&amp;right3==<span class="number">0</span> &amp;&amp;right4==<span class="number">0</span>)  <span class="comment">//0100 </span></span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(left1==<span class="number">0</span> &amp;&amp;left2==<span class="number">1</span> &amp;&amp;right3==<span class="number">0</span> &amp;&amp;right4==<span class="number">1</span>)  <span class="comment">//0101 </span></span><br><span class="line">a = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(left1==<span class="number">0</span> &amp;&amp;left2==<span class="number">1</span> &amp;&amp;right3==<span class="number">1</span> &amp;&amp;right4==<span class="number">0</span>)  <span class="comment">//0110 </span></span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(left1==<span class="number">0</span> &amp;&amp;left2==<span class="number">0</span> &amp;&amp;right3==<span class="number">1</span> &amp;&amp;right4==<span class="number">1</span>)  <span class="comment">//0111 </span></span><br><span class="line">a = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(left1==<span class="number">1</span> &amp;&amp;left2==<span class="number">0</span> &amp;&amp;right3==<span class="number">0</span> &amp;&amp;right4==<span class="number">0</span>)  <span class="comment">//1000 </span></span><br><span class="line">a = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(left1==<span class="number">1</span> &amp;&amp;left2==<span class="number">0</span> &amp;&amp;right3==<span class="number">0</span> &amp;&amp;right4==<span class="number">1</span>)  <span class="comment">//1001 </span></span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(left1==<span class="number">1</span> &amp;&amp;left2==<span class="number">0</span> &amp;&amp;right3==<span class="number">1</span> &amp;&amp;right4==<span class="number">0</span>)  <span class="comment">//1010 </span></span><br><span class="line">a = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(left1==<span class="number">1</span> &amp;&amp;left2==<span class="number">0</span> &amp;&amp;right3==<span class="number">1</span> &amp;&amp;right4==<span class="number">1</span>)  <span class="comment">//1011 </span></span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(left1==<span class="number">1</span> &amp;&amp;left2==<span class="number">1</span> &amp;&amp;right3==<span class="number">0</span> &amp;&amp;right4==<span class="number">0</span>)  <span class="comment">//1100</span></span><br><span class="line">a = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(left1==<span class="number">1</span> &amp;&amp;left2==<span class="number">1</span> &amp;&amp;right3==<span class="number">0</span> &amp;&amp;right4==<span class="number">1</span>)  <span class="comment">//1101</span></span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(left1==<span class="number">1</span> &amp;&amp;left2==<span class="number">1</span> &amp;&amp;right3==<span class="number">1</span> &amp;&amp;right4==<span class="number">0</span>)  <span class="comment">//1110 </span></span><br><span class="line">a = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(left1==<span class="number">1</span> &amp;&amp;left2==<span class="number">1</span> &amp;&amp;right3==<span class="number">1</span> &amp;&amp;right4==<span class="number">1</span>)  <span class="comment">//1111 </span></span><br><span class="line">a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span> (a)</span><br><span class="line">  &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">1</span>:<span class="built_in">car_go</span>();<span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">2</span>:<span class="built_in">car_left</span>();<span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">3</span>:<span class="built_in">car_right</span>();<span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">4</span>:<span class="built_in">car_stop</span>();<span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">default</span>:<span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="超声波模块"><a href="#超声波模块" class="headerlink" title="超声波模块"></a>超声波模块</h2><p><img src="https://s2.loli.net/2024/07/26/uOIRtwzKDZbm7By.png"></p><p><img src="https://s2.loli.net/2024/07/26/NaZQfsPHVviMtx8.png"></p><p>给Trlg引脚至少10us高电平，之后Echo引脚就会返回高电平，通过计算高电平时间即可完成测距，如果需要测距更精确可加入温度补偿。</p><p>参考代码</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REGX52.H&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;intrins.h&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;car.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;BLE.H&quot;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sbit Trig = P2^<span class="number">7</span>;</span><br><span class="line">sbit Echo = P2^<span class="number">6</span>; </span><br><span class="line"></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> Length; <span class="comment">//测距结果</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> mindistance = <span class="number">10</span>; <span class="comment">//小车与障碍物的距离</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Delay1000ms</span><span class="params">()</span><span class="comment">//@11.0592MHz</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> i, j, k;</span><br><span class="line"></span><br><span class="line">_nop_();</span><br><span class="line">i = <span class="number">8</span>;</span><br><span class="line">j = <span class="number">1</span>;</span><br><span class="line">k = <span class="number">243</span>;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">while</span> (--k);</span><br><span class="line">&#125; <span class="keyword">while</span> (--j);</span><br><span class="line">&#125; <span class="keyword">while</span> (--i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Delay20us</span><span class="params">()</span><span class="comment">//@11.0592MHz</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> i;</span><br><span class="line"></span><br><span class="line">_nop_();</span><br><span class="line">i = <span class="number">6</span>;</span><br><span class="line"><span class="keyword">while</span> (--i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">chaoshengbo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">T2MOD = <span class="number">0</span>;<span class="comment">//初始化模式寄存器</span></span><br><span class="line">T2CON = <span class="number">0</span>;<span class="comment">//初始化控制寄存器</span></span><br><span class="line">TL2 = <span class="number">0</span>;<span class="comment">//设置定时初值</span></span><br><span class="line">TH2 = <span class="number">0</span>;<span class="comment">//设置定时初值</span></span><br><span class="line">RCAP2L = <span class="number">0</span>;<span class="comment">//设置定时重载值</span></span><br><span class="line">RCAP2H = <span class="number">0</span>;<span class="comment">//设置定时重载值</span></span><br><span class="line"></span><br><span class="line">Trig = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">Delay20us</span>();</span><br><span class="line">Trig = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(!Echo);</span><br><span class="line">TR2 = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(Echo);</span><br><span class="line">TR2 = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">Length = ((TH2*<span class="number">256</span>+TL2)*<span class="number">0.034</span>)/<span class="number">2</span><span class="number">+1</span>;</span><br><span class="line"><span class="keyword">if</span>(mindistance &gt; Length)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">car_stop</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="舵机驱动"><a href="#舵机驱动" class="headerlink" title="舵机驱动"></a>舵机驱动</h2><p><img src="https://s2.loli.net/2024/07/26/ji1CHkxL9gJbNdv.png"></p><p><strong>型号：SG90  重量13克 角度0度-180度</strong></p><p>信号线（黄线）红线（电源线）棕色(地线）</p><p>舵机的控制一般需要一个20ms左右的时基脉冲，该脉冲的高电平部分一般为0.5ms-2.5ms范围内的角度控制脉冲部分，总间隔为2ms。以180度角度伺服为例，那么对应的控制关系是这样的：</p><p>0.5ms————–0度；</p><p>1.0ms————45度；</p><p>1.5ms————90度；</p><p>2.0ms———–135度；</p><p>2.5ms———–180度；</p><p><img src="https://s2.loli.net/2024/07/26/BHSzEvI5qie1gXJ.gif"></p><p>参考代码</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REGX52.H&gt;</span></span></span><br><span class="line"></span><br><span class="line">sbit servo=P2^<span class="number">5</span> ;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> angle=<span class="number">13</span>;<span class="comment">//舵机角度，5-25对应0-180度</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">timer0_Init</span><span class="params">()</span> <span class="comment">//100微秒@11.0592MHz</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  TMOD &amp;= <span class="number">0xF0</span>;<span class="comment">//设置定时器模式</span></span><br><span class="line">TMOD |= <span class="number">0x01</span>;<span class="comment">//设置定时器模式 </span></span><br><span class="line">    TH0 = <span class="number">0xff</span>;  </span><br><span class="line">    TL0 = <span class="number">0xa4</span>; </span><br><span class="line">    TF0 = <span class="number">0</span>;  </span><br><span class="line">    TR0 = <span class="number">1</span>; <span class="comment">// 启动定时器0  </span></span><br><span class="line">    ET0 = <span class="number">1</span>; <span class="comment">// 允许定时器0中断  </span></span><br><span class="line">    EA = <span class="number">1</span>; <span class="comment">// 总中断允许   </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">timer0</span><span class="params">()</span> interrupt 1  </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">static</span> <span class="type">unsigned</span> <span class="type">char</span> count=<span class="number">0</span>;</span><br><span class="line">TH0 = <span class="number">0xff</span>;  </span><br><span class="line">    TL0 = <span class="number">0xa4</span>; </span><br><span class="line">count++;</span><br><span class="line"> <span class="keyword">if</span>(count &gt;=<span class="number">200</span>)</span><br><span class="line"> &#123;</span><br><span class="line"> count = <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">if</span>(count &lt; angle)<span class="comment">//舵机PWM</span></span><br><span class="line"> &#123;</span><br><span class="line"> servo = <span class="number">1</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">else</span></span><br><span class="line"> &#123;</span><br><span class="line"> servo = <span class="number">0</span>;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="避障模块"><a href="#避障模块" class="headerlink" title="避障模块"></a>避障模块</h2><p><img src="https://s2.loli.net/2024/07/26/bC2Us3o6F4pvquB.png"></p><p>该传感器模块对环境光线适应能力强，其具有一对红外线发射与接收管，发射管发射出一定频率的红外线，当检测方向遇到障碍物（反射面）时，红外线反射回来被接收管接收，经过比较器电路处理之后，绿色指示灯会亮起，同时信号输出接回输出数字信号（一个低电平信号），可通过电位器旋钮调节检测距离，有效距离范围2～30cm，工作电压为3.3v-5v。该传感器的探测距离可以通过电位器调节、具有干扰小、便于装配、使用方便等特点，可以广泛应用于机器人避障、避障小车、流水线计数及黑白线循迹等众多场合。</p><p>当模块检测到前方障碍物信号时，电路板上绿色指示灯点亮，同时OUT端口持续输出<strong>低电平</strong>信号</p><p>该模块测距离2~～30cm，检测角度35°，检测距离可以通过电位器进行调节，顺时针调电位器，检测距离增加;逆时针调电位器，检测距离减少。</p><p>传感器主动红外线反射探测,因此目标的反射率和形状是探测距离的关键。其中黑色探测距离小,白色大;小面积物体距离小,大面积距离大。</p><p>​</p>]]></content>
      
      
      <categories>
          
          <category> 51单片机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> 51单片机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>51串口通讯</title>
      <link href="/archives/f4c54de.html"/>
      <url>/archives/f4c54de.html</url>
      
        <content type="html"><![CDATA[<h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>串口是一种应用十分广泛的通讯接口，串口成本低、容易使用、通信线路简单，可实现两个设备的互相通信。单片机的串口可以使单片机与单片机、单片机与电脑、单片机与各式各样的模块互相通信，极大的扩展了单片机的应用范围，增强了单片机系统的硬件实力。51单片机内部自带<strong>UART</strong> <strong>（Universal Asynchronous Receiver Transmitter</strong>  <strong>，通用异步收发器）</strong> ，可实现单片机的串口通信。</p><p> STC89C52系列单片机串行口对应的硬件部分对应的管脚是P3.0(RxD)&#x2F;P3.1(TxD)。</p><p><strong>TXD与RXD要交叉连接</strong></p><p><img src="https://s2.loli.net/2024/07/26/EUYfNPVWCxeKHZB.png"></p><p><img src="https://s2.loli.net/2024/07/26/fMXp9uOYbQ8BmNd.png"></p><p><img src="https://s2.loli.net/2024/07/26/W3dTMH7mhzCJ5lP.png"></p><p><img src="https://s2.loli.net/2024/07/26/afoBnVtO79WREu1.png"></p><p><strong>SM0、SM1选择工作方式</strong></p><p><strong>REN允许串行接受位</strong></p><p><strong>TI、RI收发中断标志位，必须软件清0</strong></p><p><strong>收发数据都放在SBUF(串行口数据缓冲器寄存器)上，SBUF事实上是两个缓冲器，共用一个地址。将数据写到SBUF上就是发送，将数据从SBUF读出就是接收</strong></p><h3 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//串口初始化</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UART_Init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">SCON=<span class="number">0x50</span>;</span><br><span class="line">PCON |= <span class="number">0x80</span>;</span><br><span class="line">TMOD &amp;= <span class="number">0x0F</span>;<span class="comment">//设置定时器模式</span></span><br><span class="line">TMOD |= <span class="number">0x20</span>;<span class="comment">//设置定时器模式</span></span><br><span class="line">TL1 = <span class="number">0xF3</span>;<span class="comment">//设定定时初值</span></span><br><span class="line">TH1 = <span class="number">0xF3</span>;<span class="comment">//设定定时器重装值</span></span><br><span class="line">ET1 = <span class="number">0</span>;<span class="comment">//禁止定时器1中断</span></span><br><span class="line">TR1 = <span class="number">1</span>;<span class="comment">//启动定时器1</span></span><br><span class="line">EA=<span class="number">1</span>;</span><br><span class="line">ES=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//串口发送一个字节数据</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UART_SendByte</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> Byte)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">SBUF=Byte;</span><br><span class="line"><span class="keyword">while</span>(TI==<span class="number">0</span>);</span><br><span class="line">TI=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//串口中断函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">UART_Routine</span><span class="params">()</span> interrupt 4</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(RI==<span class="number">1</span>)<span class="comment">//如果接收标志位为1，接收到了数据</span></span><br><span class="line">&#123;</span><br><span class="line">P2=SBUF;<span class="comment">//将读到的数据输出到P2口</span></span><br><span class="line">RI=<span class="number">0</span>;<span class="comment">//接收标志位清0</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​</p>]]></content>
      
      
      <categories>
          
          <category> 51单片机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> 51单片机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>51交通灯</title>
      <link href="/archives/bc8f780f.html"/>
      <url>/archives/bc8f780f.html</url>
      
        <content type="html"><![CDATA[<h3 id="一、基本原理"><a href="#一、基本原理" class="headerlink" title="一、基本原理"></a>一、基本原理</h3><p>利用51单片机控制各个路口红绿灯及时间显示。</p><p>设计的重点：</p><p>1、各个路口红绿灯亮灭的规则，暂不考虑左转方向；</p><p>2、倒计时的实现，利用单片机的定时器进行计数得到秒信号；</p><p>3、时间显示：东西南北四个方向的时间一致，当东西方向为60秒绿灯通行时间，同时南北方向为60秒红灯禁止时间，因此硬件连接时可考虑东西南北方向可采用同一接法；最后相当于2个数码管动态显示。</p><p>4、按键设置（扩展要求）：设置键按一次，设置主干道通信时间（即次干道禁止时间），按第二次，设置主干道禁止时间（即次干道通信时间），按第三次，可作为紧急通信键。设置时间需要确定，可通过确定键实现，也可通过延时确定，如10秒。当然也可根据需要增加相应的按键。</p><h3 id="仿真图"><a href="#仿真图" class="headerlink" title="仿真图"></a>仿真图</h3><p><img src="https://s2.loli.net/2024/07/26/JngawWNr5zclKj2.png"></p><p><strong>注意修改每个灯的管脚，位选管脚等。</strong></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REGX52.H&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ON 0 </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> OFF 1 </span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> tab[]=&#123;<span class="number">0x3f</span>,<span class="number">0x06</span>,<span class="number">0x5b</span>,<span class="number">0x4f</span>,<span class="number">0x66</span>,<span class="number">0x6d</span>,<span class="number">0x7d</span>,<span class="number">0x07</span>,<span class="number">0x7f</span>,<span class="number">0x6f</span>,<span class="number">0x77</span>,<span class="number">0x7c</span>,<span class="number">0x39</span>,<span class="number">0x5e</span>,<span class="number">0x79</span>,<span class="number">0x71</span>&#125;;</span><br><span class="line"><span class="type">short</span> EW_Time=<span class="number">60</span>,NS_Time=<span class="number">60</span>,EW_SetTime=<span class="number">60</span>,NS_SetTime=<span class="number">60</span>;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> Time_Mode=<span class="number">0</span>,Flag_Blink=<span class="number">0</span>;</span><br><span class="line">sbit Switch_Time1=P3^<span class="number">3</span>;<span class="comment">//数码管位选</span></span><br><span class="line">sbit Switch_Time2=P3^<span class="number">2</span>;</span><br><span class="line">sbit EW_Red=P2^<span class="number">0</span>;   <span class="comment">//东西向红灯</span></span><br><span class="line">sbit EW_Green=P2^<span class="number">3</span>;   <span class="comment">//东西向绿灯</span></span><br><span class="line">sbit EW_Yellow=P2^<span class="number">2</span>;       <span class="comment">//东西向黄灯</span></span><br><span class="line">sbit NS_Red=P2^<span class="number">5</span>;   <span class="comment">//南北向红灯</span></span><br><span class="line">sbit NS_Green=P2^<span class="number">7</span>;   <span class="comment">//南北向绿灯</span></span><br><span class="line">sbit NS_Yellow=P2^<span class="number">6</span>;   <span class="comment">//南北向黄灯</span></span><br><span class="line">sbit Power=P2^<span class="number">4</span>;<span class="function"><span class="type">void</span> <span class="title">delay_ms</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> ms)</span><span class="comment">//ms延时函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=ms;i&gt;<span class="number">0</span>;i--)</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">110</span>;j&gt;<span class="number">0</span>;j--);</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Timer_Init</span><span class="params">()</span><span class="comment">//定时器初始化</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">TMOD=<span class="number">0x01</span>; <span class="comment">//设置为定时器0工作模式1</span></span><br><span class="line">TL0=(<span class="number">65536</span><span class="number">-50000</span>)%<span class="number">256</span>;<span class="comment">//低八位</span></span><br><span class="line">TH0=(<span class="number">65536</span><span class="number">-50000</span>)/<span class="number">256</span>;<span class="comment">//高八位</span></span><br><span class="line">TR0 = <span class="number">1</span>; <span class="comment">//定时器0开始计时</span></span><br><span class="line">EA=<span class="number">1</span>;<span class="comment">//开启总中断</span></span><br><span class="line">ET0=<span class="number">1</span>;<span class="comment">//开启定时器0中断</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Nixie</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> Data)</span><span class="comment">//数码管显示</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">Switch_Time1=<span class="number">1</span>;</span><br><span class="line">Switch_Time2=<span class="number">0</span>;</span><br><span class="line">P0=tab[Data%<span class="number">10</span>];<span class="comment">//显示个位</span></span><br><span class="line"><span class="built_in">delay_ms</span>(<span class="number">1</span>);</span><br><span class="line">Switch_Time2=<span class="number">1</span>;</span><br><span class="line">Switch_Time1=<span class="number">0</span>;</span><br><span class="line">P0=tab[Data/<span class="number">10</span>];<span class="comment">//显示十位</span></span><br><span class="line"><span class="built_in">delay_ms</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">unsigned</span> <span class="type">char</span> <span class="title">Scan_Key</span><span class="params">()</span><span class="comment">//获取按键键码</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> KeyNumber=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(P1_0==<span class="number">0</span>)&#123;<span class="built_in">delay_ms</span>(<span class="number">10</span>);<span class="keyword">while</span>(P1_0==<span class="number">0</span>);<span class="built_in">delay_ms</span>(<span class="number">10</span>);KeyNumber=<span class="number">1</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(P1_1==<span class="number">0</span>)&#123;<span class="built_in">delay_ms</span>(<span class="number">10</span>);<span class="keyword">while</span>(P1_1==<span class="number">0</span>);<span class="built_in">delay_ms</span>(<span class="number">10</span>);KeyNumber=<span class="number">2</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(P1_2==<span class="number">0</span>)&#123;<span class="built_in">delay_ms</span>(<span class="number">10</span>);<span class="keyword">while</span>(P1_2==<span class="number">0</span>);<span class="built_in">delay_ms</span>(<span class="number">10</span>);KeyNumber=<span class="number">3</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(P1_3==<span class="number">0</span>)&#123;<span class="built_in">delay_ms</span>(<span class="number">10</span>);<span class="keyword">while</span>(P1_3==<span class="number">0</span>);<span class="built_in">delay_ms</span>(<span class="number">10</span>);KeyNumber=<span class="number">4</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(P1_4==<span class="number">0</span>)&#123;<span class="built_in">delay_ms</span>(<span class="number">10</span>);<span class="keyword">while</span>(P1_4==<span class="number">0</span>);<span class="built_in">delay_ms</span>(<span class="number">10</span>);KeyNumber=<span class="number">5</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(P1_5==<span class="number">0</span>)&#123;<span class="built_in">delay_ms</span>(<span class="number">10</span>);<span class="keyword">while</span>(P1_5==<span class="number">0</span>);<span class="built_in">delay_ms</span>(<span class="number">10</span>);KeyNumber=<span class="number">6</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(P1_6==<span class="number">0</span>)&#123;<span class="built_in">delay_ms</span>(<span class="number">10</span>);<span class="keyword">while</span>(P1_6==<span class="number">0</span>);<span class="built_in">delay_ms</span>(<span class="number">10</span>);KeyNumber=<span class="number">7</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(P1_7==<span class="number">0</span>)&#123;<span class="built_in">delay_ms</span>(<span class="number">10</span>);<span class="keyword">while</span>(P1_7==<span class="number">0</span>);<span class="built_in">delay_ms</span>(<span class="number">10</span>);KeyNumber=<span class="number">8</span>;&#125;</span><br><span class="line"><span class="keyword">return</span> KeyNumber;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">traffic</span><span class="params">()</span><span class="comment">//红绿灯主要逻辑</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(Time_Mode==<span class="number">0</span>)<span class="comment">//东西南北转换</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Nixie</span>(EW_Time);</span><br><span class="line"><span class="keyword">if</span>(EW_Time&gt;<span class="number">5</span>)</span><br><span class="line">&#123;</span><br><span class="line">EW_Red=OFF;<span class="comment">//东西红灯灭</span></span><br><span class="line">NS_Yellow=OFF;<span class="comment">//南北黄灯灭</span></span><br><span class="line">NS_Green=OFF;<span class="comment">//南北绿灯灭</span></span><br><span class="line"></span><br><span class="line">EW_Green=ON;<span class="comment">//东西绿灯亮</span></span><br><span class="line">NS_Red=ON;<span class="comment">//南北红灯亮</span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(Flag_Blink==<span class="number">0</span>&amp;&amp;EW_Time&lt;=<span class="number">5</span>&amp;&amp;EW_Time&gt;<span class="number">0</span>)<span class="comment">//闪烁</span></span><br><span class="line">&#123;</span><br><span class="line">EW_Green=OFF;<span class="comment">//东西绿灯灭</span></span><br><span class="line">EW_Yellow=ON;<span class="comment">//东西黄灯亮</span></span><br><span class="line">&#125;<span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">EW_Green=OFF;<span class="comment">//东西绿灯灭</span></span><br><span class="line">EW_Yellow=OFF;<span class="comment">//东西黄灯灭</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(Time_Mode==<span class="number">1</span>)<span class="comment">//东西南北转换</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Nixie</span>(NS_Time);</span><br><span class="line"><span class="keyword">if</span>(NS_Time&gt;<span class="number">5</span>)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">NS_Red=OFF;<span class="comment">//南北红灯灭</span></span><br><span class="line">EW_Yellow=OFF;<span class="comment">//东西黄灯灭</span></span><br><span class="line">EW_Green=OFF;<span class="comment">//东西绿灯灭</span></span><br><span class="line"></span><br><span class="line">EW_Red=ON;<span class="comment">//东西红灯亮</span></span><br><span class="line">NS_Green=ON;<span class="comment">//南北绿灯亮</span></span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(Flag_Blink==<span class="number">0</span>&amp;&amp;NS_Time&lt;=<span class="number">5</span>&amp;&amp;NS_Time&gt;<span class="number">0</span>)<span class="comment">//闪烁</span></span><br><span class="line">&#123;</span><br><span class="line">NS_Green=OFF;<span class="comment">//南北绿灯灭</span></span><br><span class="line">NS_Yellow=ON;<span class="comment">//南北黄灯亮</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">NS_Green=OFF;<span class="comment">//南北绿灯灭</span></span><br><span class="line">NS_Yellow=OFF;<span class="comment">//南北黄灯灭</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Set_Time</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">char</span> Key_Num=<span class="number">0</span>,Key_Value=<span class="number">0</span>,mode=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">Key_Value=<span class="built_in">Scan_Key</span>();<span class="comment">//获取键值</span></span><br><span class="line"><span class="keyword">if</span>(Key_Value!=<span class="number">0</span>)Key_Num=Key_Value;</span><br><span class="line"><span class="keyword">if</span>(Key_Num==<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">mode++;</span><br><span class="line"><span class="keyword">if</span>(mode&gt;<span class="number">3</span>)<span class="keyword">break</span>;</span><br><span class="line">Key_Num=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(mode==<span class="number">1</span>)<span class="comment">//按下第二次显示东西通讯时间，可加减设置</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Nixie</span>(EW_SetTime);</span><br><span class="line"><span class="keyword">if</span>(Key_Num==<span class="number">2</span>)&#123;EW_SetTime++;Key_Num=<span class="number">0</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(Key_Num==<span class="number">3</span>)&#123;EW_SetTime--;Key_Num=<span class="number">0</span>;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(mode==<span class="number">2</span>)<span class="comment">//按下第二次显示南北通讯时间，可加减设置</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Nixie</span>(NS_SetTime);</span><br><span class="line"><span class="keyword">if</span>(Key_Num==<span class="number">2</span>)&#123;NS_SetTime++;Key_Num=<span class="number">0</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(Key_Num==<span class="number">3</span>)&#123;NS_SetTime--;Key_Num=<span class="number">0</span>;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(mode==<span class="number">3</span>)<span class="comment">//按下第三次时显示00，红灯亮，紧急通行</span></span><br><span class="line">&#123;</span><br><span class="line">P2=<span class="number">0xFF</span>;</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0</span>);</span><br><span class="line">NS_Red=ON;</span><br><span class="line">EW_Red=ON;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(Key_Num==<span class="number">4</span>)<span class="comment">//确认键，上传主副干道通行时间</span></span><br><span class="line">&#123;</span><br><span class="line">EW_Time=EW_SetTime;</span><br><span class="line">NS_Time=NS_SetTime;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Yellow_Blink</span><span class="params">()</span><span class="comment">//黄灯闪烁</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">char</span> Key_Num=<span class="number">0</span>,Key_Value=<span class="number">0</span>,Mode=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">Key_Value=<span class="built_in">Scan_Key</span>();<span class="comment">//获取键值</span></span><br><span class="line"><span class="keyword">if</span>(Key_Value!=<span class="number">0</span>)Mode=Key_Value;</span><br><span class="line">P2=<span class="number">0xFF</span>;</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">if</span>(Flag_Blink)</span><br><span class="line">&#123;</span><br><span class="line">EW_Yellow=ON;</span><br><span class="line">NS_Yellow=ON;</span><br><span class="line">&#125;<span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">EW_Yellow=OFF;</span><br><span class="line">NS_Yellow=OFF;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(Mode==<span class="number">5</span>)&#123;<span class="keyword">break</span>;&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">char</span> Key_Mode=<span class="number">0</span>,Key_Value=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">P2=<span class="number">0xFF</span>;</span><br><span class="line">Power=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">Timer_Init</span>();<span class="comment">//初始化定时器</span></span><br><span class="line"><span class="comment">//NS_Green=OFF;</span></span><br><span class="line">  <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">  &#123; </span><br><span class="line">Key_Value=<span class="built_in">Scan_Key</span>();</span><br><span class="line"><span class="keyword">if</span>(Key_Value!=<span class="number">0</span>)Key_Mode=Key_Value;</span><br><span class="line"><span class="keyword">switch</span>(Key_Mode)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:<span class="built_in">traffic</span>();</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:<span class="built_in">Set_Time</span>();</span><br><span class="line">Key_Mode=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">5</span>:<span class="built_in">Yellow_Blink</span>();</span><br><span class="line">Key_Mode=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">Key_Mode=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Timer0</span><span class="params">()</span> interrupt 1</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">static</span> <span class="type">unsigned</span> <span class="type">char</span> count=<span class="number">0</span>,count1=<span class="number">0</span>;</span><br><span class="line">TL0=(<span class="number">65536</span><span class="number">-50000</span>)%<span class="number">256</span>;<span class="comment">//低八位</span></span><br><span class="line">TH0=(<span class="number">65536</span><span class="number">-50000</span>)/<span class="number">256</span>;<span class="comment">//高八位</span></span><br><span class="line"><span class="keyword">if</span>(count&gt;=<span class="number">10</span>)</span><br><span class="line">&#123;</span><br><span class="line">count=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(Time_Mode==<span class="number">0</span>)<span class="comment">//东西时间减</span></span><br><span class="line">&#123;</span><br><span class="line">EW_Time--;</span><br><span class="line"><span class="keyword">if</span>(EW_Time&lt;<span class="number">0</span>)&#123;EW_Time=EW_SetTime;Time_Mode=!Time_Mode;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(Time_Mode==<span class="number">1</span>)<span class="comment">//南北时间减</span></span><br><span class="line">&#123;</span><br><span class="line">NS_Time--;</span><br><span class="line"><span class="keyword">if</span>(NS_Time&lt;<span class="number">0</span>)&#123;NS_Time=NS_SetTime;Time_Mode=!Time_Mode;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(count1&gt;=<span class="number">5</span>)<span class="comment">//闪烁标志位</span></span><br><span class="line">&#123;</span><br><span class="line">count1=<span class="number">0</span>;</span><br><span class="line">Flag_Blink=!Flag_Blink;</span><br><span class="line">&#125;</span><br><span class="line">count++;</span><br><span class="line">count1++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​</p>]]></content>
      
      
      <categories>
          
          <category> 51单片机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> 51单片机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>51单片机AD转换（ADC0808）</title>
      <link href="/archives/cc487495.html"/>
      <url>/archives/cc487495.html</url>
      
        <content type="html"><![CDATA[<p>​ ADC0808是CMOS单片型<strong>逐次逼近式</strong>A&#x2F;D转换器，它有8路模拟开关、地址锁存与译码器、比较器、8位开关树型A&#x2F;D转换器。</p><p>将参考电压输出成0~255</p><p><img src="https://s2.loli.net/2024/07/26/jL4H1wFBeaAPS7i.png"></p><h2 id="引脚"><a href="#引脚" class="headerlink" title="引脚"></a>引脚</h2><p>ADC0808芯片有28条引脚，采用双列直插式封装。各引脚功能如下：</p><p>1～5和26～28（IN0～IN7）：8路模拟量输入端。</p><p>8、14、15和17～21（out1~out8）：8位数字量输出端。高位在前</p><p>22（ <strong>ALE</strong> ）：地址锁存允许信号，输入，高电平有效。</p><p>6（ <strong>START</strong> ）： A&#x2F;D转换启动脉冲输入端，输入一个正脉冲（至少100ns宽）使其启动（脉冲上升沿使0808复位，下降沿启动A&#x2F;D转换）。</p><p>7（ <strong>EOC</strong> ）： A&#x2F;D转换结束信号，输出，当A&#x2F;D转换结束时，此端输出一个高电平（转换期间一直为低电平）。</p><p>9（ <strong>OE</strong> ）：数据输出允许信号，输入，高电平有效。当A&#x2F;D转换结束时，此端输入一个高电平，才能打开输出三态门，输出数字量。</p><p>10（ <strong>CLK</strong> ）：时钟脉冲输入端。要求时钟频率不高于640KHZ。</p><p>12（ <strong>VREF（+）</strong> ）和16（ <strong>VREF（-）</strong> ）：<strong>参考电压</strong>输入端</p><p>11（ <strong>Vcc</strong> ）：主电源输入端。</p><p>13（ <strong>GND</strong> ）：地。</p><p>23～25（ <strong>ADDA、ADDB、ADDC</strong> ）：3位地址输入线，用于选通8路模拟输入中的一路</p><p><img src="https://s2.loli.net/2024/07/26/FHZEoiGhWyVCfbJ.png"></p><h2 id="时序图"><a href="#时序图" class="headerlink" title="时序图"></a>时序图</h2><p><img src="https://s2.loli.net/2024/07/26/8tjQ95DL2ds7iaV.png"></p><p>给START和ALE脉冲，这时芯片会将ADD(A<del>C)地址写入，启动AD转换，转换过程中EOC为低电平，转换成功后EOC为高电平，这时向OE写入1即可读出out的数据（0</del>255）。</p><h2 id="参考接线"><a href="#参考接线" class="headerlink" title="参考接线"></a>参考接线</h2><p><img src="https://s2.loli.net/2024/07/26/eI216gvDq4kNzrO.png"></p><h2 id="仿真图"><a href="#仿真图" class="headerlink" title="仿真图"></a>仿真图</h2><p><img src="https://s2.loli.net/2024/07/26/XsfwopvYQczMWkG.png"></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REGX52.H&gt;</span></span></span><br><span class="line">sbit ADDA=P1^<span class="number">4</span>;</span><br><span class="line">sbit ADDB=P1^<span class="number">5</span>;</span><br><span class="line">sbit ADDC=P1^<span class="number">6</span>;</span><br><span class="line">sbit START_ALE=P1^<span class="number">2</span>;</span><br><span class="line">sbit EOC=P1^<span class="number">1</span>;</span><br><span class="line">sbit CLOCK=P1^<span class="number">3</span>;</span><br><span class="line">sbit OE=P1^<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> tab[]=&#123;<span class="number">0x3f</span>,<span class="number">0x06</span>,<span class="number">0x5b</span>,<span class="number">0x4f</span>,<span class="number">0x66</span>,<span class="number">0x6d</span>,<span class="number">0x7d</span>,<span class="number">0x07</span>,<span class="number">0x7f</span>,<span class="number">0x6f</span>,<span class="number">0x77</span>,<span class="number">0x7c</span>,<span class="number">0x39</span>,<span class="number">0x5e</span>,<span class="number">0x79</span>,<span class="number">0x71</span>&#125;;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> i=<span class="number">0</span>;</span><br><span class="line"><span class="comment">//void delay_ms(unsigned int ms)//ms延时函数</span></span><br><span class="line"><span class="comment">//&#123;</span></span><br><span class="line"><span class="comment">//unsigned int i,j;</span></span><br><span class="line"><span class="comment">//for(i=ms;i&gt;0;i--)</span></span><br><span class="line"><span class="comment">//for(j=110;j&gt;0;j--);</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Timer_Init</span><span class="params">()</span><span class="comment">//定时器初始化</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">TMOD=<span class="number">0x01</span>; <span class="comment">//设置为定时器0工作模式1</span></span><br><span class="line">TL0=(<span class="number">65536</span><span class="number">-100</span>)%<span class="number">256</span>;<span class="comment">//低八位</span></span><br><span class="line">TH0=(<span class="number">65536</span><span class="number">-100</span>)/<span class="number">256</span>;<span class="comment">//高八位</span></span><br><span class="line">TR0 = <span class="number">1</span>; <span class="comment">//定时器0开始计时</span></span><br><span class="line">EA=<span class="number">1</span>;<span class="comment">//开启总中断</span></span><br><span class="line">ET0=<span class="number">1</span>;<span class="comment">//开启定时器0中断</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">unsigned</span> <span class="type">char</span> <span class="title">ADC0808_Out</span><span class="params">()</span><span class="comment">//ad转换，将电压八位输出</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> out=<span class="number">0</span>;</span><br><span class="line">ADDA=<span class="number">1</span>;<span class="comment">//ADC地址端，通过A~C可选0~7</span></span><br><span class="line">ADDB=<span class="number">1</span>;</span><br><span class="line">ADDC=<span class="number">0</span>;</span><br><span class="line">START_ALE=<span class="number">0</span>;<span class="comment">//START和ALE先给低电平再给高电平，写入地址，启动adc</span></span><br><span class="line">START_ALE=<span class="number">1</span>;</span><br><span class="line">START_ALE=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span>(EOC==<span class="number">0</span>);<span class="comment">//等待ad转换结束</span></span><br><span class="line">OE=<span class="number">1</span>;<span class="comment">//向OE端写入1，三态门输出数据</span></span><br><span class="line">out=P3;</span><br><span class="line">OE=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">return</span> out;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">P2=<span class="number">0xfe</span>;</span><br><span class="line"><span class="built_in">Timer_Init</span>();<span class="comment">//初始化定时器</span></span><br><span class="line">  <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">  &#123; </span><br><span class="line">i=<span class="built_in">ADC0808_Out</span>()/<span class="number">50</span>;<span class="comment">//将256大致区分到5级</span></span><br><span class="line">P0=tab[i];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Timer0</span><span class="params">()</span> interrupt 1</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">TL0=(<span class="number">65536</span><span class="number">-100</span>)%<span class="number">256</span>;<span class="comment">//低八位</span></span><br><span class="line">TH0=(<span class="number">65536</span><span class="number">-100</span>)/<span class="number">256</span>;<span class="comment">//高八位</span></span><br><span class="line">CLOCK=~CLOCK;<span class="comment">//给ADC时钟10khz</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​</p>]]></content>
      
      
      <categories>
          
          <category> 51单片机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> 51单片机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STM32环境搭建+创建工程</title>
      <link href="/archives/8493b5fa.html"/>
      <url>/archives/8493b5fa.html</url>
      
        <content type="html"><![CDATA[<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>第一步安装keil5</p><p>keil5下载官网：<a href="https://www.keil.com/download/product/" title="Keil Product Downloads">Keil Product Downloads</a></p><p>第二步安装器件支持包</p><p>确认自己所用芯片型号，arm官网下载<a href="https://www.keil.arm.com/packs/?q=stm32&pack-search=" title="阿姆凯尔 |CMSIS包 (arm.com)">阿姆凯尔 |CMSIS包 (arm.com)</a></p><p>第三步安装驱动</p><p>安装对应的串口或STLink驱动</p><p>创建工程需要对应的库在ST官网上可以下载</p><p><a href="https://www.st.com/zh/embedded-software/stm32-standard-peripheral-libraries.html" title="STM32标准外设软件库 - 意法半导体STMicroelectronics">STM32标准外设软件库 - 意法半导体STMicroelectronics</a></p><p>如果嫌找资源太麻烦可以直接在我的百度网盘下载</p><p>链接：<a href="https://pan.baidu.com/s/191sTZImc_E-AjyDcUnsreA">https://pan.baidu.com/s/191sTZImc_E-AjyDcUnsreA</a></p><p>提取码：5smv</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>这里我已经安装好了keil5所有就不演示了，大约就是找好安装路径（不能有中文），随便填点信息，一直下一步就可以了。之后便是破解，网上很多教程，如果不懂可以看江科大的视频<a href="https://www.bilibili.com/video/BV1th411z7sn?p=3&vd_source=2c23b82f18fb25f92a441ab8616a4d32" title="[2-1] 软件安装_哔哩哔哩_bilibili">[2-1] 软件安装_哔哩哔哩_bilibili</a></p><p>这个界面是用来安装器件包的，因为速度较慢就不使用了。</p><p><img src="https://s2.loli.net/2024/07/26/Xcuaf9QxbsnWRzq.png"></p><p>这里使用离线安装的方式</p><p><img src="https://s2.loli.net/2024/07/26/I6lFBihZxnJsmgQ.png"></p><p>找到自己需要的支持包，比如我的是<strong>stm32f103c6t6</strong>就选<strong>STM32F1XX</strong>这个，双击打开</p><p><img src="https://s2.loli.net/2024/07/26/I6lFBihZxnJsmgQ.png"></p><p>下一步（Next）稍等一会出现以下提示，代表安装完成</p><p><img src="https://s2.loli.net/2024/07/26/UKJIjCRLz9rTchw.png"></p><p>接下来安装STLINK驱动,在Keil_v5\ARM\STLink\USBDriver目录下也有这个驱动</p><p><img src="https://s2.loli.net/2024/07/26/IC1zAR4EVoPMGYh.png"></p><p>双击，确认安装即可</p><p><img src="https://s2.loli.net/2024/07/26/9BJOzCpvxqtcdUy.png"></p><p><img src="https://s2.loli.net/2024/07/26/vGkIsaZxj52SHp6.png"></p><p>安装好驱动后在设备管理器，STLINK显示正常</p><p><img src="https://s2.loli.net/2024/07/26/l5LZMmCR7sHbEgk.png"></p><h2 id="创建工程"><a href="#创建工程" class="headerlink" title="创建工程"></a>创建工程</h2><p>搭建好环境之后就是创建一个工程Project-&gt;new Priject</p><p><img src="https://s2.loli.net/2024/07/26/ObEm54U6kyguBrl.png"></p><p>选择路径和命名</p><p><img src="https://s2.loli.net/2024/07/26/BFQw8Jfsy6D9hrL.png"></p><p>选择芯片型号</p><p><img src="https://s2.loli.net/2024/07/26/6WajBY4bpAsK5FX.png"></p><p>这个是新建工程助手，暂时不需要，Cancel关闭</p><p><img src="https://s2.loli.net/2024/07/26/UkJFhlaLYGs3iwd.png"></p><p>找到固件库该路径下的所有文件复制，这些是启动文件</p><p><img src="https://s2.loli.net/2024/07/26/bGUFWMI67xQflVw.png"></p><p>新建一个文件夹用于存放启动文件，这里命名为Start，之后粘贴上去</p><p><img src="https://s2.loli.net/2024/07/26/PWrASOXzcGgljeM.png"></p><p>以下路径的三个文件也粘贴到Start文件夹上，第一个为寄存器描述文件，第二和第三主要用于配置时钟</p><p><img src="https://s2.loli.net/2024/07/26/zvDhTwiNSRFyaq7.png"></p><p>以下路径的两个文件也粘贴到Start文件夹上，这两个文件主要是内核寄存器描述</p><p><img src="https://s2.loli.net/2024/07/26/3KkdBasUiuFN1tI.png"></p><p>Start文件夹主要有以下文件</p><p><img src="https://s2.loli.net/2024/07/26/4gDOHIxwyZu2CBn.png"></p><p>回到keil5软件界面</p><p>先点击再单击，修改目录，将启动文件（我这里是后缀为.md的文件）和.h.c后缀的文件放进去</p><p><img src="https://s2.loli.net/2024/07/26/Gi2knfEC18emDj4.png"></p><p>双击添加，选择All files可以看到全部文件</p><p><img src="https://s2.loli.net/2024/07/26/vHzfYxTuB4erocW.png"></p><p>添加时按Ctrl可以多选</p><p><img src="https://s2.loli.net/2024/07/26/dos3iQlqrJYRGK4.png"></p><p>接下来添加头文件路径，点击魔术棒-&gt;c&#x2F;c++-&gt;Include Paths旁的三个点</p><p><img src="https://s2.loli.net/2024/07/26/zYKQN4BgnaML16t.png"></p><p><img src="https://s2.loli.net/2024/07/26/nHTEOqUFLJ6k1yD.png"></p><p>添加Start路径</p><p><img src="https://s2.loli.net/2024/07/26/qVwfdc5bXJDhatl.png"></p><p><img src="https://s2.loli.net/2024/07/26/AwOrpy81W4uaMF5.png"></p><p>在工程新建Library文件夹，将下面路径里的文件都复制过来（inc文件夹和src文件夹）</p><p><img src="https://s2.loli.net/2024/07/26/uSvoZNxR1rAJ3K5.png"></p><p><img src="https://s2.loli.net/2024/07/26/mvGyHfnQxXN8P9o.png"></p><p>在工程目录下新建Library双击添加刚刚添加的文件（.c和.h都要添加）</p><p><img src="https://s2.loli.net/2024/07/26/SimPkLyw3XebxnB.png"></p><p>在文件目录下创建一个User文件夹，之后在工程目录下新建一个文件夹，添加main.c到User目录下</p><p><img src="https://s2.loli.net/2024/07/26/CJbv1jr3nWSUXQg.png"></p><p>将下面路径的文件复制到User目录，并将这三个文件添加到工程</p><p><img src="https://s2.loli.net/2024/07/26/f2RvXUjSrpQAsNV.png"></p><p><img src="https://s2.loli.net/2024/07/26/1SV8ruhstajYeWD.png"></p><p>在C&#x2F;C++-&gt;Define添加USE_STDPERIPH_DRIVER</p><p><img src="https://s2.loli.net/2024/07/26/JpB8iZgqTDFCLtY.png"></p><p>将User和Libaray添加进去</p><p><img src="https://s2.loli.net/2024/07/26/RBQ2HhkpwPnNVru.png"></p><p><img src="https://s2.loli.net/2024/07/26/adhVscleKQvbU2T.png"></p><p>运行代码</p><p>在main.c里敲上以下代码</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stm32f10x.h&quot;</span>                  <span class="comment">// Device header</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//开启时钟</span></span><br><span class="line"><span class="built_in">RCC_APB2PeriphClockCmd</span>(RCC_APB2Periph_GPIOC,ENABLE);</span><br><span class="line"><span class="comment">//定义结构体变量</span></span><br><span class="line">GPIO_InitTypeDef GPIO_InitStructuer;</span><br><span class="line"><span class="comment">//设置GPIO模式，推挽输出模式</span></span><br><span class="line">GPIO_InitStructuer.GPIO_Mode = GPIO_Mode_Out_PP;</span><br><span class="line"><span class="comment">//设置GPIO引脚</span></span><br><span class="line">GPIO_InitStructuer.GPIO_Pin = GPIO_Pin_13;</span><br><span class="line"><span class="comment">//设置GPIO速度</span></span><br><span class="line">GPIO_InitStructuer.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class="line"><span class="comment">//传入结构体，初始化GPIO</span></span><br><span class="line"><span class="built_in">GPIO_Init</span>(GPIOC,&amp;GPIO_InitStructuer);</span><br><span class="line"><span class="comment">//设置PC13为低电平，点亮一盏灯</span></span><br><span class="line"><span class="built_in">GPIO_ResetBits</span>(GPIOC,GPIO_Pin_13);</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编译下载</p><p><img src="https://s2.loli.net/2024/07/26/43SLsWq9FGKpdYt.png"></p><p>摁一下开发板复位按钮，成功点灯！</p><p><img src="https://s2.loli.net/2024/07/26/ToLGHeRvPqmsSth.jpg"></p><h3 id="一些问题"><a href="#一些问题" class="headerlink" title="一些问题"></a>一些问题</h3><p>由于我的keil版本较高需要安装老编译器</p><p>Compiler Version 5编译器在Keil 5.37以后就不再默认安装了</p><p>复制一个叫【ARMCC】的文件夹，粘贴到Keil_v5\ARM目录下</p><p><img src="https://s2.loli.net/2024/07/26/KWhdE1UMQnyD92R.png"></p><p><img src="https://s2.loli.net/2024/07/26/CcNIT3vKUVidymZ.png"></p><p>在Folders&#x2F;Extensions标签下，点击右侧省略号添加之前复制的ARMCC文件夹，这样子以来我们的MDK5.37就有Arm Compiler 5了</p><p><img src="https://s2.loli.net/2024/07/26/k7nr6zShxYOq5Bc.png"></p><p><img src="https://s2.loli.net/2024/07/26/q8BMoRd2n3yX9rI.png"></p><p>编译成功</p><p><img src="https://s2.loli.net/2024/07/26/1om3ELZgXHeqSvp.png"><br>​</p>]]></content>
      
      
      <categories>
          
          <category> stm32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> stm32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>贪吃蛇（C++）</title>
      <link href="/archives/e8af8e6d.html"/>
      <url>/archives/e8af8e6d.html</url>
      
        <content type="html"><![CDATA[<p>​ 使用EasyX图形库绘制，在VC中安装，EasyX官网：<a href="https://easyx.cn/" title="EasyX Graphics Library for C++">EasyX Graphics Library for C++</a></p><p>EasyX官方文档：<a href="https://docs.easyx.cn/zh-cn/tutorials" title="EasyX 文档 - 使用教程">EasyX 文档 - 使用教程</a></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;easyx.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;vector&gt;</span><span class="comment">//顺序表，容器</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Sprite</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="comment">//委托构造函数</span></span><br><span class="line"><span class="built_in">Sprite</span>():<span class="built_in">Sprite</span>(<span class="number">0</span>,<span class="number">0</span>) &#123;&#125;</span><br><span class="line"><span class="built_in">Sprite</span>(<span class="type">int</span> x, <span class="type">int</span> y) :<span class="built_in">m_x</span>(x), <span class="built_in">m_y</span>(y),<span class="built_in">m_color</span>(RED) &#123;&#125;</span><br><span class="line"><span class="comment">//绘制精灵</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">draw</span><span class="params">()</span> </span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//设置填充颜色</span></span><br><span class="line"><span class="built_in">setfillcolor</span>(m_color);</span><br><span class="line"><span class="comment">//绘制矩形</span></span><br><span class="line"><span class="built_in">fillrectangle</span>(m_x, m_y, m_x<span class="number">+10</span>, m_y<span class="number">+10</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//移动</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">moveBy</span><span class="params">(<span class="type">int</span> dx, <span class="type">int</span> dy)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">m_x += dx;</span><br><span class="line">m_y += dy;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//碰撞检测</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">collision</span><span class="params">(<span class="type">const</span> Sprite&amp; ohter)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_x == ohter.m_x &amp;&amp; m_y == ohter.m_y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">coollisionWall</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> m_x &gt; <span class="number">640</span> || m_x &lt; <span class="number">0</span> || m_y&gt;<span class="number">480</span> || m_y &lt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">protected</span>:</span><br><span class="line"><span class="type">int</span> m_y;</span><br><span class="line"><span class="type">int</span> m_x;</span><br><span class="line">COLORREF m_color;<span class="comment">//颜色</span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//蛇类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Snake</span>:<span class="keyword">public</span> Sprite</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Snake</span>():<span class="built_in">Snake</span>(<span class="number">0</span>,<span class="number">0</span>) &#123;&#125;</span><br><span class="line"><span class="built_in">Snake</span>(<span class="type">int</span> x, <span class="type">int</span> y) :<span class="built_in">Sprite</span>(x, y),<span class="built_in">dir</span>(VK_RIGHT)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//初始化三节蛇</span></span><br><span class="line">nodes.<span class="built_in">push_back</span>(<span class="built_in">Sprite</span>(<span class="number">20</span>, <span class="number">0</span>));</span><br><span class="line">nodes.<span class="built_in">push_back</span>(<span class="built_in">Sprite</span>(<span class="number">10</span>, <span class="number">0</span>));</span><br><span class="line">nodes.<span class="built_in">push_back</span>(<span class="built_in">Sprite</span>(<span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">draw</span><span class="params">()</span> <span class="keyword">override</span><span class="comment">//绘制蛇</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; nodes.<span class="built_in">size</span>(); i++)</span><br><span class="line">&#123;</span><br><span class="line">nodes[i].<span class="built_in">draw</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//蛇移动</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">bodyMove</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//身体跟蛇头移动</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">size_t</span> i = nodes.<span class="built_in">size</span>()<span class="number">-1</span>; i &gt;<span class="number">0</span>; i--)</span><br><span class="line">&#123;</span><br><span class="line">nodes[i] = nodes[i - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//蛇头移动</span></span><br><span class="line"><span class="keyword">switch</span> (dir)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> VK_UP:<span class="comment">//上移</span></span><br><span class="line">nodes[<span class="number">0</span>].<span class="built_in">moveBy</span>(<span class="number">0</span>, <span class="number">-10</span>);</span><br><span class="line"><span class="keyword">break</span>; </span><br><span class="line"><span class="keyword">case</span> VK_DOWN:<span class="comment">//下移</span></span><br><span class="line">nodes[<span class="number">0</span>].<span class="built_in">moveBy</span>(<span class="number">0</span>, <span class="number">10</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> VK_LEFT:<span class="comment">//左移</span></span><br><span class="line">nodes[<span class="number">0</span>].<span class="built_in">moveBy</span>(<span class="number">-10</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> VK_RIGHT:<span class="comment">//右移</span></span><br><span class="line">nodes[<span class="number">0</span>].<span class="built_in">moveBy</span>(<span class="number">10</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//吃食物,蛇碰撞</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">collision</span><span class="params">(<span class="type">const</span> Sprite&amp; other)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> nodes[<span class="number">0</span>].<span class="built_in">collision</span>(other);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//碰撞墙壁</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">die</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> nodes[<span class="number">0</span>].<span class="built_in">coollisionWall</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//蛇增加一节</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">incrment</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">nodes.<span class="built_in">push_back</span>(<span class="built_in">Sprite</span>());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">std::vector&lt;Sprite&gt;nodes;<span class="comment">//蛇的所有结点</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="type">int</span> dir;<span class="comment">//蛇的方向</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//食物</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Food</span> :<span class="keyword">public</span> Sprite</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">Food</span>():<span class="built_in">Sprite</span>(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">changePos</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//绘制食物</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">draw</span><span class="params">()</span><span class="keyword">override</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">setfillcolor</span>(m_color);</span><br><span class="line"><span class="built_in">solidellipse</span>(m_x, m_y, m_x + <span class="number">10</span>, m_y + <span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//产生食物的坐标</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">changePos</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//生成随机坐标 </span></span><br><span class="line">m_x = <span class="built_in">rand</span>() % <span class="number">64</span> * <span class="number">10</span>;<span class="comment">//食物坐标为10的整数倍</span></span><br><span class="line">m_y = <span class="built_in">rand</span>() % <span class="number">48</span> * <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//游戏场景</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">GameScene</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">GameScene</span>() </span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//开启双缓冲</span></span><br><span class="line"><span class="built_in">BeginBatchDraw</span>();</span><br><span class="line"><span class="comment">//清屏</span></span><br><span class="line"><span class="built_in">cleardevice</span>();</span><br><span class="line"><span class="comment">//绘制蛇</span></span><br><span class="line">snake.<span class="built_in">draw</span>();</span><br><span class="line"><span class="comment">//绘制食物</span></span><br><span class="line">food.<span class="built_in">draw</span>();</span><br><span class="line"><span class="built_in">EndBatchDraw</span>();</span><br><span class="line"><span class="comment">//移动蛇，改变蛇的坐标</span></span><br><span class="line">snake.<span class="built_in">bodyMove</span>();</span><br><span class="line"><span class="comment">//是否吃到食物</span></span><br><span class="line"><span class="built_in">snakeEatFood</span>();</span><br><span class="line"><span class="comment">//获取消息</span></span><br><span class="line">ExMessage msg = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">peekmessage</span>(&amp;msg, EX_KEY))</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">onMsg</span>(msg);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//响应消息：鼠标消息，键盘消息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">onMsg</span><span class="params">(<span class="type">const</span> ExMessage&amp; msg)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//如果有按键按下</span></span><br><span class="line"><span class="keyword">if</span> (msg.message == WM_KEYDOWN)</span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//判断具体是那个按键按下 virtual key code 虚拟键码</span></span><br><span class="line"><span class="comment">//判断上时不能按下，左时不能按右</span></span><br><span class="line"><span class="keyword">switch</span> (msg.vkcode)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> VK_UP:</span><br><span class="line"><span class="keyword">if</span>(snake.dir!=VK_DOWN)</span><br><span class="line">snake.dir = msg.vkcode;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> VK_DOWN:</span><br><span class="line"><span class="keyword">if</span> (snake.dir != VK_UP)</span><br><span class="line">snake.dir = msg.vkcode;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> VK_LEFT:</span><br><span class="line"><span class="keyword">if</span> (snake.dir != VK_RIGHT)</span><br><span class="line">snake.dir = msg.vkcode;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> VK_RIGHT:</span><br><span class="line"><span class="keyword">if</span> (snake.dir != VK_LEFT)</span><br><span class="line">snake.dir = msg.vkcode;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//判断蛇能否吃到食物</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">snakeEatFood</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (snake.<span class="built_in">collision</span>(food))<span class="comment">//如果蛇和食物产生碰撞</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//蛇的节数增加</span></span><br><span class="line">snake.<span class="built_in">incrment</span>();</span><br><span class="line"><span class="comment">//产生新的食物</span></span><br><span class="line">food.<span class="built_in">changePos</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//判断蛇是否碰到墙壁,如果碰到了游戏结束</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">snakeDie</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (snake.<span class="built_in">die</span>())</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cleardevice</span>();<span class="comment">//清除屏幕</span></span><br><span class="line"><span class="built_in">outtextxy</span>(<span class="number">250</span>, <span class="number">200</span>, <span class="string">L&quot;GAME OVER!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">Snake snake;<span class="comment">//创建蛇</span></span><br><span class="line">Food food;<span class="comment">//食物</span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//绘制窗口</span></span><br><span class="line"><span class="built_in">initgraph</span>(<span class="number">640</span>, <span class="number">480</span>);</span><br><span class="line"><span class="comment">//设置随机数种子</span></span><br><span class="line"><span class="built_in">srand</span>(<span class="built_in">time</span>(<span class="literal">nullptr</span>));</span><br><span class="line"></span><br><span class="line">GameScene scene;</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">&#123;</span><br><span class="line">scene.<span class="built_in">run</span>();</span><br><span class="line"><span class="comment">//是否死亡</span></span><br><span class="line"><span class="keyword">if</span> (scene.<span class="built_in">snakeDie</span>())</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Sleep</span>(<span class="number">100</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">getchar</span>();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​</p>]]></content>
      
      
      <categories>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>51输出周期为40ms的方波（C+汇编）</title>
      <link href="/archives/626ed068.html"/>
      <url>/archives/626ed068.html</url>
      
        <content type="html"><![CDATA[<h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>已知Fosc&#x3D;12MHz，T1工作于方式1，</p><p>①：实现20ms延时，求定时器初值TH0&#x3D;？TL0&#x3D;？写出具体的计算过程。</p><p>②：利用汇编或C语言编程实现输出周期为40ms的方波。</p><p>周期为40ms的方波，半周期就为20ms</p><p>TH0&#x3D;(65536-20000)&#x2F;256&#x3D;177&#x3D;0B1H</p><p>TL0&#x3D;(65536-20000)%256&#x3D;224&#x3D;0E0H</p><h2 id="C代码"><a href="#C代码" class="headerlink" title="C代码"></a>C代码</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REGX52.H&gt;</span></span></span><br><span class="line"></span><br><span class="line">sbit flag=P1^<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">TMOD=<span class="number">0x10</span>;<span class="comment">//定时器模式，模式1，定时器1</span></span><br><span class="line">TH1=<span class="number">0xB1</span>;<span class="comment">//赋定时器初值</span></span><br><span class="line">TL1=<span class="number">0xE0</span>;</span><br><span class="line">TR1=<span class="number">1</span>;<span class="comment">//开启定时器1</span></span><br><span class="line">EA=<span class="number">1</span>;<span class="comment">//开启总中断</span></span><br><span class="line">ET1=<span class="number">1</span>;<span class="comment">//开启定时器1中断</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">timer1</span><span class="params">()</span>interrupt 3<span class="comment">//定时器1中断服务程序</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">TH1=<span class="number">0xB1</span>;<span class="comment">//重新赋初值</span></span><br><span class="line">TL1=<span class="number">0xE0</span>;</span><br><span class="line">flag=~flag;<span class="comment">//产生方波</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="汇编"><a href="#汇编" class="headerlink" title="汇编"></a>汇编</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">ORG <span class="number">0000</span>H;程序入口地址</span><br><span class="line">AJMP START;跳转到START程序</span><br><span class="line">ORG<span class="number">001</span>BH;中断服务程序入口</span><br><span class="line">LJMP TIME1;中断服务程序TIME</span><br><span class="line">ORG <span class="number">0040</span>H</span><br><span class="line"></span><br><span class="line">START:  MOV TMOD,#<span class="number">10</span>H;定时器模式，模式<span class="number">1</span>，定时器<span class="number">1</span></span><br><span class="line">MOV TH1,#<span class="number">0B1</span>H;赋定时器初值</span><br><span class="line">MOV TL1,#<span class="number">0E0</span>H </span><br><span class="line">SETB TR1;开启定时器<span class="number">1</span></span><br><span class="line">SETB EA;开启总中断</span><br><span class="line">SETB ET1;开启定时器<span class="number">1</span>中断</span><br><span class="line">SJMP $</span><br><span class="line">TIME1:MOV TH1,#<span class="number">0B1</span>H;赋定时器初值</span><br><span class="line">MOV TL1,#<span class="number">0E0</span>H </span><br><span class="line">CPL P<span class="number">1.0</span>;产生方波</span><br><span class="line">RETI</span><br><span class="line"></span><br><span class="line">END</span><br></pre></td></tr></table></figure><h2 id="仿真图"><a href="#仿真图" class="headerlink" title="仿真图"></a>仿真图</h2><p><img src="https://s2.loli.net/2024/07/26/zWEDB7bA98hykMv.png"></p>]]></content>
      
      
      <categories>
          
          <category> 51单片机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> 51单片机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>proteus示波器不弹出来</title>
      <link href="/archives/feb283f9.html"/>
      <url>/archives/feb283f9.html</url>
      
        <content type="html"><![CDATA[<p>​ 运行后示波器没有弹出来</p><p><img src="https://s2.loli.net/2024/07/26/U3f9zw1Q8iWOEdA.png"></p><p>点击调试（Debug）在点击Digital Oscilloscope</p><p><img src="https://s2.loli.net/2024/07/26/FCjDOMGxUNc36RZ.png"></p><p>完成</p><p><img src="https://s2.loli.net/2024/07/26/QaUOw3Yq7Gmnvhi.png"><br>​</p>]]></content>
      
      
      <categories>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Proteus </tag>
            
            <tag> 软件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Python爬取小说</title>
      <link href="/archives/cb748485.html"/>
      <url>/archives/cb748485.html</url>
      
        <content type="html"><![CDATA[<p>​ 爬取小说大致分三步</p><p>1.获取网页</p><p>2.分析获取内容</p><p>3.保存到文本</p><p>具体步骤放代码里了，注释很清晰了。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 爬取小说</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#requests是一个常用的 HTTP 请求库，可以方便地向网站发送 HTTP 请求，并获取响应结果。</span></span><br><span class="line"><span class="comment">#pip install requests</span></span><br><span class="line"><span class="comment">#lxml是python的一个解析库，支持HTML和XML的解析，支持XPath解析方式</span></span><br><span class="line"><span class="comment">#pip install lxml</span></span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment">#网站地址</span></span><br><span class="line">url = <span class="string">&quot;https://dldl1.nsbuket.cc/xiaoshuo/douluodalu/1.html&quot;</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment">#伪装用户</span></span><br><span class="line">    headers=&#123;</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>:<span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36 Edg/124.0.0.0&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment"># 发送请求，get方式</span></span><br><span class="line">    resp = requests.get(url,headers=headers)</span><br><span class="line">    <span class="comment">#设置编码</span></span><br><span class="line">    resp.encoding=<span class="string">&#x27;utf-8&#x27;</span></span><br><span class="line">    <span class="comment">#响应信息</span></span><br><span class="line">    <span class="comment"># print(resp.text)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取文本</span></span><br><span class="line">    e=etree.HTML(resp.text)</span><br><span class="line">    info=<span class="string">&#x27;\n&#x27;</span>.join(e.xpath(<span class="string">&#x27;//div[@class=&quot;m-post&quot;]/p/text()&#x27;</span>))<span class="comment">#章节内容</span></span><br><span class="line">    title=e.xpath(<span class="string">&#x27;//h1/text()&#x27;</span>)[<span class="number">0</span>]<span class="comment">#章节标题</span></span><br><span class="line">    <span class="comment"># print(title)</span></span><br><span class="line">    <span class="comment"># print(info)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 获取下一章节地址</span></span><br><span class="line">    url = <span class="string">f&#x27;https://dldl1.nsbuket.cc<span class="subst">&#123;e.xpath(<span class="string">&quot;//td[2]/a/@href&quot;</span>)[<span class="number">0</span>]&#125;</span>&#x27;</span></span><br><span class="line">    <span class="built_in">print</span>(title)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#保存</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;斗罗大陆.txt&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(title+<span class="string">&#x27;\n\n&#x27;</span>+info+<span class="string">&#x27;\n\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">#退出循环</span></span><br><span class="line">    <span class="keyword">if</span> url==<span class="string">&#x27;https://dldl1.nsbuket.cc/xiaoshuo/douluodalu/217333.html&#x27;</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><p>​</p>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS基础（盒子模型、浮动、定位）</title>
      <link href="/archives/d90d616.html"/>
      <url>/archives/d90d616.html</url>
      
        <content type="html"><![CDATA[<h2 id="盒子模型"><a href="#盒子模型" class="headerlink" title="盒子模型"></a>盒子模型</h2><p>所有HTML元素可以看作盒子，这个盒子包含了内容、内边距、边框和外边距。<br><img src="https://s2.loli.net/2024/07/26/mM9xV38GHCcLyqu.png"></p><ul><li><strong>Margin(外边距)</strong> -边框外的区域，也就是盒子与其他元素之间的空间，外边距是透明的。</li><li><strong>Border(边框)</strong> - 围绕在内边距和内容外的边框。就是边框大小</li><li><strong>Padding(内边距)</strong> - 清除内容周围的区域，内边距是透明的。内容与边框之间的距离</li><li><strong>Content(内容)</strong> - 盒子的内容，显示文本和图像。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;CSS/style.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">       <span class="selector-class">.demo</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: aqua;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 实线边框，左边10宽度边框，红色 */</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-style</span>:solid;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-width</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border-color</span>: red;</span></span><br><span class="line"><span class="language-css">       &#125;</span></span><br><span class="line"><span class="language-css">       <span class="selector-class">.demo2</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: yellow;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">5px</span> solid brown;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 外边距 */</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 内边距 */</span></span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        </span></span><br><span class="line"><span class="language-css">       &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo&quot;</span>&gt;</span>这是一个盒子<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;demo2&quot;</span>&gt;</span>这是另一个盒子<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/07/26/wp387FsDYiRJBtN.png"></p><p>总元素的大小是元素： <strong>边框</strong> + <strong>内边距</strong> + <strong>内容</strong> 。</p><h2 id="浮动"><a href="#浮动" class="headerlink" title="浮动"></a>浮动</h2><p>浮动常用于布局，使用 <strong>float属性：</strong> 元素可以左浮动右浮动这样可以打破元素原本只能上下排列的形式，且元素于元素之间没有间隙，是紧挨着的。</p><p>其中子元素应在父元素范围内排列，否则容易导致下一个父元素同级元素被遮盖掉，产生 <strong>坍缩</strong> 。这时可以使用 <strong>overflow属性</strong> ，该属性其设置了元素溢出时所需的行为，使用<strong>伪元素</strong>也可以，当然还有其他办法这里不一一列举。</p><p>元素浮动之后，周围的元素会重新排列，为了避免这种情况，使用 clear 属性。</p><p>clear 属性指定元素两侧不能出现浮动元素。</p><ul><li>left元素左浮动</li><li>right元素右浮动</li><li>none元素不浮动</li><li>inherit元素继承父元素的folat属性值</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;CSS/style.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">       <span class="selector-class">.father</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: aqua;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/* height: 150px; */</span></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* 设置了元素溢出时所需的行为 */</span></span></span><br><span class="line"><span class="language-css">        <span class="comment">/* overflow: hidden; */</span></span></span><br><span class="line"><span class="language-css">       &#125;</span></span><br><span class="line"><span class="language-css">       <span class="comment">/* 将伪元素变成一个块级元素。这样，我们就可以在它上面应用 clear:both */</span></span></span><br><span class="line"><span class="language-css">       <span class="selector-class">.father</span><span class="selector-pseudo">::after</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">content</span>:<span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: table;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">clear</span>:both;</span></span><br><span class="line"><span class="language-css">       &#125;</span></span><br><span class="line"><span class="language-css">       <span class="selector-class">.left-son</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: yellowgreen;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">float</span><span class="selector-pseudo">:left</span></span></span><br><span class="line"><span class="language-css">       &#125;</span></span><br><span class="line"><span class="language-css">       <span class="selector-class">.right-son</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: brown;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">float</span><span class="selector-pseudo">:right</span></span></span><br><span class="line"><span class="language-css">       &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;left-son&quot;</span>&gt;</span>左浮动<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right-son&quot;</span>&gt;</span>右浮动<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/07/26/zlmspY1VFIdo3Zf.png"></p><h2 id="定位"><a href="#定位" class="headerlink" title="定位"></a>定位</h2><p>浮动可以控制元素排列方向但对于准确到某个位置却不好控制，这时我们可以使用定位。</p><p>利用position属性指定一个元素（静态的，相对的，绝对或固定）的定位方法的类型。</p><ul><li><strong>absolue</strong> :  生成绝对定位的元素， <strong>相对于 static 定位以外的第一个父元素进行定位</strong> 。元素的位置通过 “left”, “top”, “right” 以及 “bottom” 属性进行移动。</li><li><strong>fixed</strong> :  生成固定定位的元素， <strong>相对于浏览器窗口进行定位。</strong> 元素的位置通过 “left”, “top”, “right” 以及 “bottom” 属性进行移动。</li><li><strong>relative</strong> :   <strong>生成相对定位的元素，相对于其正常位置进行定位。</strong> 因此，”left:20” 会向元素的 LEFT 位置添加 20 像素。</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;CSS/style.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">       <span class="selector-class">.box1</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">350px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: aqua;</span></span><br><span class="line"><span class="language-css">       &#125;</span></span><br><span class="line"><span class="language-css">       <span class="selector-class">.box-normal</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: purple;</span></span><br><span class="line"><span class="language-css">       &#125;</span></span><br><span class="line"><span class="language-css">       <span class="selector-class">.box-relative</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: pink;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">left</span>: <span class="number">120px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">top</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">       &#125;</span></span><br><span class="line"><span class="language-css">       <span class="selector-class">.box2</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">350px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: yellow;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">       &#125;</span></span><br><span class="line"><span class="language-css">       <span class="selector-class">.box-absolute</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: firebrick;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>:absolute;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">left</span>: <span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">       &#125;</span></span><br><span class="line"><span class="language-css">       <span class="selector-class">.box-fixed</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: <span class="number">250px</span>;</span></span><br><span class="line"><span class="language-css">       &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>相对定位<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box-normal&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box-relative&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box-normal&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>绝对定位<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box-normal&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box-absolute&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box-normal&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>固定定位<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box-fixed&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/07/26/au1WApSyxXiOmP5.png"></p><p>​</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS基础（CSS导入方式、选择器、属性）</title>
      <link href="/archives/2b04faf8.html"/>
      <url>/archives/2b04faf8.html</url>
      
        <content type="html"><![CDATA[<p>​ <strong>层叠样式表</strong> （Cascading Style Sheets，缩写为  <strong>CSS</strong> ）是一种<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/StyleSheet" title="样式表">样式表</a>语言，用来描述 <a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML" title="HTML">HTML</a> 或 <a href="https://developer.mozilla.org/zh-CN/docs/Web/XML/XML_introduction" title="XML">XML</a>（包括如 <a href="https://developer.mozilla.org/zh-CN/docs/Web/SVG" title="SVG">SVG</a>、<a href="https://developer.mozilla.org/zh-CN/docs/Web/MathML" title="MathML">MathML</a> 或 <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/XHTML" title="XHTML">XHTML</a> 之类的 XML 分支语言）文档的呈现方式。CSS 描述了在屏幕、纸质、音频等其他媒体上的元素应该如何被渲染的问题。</p><h2 id="CSS构成"><a href="#CSS构成" class="headerlink" title="CSS构成"></a>CSS构成</h2><p>CSS 主要是由选择器、属性和属性值组成，可有一个或多个组合到一起：</p><p><img src="https://s2.loli.net/2024/07/26/B24QJf3LZyvSlTH.png"></p><p>选择器通常是您需要改变样式的 HTML 元素。</p><p>每条声明由一个属性和一个值组成。</p><p>属性（property）是您希望设置的样式属性（style attribute）。每个属性有一个值。属性和值被冒号分开。</p><h2 id="CSS-注释"><a href="#CSS-注释" class="headerlink" title="CSS 注释"></a>CSS 注释</h2><p>注释是用来解释你的代码，并且可以随意编辑它，浏览器会忽略它。</p><p>CSS注释以 &#x2F;* 开始, 以 *&#x2F; 结束,</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">选择器 &#123;</span><br><span class="line">    属性1: 属性值1;</span><br><span class="line">    属性2: 属性值2;</span><br><span class="line">    /*这是一个注释*/</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="CSS三种导入方式"><a href="#CSS三种导入方式" class="headerlink" title="CSS三种导入方式"></a>CSS三种导入方式</h2><p>插入样式表的方法有三种:</p><ul><li>外部样式表(External style sheet)</li><li>内部样式表(Internal style sheet)</li><li>内联样式(Inline style)</li></ul><p><strong>外部样式表：</strong> 当样式需要应用于很多页面时，外部样式表将是理想的选择。在使用外部样式表的情况下，你可以通过改变一个文件来改变整个站点的外观。每个页面使用 <code>&lt;link&gt;</code> 标签链接到样式表。 <code>&lt;link&gt;</code> 标签在（文档的）头部</p><p><strong>内部样式表：</strong> 当单个文档需要特殊的样式时，就应该使用内部样式表。你可以使用 <code>&lt;style&gt;</code> 标签在文档头部定义内部样式表</p><p><strong>内联样式：</strong> 你需要在相关的标签内使用样式（style）属性。Style 属性可以包含任何 CSS 属性。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;CSS/style.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h2</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: green;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>外部样式表<span class="tag">&lt;/<span class="name">h1</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>内部样式表<span class="tag">&lt;/<span class="name">h2</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span> <span class="attr">style</span>=<span class="string">&quot;color: blue;&quot;</span>&gt;</span>内联样式<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/07/26/s9cilb26THgYFmZ.png"></p><p>不同的导入方式（内联样式、内部样式表、外部样式表、浏览器默认样式）具有不同的优先级，优先级高的会覆盖掉优先级低的样式：<strong>内联样式&gt; 内部样式&gt;外部样式&gt; 浏览器默认样式</strong></p><h2 id="CSS选择器"><a href="#CSS选择器" class="headerlink" title="CSS选择器"></a>CSS选择器</h2><p>上文中我们是通过标签进行选择那一部分样式进行变化，这样的好处是设置一次即可所有相同标签都发生变化，如果我们想要某个独立的内容发生变化这就需要使用其他的选择器进行区分。</p><p>CSS 选择器是 CSS 规则的第一部分。它是元素和其他部分组合起来告诉浏览器哪个 HTML 元素应当是被选为应用规则中的 CSS 属性值的方式。选择器所选择的元素，叫做“选择器的对象”。</p><h3 id="元素、类、ID、全局选择器"><a href="#元素、类、ID、全局选择器" class="headerlink" title="元素、类、ID、全局选择器"></a>元素、类、ID、全局选择器</h3><p><strong>元素选择器</strong> ：按对应的标签&#x2F;元素选择</p><p><strong>类选择器：</strong> 类选择器以一个句点（<code>.</code>）开头，会选择文档中应用了这个类的所有物件。</p><p><strong>ID 选择器：</strong> ID 选择器开头为<code>#</code>而非句点，不过基本上和类选择器是同种用法。</p><p><strong>全局选择器：</strong> 是由一个星号（<code>*</code>）代指的，它选中了文档中的所有内容</p><p>类和ID选择器是最常用的。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;CSS/style.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/*元素选择器*/</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">p</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: aqua;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/*类选择器*/</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.good</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/*ID选择器*/</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#ID</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">35px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/*全局选择器*/</span></span></span><br><span class="line"><span class="language-css">        *&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: <span class="string">&#x27;KaiTi&#x27;</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>元素选择器<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;good&quot;</span>&gt;</span>类选择器<span class="tag">&lt;/<span class="name">p</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">P</span> <span class="attr">id</span>=<span class="string">&quot;ID&quot;</span>&gt;</span>ID选择器<span class="tag">&lt;/<span class="name">P</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/07/26/4nmgsxTqAVBrkC6.png"></p><h3 id="关系选择器"><a href="#关系选择器" class="headerlink" title="关系选择器"></a>关系选择器</h3><p><strong>子代关系选择器：</strong> 子代关系选择器是个大于号（<code>&gt;</code>），只会在选择器选中直接子元素的时候匹配。继承关系上更远的后代则不会匹配。</p><p><strong>后代选择器：</strong> 后代选择器——典型用单个空格（” “）字符——组合两个选择器，比如，第二个选择器匹配的元素被选择，如果他们有一个祖先（父亲，父亲的父亲，父亲的父亲的父亲，等等）元素匹配第一个选择器。选择器利用后代组合符被称作后代选择器。</p><p><strong>邻接兄弟选择器：</strong> 邻接兄弟选择器（<code>+</code>）用来选中恰好处于另一个在继承关系上同级的元素旁边的物件。</p><p><strong>通用兄弟选择器</strong>如果你想选中一个元素的兄弟元素，即使它们不直接相邻，你还是可以使用通用兄弟关系选择器（<code>~</code>）。</p><p><strong>伪类选择器：</strong> 伪类是选择器的一种，它用于选择处于特定状态的元素，比如当它们是这一类型的第一个元素时，或者是当鼠标指针悬浮在元素上面的时候。它们表现得会像是你向你的文档的某个部分应用了一个类一样，帮你在你的标记文本中减少多余的类，让你的代码更灵活、更易于维护。这些条件可以包括鼠标悬停（<code>:hover</code> ）、链接状态（<code>:active</code>）、第一个子元素（<code>:first-child</code>）等</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;CSS/style.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/*子代选择器*/</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.father</span>&gt;<span class="selector-class">.son</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: yellowgreen;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/*后代选择器*/</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.father</span> <span class="selector-tag">p</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: large;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/*兄弟选择器*/</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h3</span>+<span class="selector-tag">p</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: green;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="comment">/*伪类选择器</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        鼠标悬停时显示紫色背景</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        */</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#element</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: blueviolet;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span>&gt;</span>子元素选择器<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;grandson&quot;</span>&gt;</span>后代选择器<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是一个p标签<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>兄弟选择器<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是一个p标签<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span> <span class="attr">id</span>=<span class="string">&quot;element&quot;</span>&gt;</span>伪类选择器<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/07/26/jbQK6OqldoupBFV.png"></p><h2 id="CSS属性"><a href="#CSS属性" class="headerlink" title="CSS属性"></a>CSS属性</h2><p>属性已经使用过很多次了，如字体大小、颜色、背景等。</p><p>属性有很多很多，大多属性类似，需要的时候查手册，复合属性可以实现不同属性的效果。</p><p><a href="https://www.runoob.com/cssref/css-reference.html" title="CSS 参考手册 | 菜鸟教程 (runoob.com)">CSS 参考手册 | 菜鸟教程 (runoob.com)</a></p><p>这里整理一些属性</p><table><thead><tr><th><a href="https://www.runoob.com/cssref/css3-pr-background.html" title="background">background</a></th><th>复合属性。设置对象的背景特性。</th></tr></thead><tbody><tr><td><a href="https://www.runoob.com/cssref/pr-border.html" title="border">border</a></td><td>复合属性。设置对象边框的特性。</td></tr><tr><td><a href="https://www.runoob.com/cssref/pr-dim-height.html" title="height">height</a></td><td>设置元素的高度</td></tr><tr><td><a href="https://www.runoob.com/cssref/pr-dim-width.html" title="width">width</a></td><td>设置元素的宽度</td></tr><tr><td><a href="https://www.runoob.com/cssref/pr-font-font.html" title="font">font</a></td><td>复合属性。在一个声明中设置所有字体属性</td></tr><tr><td><a href="https://www.runoob.com/cssref/pr-text-color.html" title="color">color</a></td><td>设置文本的颜色</td></tr><tr><td><a href="https://www.runoob.com/cssref/pr-class-display.html" title="display">display</a></td><td>规定元素应该生成的框的类型</td></tr></tbody></table><p>display属性可以将元素设置为内联元素、块级元素、不显示等效果</p><ul><li>none不显示</li><li>inline内联元素</li><li>block块级元素</li><li>inline-block行内块元素</li></ul><p>​</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML基础（块级元素、内联元素、表单元素）</title>
      <link href="/archives/b9ed9fcb.html"/>
      <url>/archives/b9ed9fcb.html</url>
      
        <content type="html"><![CDATA[<h2 id="块级元素和内联元素"><a href="#块级元素和内联元素" class="headerlink" title="块级元素和内联元素"></a>块级元素和内联元素</h2><p>大多数 HTML 元素被定义为<strong>块级元素</strong>或 <strong>内联元素</strong> 。</p><p><strong>块级元素</strong> ：块级元素在浏览器显示时，通常会以新行来开始（和结束）。也就是每个块级元素会独占一行以上。可以包含其他块级元素和行内元素。例如段落、标题、列表、表格等。</p><p><strong>内联元素：</strong> 内联元素在显示时通常不会以新行开始。也就是内联元素不会独占一行，相邻的内联元素会排在同一行。其宽度随内容的变化而变化。 它们可以在文本中插入小的元素，行内元素不能包含块级元素，但可以包含其他行内元素。例如超链接、强调文本等。</p><p>比如</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>这是一个块级元素，它会独占一行。<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>这也是一个块级元素，通常用于段落。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://blog.csdn.net/qq_42683732?spm=1000.2115.3001.5343&quot;</span>&gt;</span>这是一个内联元素，他与其他内联元素共用一行。<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>这是第二个内联元素<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/07/26/6x7wkVXrG4nqHL8.png"></p><p>接下来详细介绍两个常用的块级元素和内联元素。</p><h3 id="元素"><a href="#元素" class="headerlink" title="&lt;div&gt; 元素**"></a><code>&lt;div&gt;</code> 元素**</h3><p><code>&lt;div&gt;</code> 元素是块级元素，它是可用于组合其他 HTML 元素的容器。</p><p><code>&lt;div&gt;</code> 元素没有特定的含义。除此之外，由于它属于块级元素，浏览器会在其前后显示折行。</p><p>如果与 CSS 一同使用，<code>&lt;div&gt;</code> 元素可用于对大的内容块 <strong>设置样式属性</strong> 。<code>&lt;div&gt;</code> 元素的另一个常见的用途是 <strong>页面文档布局</strong> 。</p><h3 id="元素-1"><a href="#元素-1" class="headerlink" title="&lt;span&gt; 元素**"></a><code>&lt;span&gt;</code> 元素**</h3><p><code>&lt;span&gt;</code>元素是内联元素，可用作文本的容器。</p><p><code>&lt;span&gt;</code> 元素也没有特定的含义。</p><p>当与 CSS 一同使用时，<code>&lt;span&gt;</code> 元素可用于为部分文本设置样式属性。</p><p>下面是一个普通网页结构的样式</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>链接 1<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>链接 2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>链接 3<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>链接 4<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>文章标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>文章内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>文章内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>文章内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>文章内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>span标签1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>span标签1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>span标签1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>span标签1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>链接点击这里<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/07/26/sC95MgIxWlDUaN1.png"></p><p>介绍两个标签，<strong>换行</strong>和<strong>分割符</strong>上图用到了分割符</p><p><code>&lt;br&gt;</code> 标签插入单行换行符。</p><p><code>&lt;br&gt;</code> 标签对于写地址或诗歌非常有用。</p><p><code>&lt;br&gt;</code> 标签是空标签（意味着它没有结束标签，因此这是错误的：<code>&lt;br&gt;&lt;/br&gt;</code>）。在 XHTML 中，把结束标签放在开始标签中，也就是 <code>&lt;br /&gt;</code>。</p><p>请注意，<code>&lt;br&gt;</code> 标签只是简单地开始新的一行，而当浏览器遇到 <code>&lt;p&gt;</code> 标签时，通常会在相邻的段落之间插入一些垂直的间距。</p><p>注意：请使用 <code>&lt;br&gt;</code> 标签来插入换行符，而不是用它来增加段落之间的空白。</p><p><code>&lt;hr&gt;</code> 标签定义 HTML 页面中的主题分隔（例如，话题的转变）。</p><p><code>&lt;hr&gt;</code> 元素通常显示为水平线，用于在 HTML 页面中分隔内容，或定义内容上的变化。</p><h2 id="表单-元素"><a href="#表单-元素" class="headerlink" title="表单 元素"></a>表单<form> 元素</h2><p>HTML 表单用于收集用户的输入信息。</p><p>HTML 表单表示文档中的一个区域，此区域包含交互控件，将用户收集到的信息发送到 Web 服务器。</p><p>HTML 表单通常包含各种输入字段、复选框、单选按钮、下拉列表等元素。</p><p>以下是一个简单的HTML表单的例子:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;#&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--文本输入框--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;name&quot;</span>&gt;</span>用户名：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入用户名&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;pwd&quot;</span>&gt;</span>密码：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入密码&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--单选按钮--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>性别: <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span>&gt;</span>男</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span>&gt;</span>女</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span>&gt;</span>其他</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--多选按钮--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>爱好：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>,<span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span>唱</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>,<span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span>跳</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>,<span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span>rap</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>,<span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span>&gt;</span>篮球</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 下拉列表 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;country&quot;</span>&gt;</span>国家:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;country&quot;</span> <span class="attr">name</span>=<span class="string">&quot;country&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;cn&quot;</span>&gt;</span>CN<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;usa&quot;</span>&gt;</span>USA<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;uk&quot;</span>&gt;</span>UK<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--提交按钮--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/07/26/sGhB5OtxUT7zoEv.png"></p><h3 id="常用的表单元素"><a href="#常用的表单元素" class="headerlink" title="常用的表单元素"></a>常用的表单元素</h3><ul><li><code>&lt;form&gt;</code> 元素用于创建表单，<code>action</code> 属性定义了表单数据提交的目标 URL，<code>method</code> 属性定义了提交数据的 HTTP 方法（这里使用的是 “post”）。</li><li><code>&lt;input&gt;</code> 元素是最常用的表单元素之一，它可以创建文本输入框、密码框、单选按钮、复选框等。<code>type</code> 属性定义了输入框的类型，<code>id</code> 属性用于关联 <code>&lt;label&gt;</code> 元素，<code>name</code> 属性用于标识表单字段。</li><li><code>&lt;select&gt;</code> 元素用于创建下拉列表，而 <code>&lt;option&gt;</code> 元素用于定义下拉列表中的选项。</li></ul><h3 id="表单提交方式的区别"><a href="#表单提交方式的区别" class="headerlink" title="表单提交方式的区别"></a><strong>表单提交方式的区别</strong></h3><ul><li>post：指的是 HTTP POST 方法，表单数据会包含在表单体内然后发送给服务器，用于提交敏感数据，如用户名与密码等。</li><li>get：默认值，指的是 HTTP GET 方法，表单数据会附加在 action 属性的 URL 中，并以 ?作为分隔符，一般用于不敏感信息，如分页等。例如：<a href="https://www.runoob.com/?page=1%EF%BC%8C%E8%BF%99%E9%87%8C%E7%9A%84">https://www.runoob.com/?page=1，这里的</a> page&#x3D;1 就是 get 方法提交的数据。</li></ul><h3 id="表单常用属性与元素的输入类型。"><a href="#表单常用属性与元素的输入类型。" class="headerlink" title="表单常用属性与&lt;input&gt;元素的输入类型。**"></a>表单常用属性与<code>&lt;input&gt;</code>元素的输入类型。**</h3><p>id、name就不过多介绍，type下文有对应的类型，根据对应的类型还可添加其他属性</p><p><code>action</code> 属性定义了表单数据提交的目标 URL</p><p><code>for</code> 属性规定标签绑定到哪个表单元素。</p><p><em>method 属性</em>规定在提交表单时所用的 HTTP 方法（<em>GET</em> 或  <em>POST</em> ）</p><p><strong><code>&lt;input&gt;</code> 元素的输入类型。</strong></p><ul><li><code>&lt;input type=&quot;text&quot;&gt;</code> 定义供<em>文本输入</em>的单行输入字段</li><li><code>&lt;input type=&quot;password&quot;&gt;</code>定义<em>密码字段</em></li><li><code>&lt;input type=&quot;submit&quot;&gt;</code>定义<em>提交</em>表单数据至<em>表单处理程序</em>的按钮。</li><li><code>&lt;input type=&quot;radio&quot;&gt;</code>定义单选按钮。</li><li><code>&lt;input type=&quot;checkbox&quot;&gt;</code> 定义复选框。</li><li><code>&lt;input type=&quot;button&quot;&gt;</code> 定义 <em>按钮</em> 。</li><li><code>&lt;input type=&quot;number&quot;&gt;</code> 用于应该包含数字值的输入字段。</li><li><code>&lt;input type=&quot;date&quot;&gt;</code> 用于应该包含日期的输入字段。</li><li><code>&lt;input type=&quot;color&quot;&gt;</code> 用于应该包含颜色的输入字段。</li><li><code>&lt;input type=&quot;range&quot;&gt;</code> 用于应该包含一定范围内的值的输入字段。</li><li><code>&lt;input type=&quot;month&quot;&gt;</code> 允许用户选择月份和年份。</li><li><code>&lt;input type=&quot;week&quot;&gt;</code> 允许用户选择周和年。</li><li><code>&lt;input type=&quot;time&quot;&gt;</code> 允许用户选择时间（无时区）。</li><li><code>&lt;input type=&quot;datetime&quot;&gt;</code> 允许用户选择日期和时间（有时区）。</li><li><code>&lt;input type=&quot;datetime-local&quot;&gt;</code> 允许用户选择日期和时间（无时区）。</li><li><code>&lt;input type=&quot;email&quot;&gt;</code> 用于应该包含电子邮件地址的输入字段。</li><li><code>&lt;input type=&quot;search&quot;&gt;</code> 用于搜索字段（搜索字段的表现类似常规文本字段）。</li><li><code>&lt;input type=&quot;tel&quot;&gt;</code> 用于应该包含电话号码的输入字段。</li><li><code>&lt;input type=&quot;url&quot;&gt;</code> 用于应该包含 URL 地址的输入字段。</li></ul><p>​</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VSCode（安装）</title>
      <link href="/archives/527e85aa.html"/>
      <url>/archives/527e85aa.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>VSCode（全称：Visual Studio Code）是一款由微软开发且跨平台的免费源代码编辑器。该软件支持语法高亮、代码自动补全（又称 IntelliSense）、代码重构、查看定义功能，并且内置了命令行工具和 Git 版本控制系统。用户可以更改主题和键盘快捷方式实现个性化设置，也可以通过内置的扩展程序商店安装扩展以拓展软件功能。VS Code 使用 Monaco Editor 作为其底层的代码编辑器。适用于 Windows、macOS 和 Linux。它内置了对 JavaScript、TypeScript 和 Node.js 的支持，并为其他语言和运行时（如 C++、C#、Java、Python、PHP、Go、.NET）提供了丰富的扩展生态系统。</p><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>打开vscode官网<a href="https://code.visualstudio.com/" title="Visual Studio Code - Code Editing. Redefined">Visual Studio Code - Code Editing. Redefined</a>或官网下载页<a href="https://code.visualstudio.com/Download" title="Download Visual Studio Code - Mac, Linux, Windows">Download Visual Studio Code - Mac, Linux, Windows</a></p><p>选择对应操作系统下载</p><p><img src="https://s2.loli.net/2024/07/26/Z1KCfJgtnNcFkIx.png"></p><p><img src="https://s2.loli.net/2024/07/26/CYSnZtLizPvTBKo.png"></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>双击打开下载文件</p><p>点击我同意此协议，之后点击下一步</p><p><img src="https://s2.loli.net/2024/07/26/sFcdDtxuLTfGglq.png"></p><p>选择安装目录，点击下一步</p><p><img src="https://s2.loli.net/2024/07/26/L6mNikyon3jBhMp.png"></p><p>下一步</p><p><img src="https://s2.loli.net/2024/07/26/4CeaPB1c8DyuKYk.png"></p><p>全选，下一步</p><p><img src="https://s2.loli.net/2024/07/26/2RIegj5HboUCnLM.png"></p><p>点击安装</p><p><img src="https://s2.loli.net/2024/07/26/QkvjewnWIZ4d3iO.png"></p><p>等待安装完成</p><p><img src="https://s2.loli.net/2024/07/26/Hr5opRkuinCXEIK.png"></p><p><img src="https://s2.loli.net/2024/07/26/21t6VZLRk85hFix.png"></p><p>完成运行</p><p>刚进去是英文界面，可以通过插件汉化，同时vscode也是通过强大的插件对开发进行适配</p><p>在扩展按钮里搜索<strong>Chinese <strong>选择第一个即可，选择</strong>Install</strong>进行安装。</p><p><img src="https://s2.loli.net/2024/07/26/uAxw6W8PhLzZ24t.png"></p><p>安装完成后重启vscode</p><p><img src="https://s2.loli.net/2024/07/26/M9bDiAxgJE7XNPq.png"></p><p>最后自由选择自己喜欢的界面</p><p><img src="https://s2.loli.net/2024/07/26/xf2pRcXIjolzBrG.png"></p><p>vscode是一款编辑器，不是编译器，如果需要编译代码只需要安装对应的编译器和插件即可。</p><p>​</p>]]></content>
      
      
      <categories>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件 </tag>
            
            <tag> VSCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTML基础（文本内容、列表、表格、图像、链接、属性）</title>
      <link href="/archives/a1974a58.html"/>
      <url>/archives/a1974a58.html</url>
      
        <content type="html"><![CDATA[<p>​ <strong>HTML</strong> （超文本标记语言——HyperText Markup Language）是构成 Web 世界的一砖一瓦。它定义了网页内容的含义和结构。除 HTML 以外的其他技术则通常用来描述一个网页的表现与展示效果（如 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS" title="CSS">CSS</a>），或功能与行为（如 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" title="JavaScript">JavaScript</a>）。</p><p>什么是HTML?</p><ul><li>HTML 代表超文本标记语言</li><li>HTML 是创建网页的标准标记语言</li><li>HTML 描述网页的结构</li><li>HTML 由一系列元素组成</li><li>HTML 元素告诉浏览器如何显示内容</li><li>HTML 元素标记内容片段，如 “这是一个标题”, “this is a paragraph”, “this is a link”等。</li></ul><p><strong>使用任何一款编辑器，甚至新建一个文本文档都可以，将文档后缀名命名为html即可得到一个网页文件。</strong></p><h2 id="第一个网页"><a href="#第一个网页" class="headerlink" title="第一个网页"></a>第一个网页</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://blog.csdn.net/qq_42683732?type=blog&quot;</span>&gt;</span>这是一个链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/07/25/JoZ28fcnizq17hb.png"></p><p>每个尖括号里的内容称为标签，有像&lt;h1&gt;标题&lt;&#x2F;h1&gt;这样要用&lt;h1&gt;将内容包裹起来的 <strong>双标签</strong> ，也有&lt;meta charset&#x3D;”utf-8”&gt;这样单独的<strong>单标签</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt; 声明为 HTML5 文档</span><br><span class="line">&lt;html&gt; 元素是 HTML 页面的根元素</span><br><span class="line">&lt;head&gt; 元素包含了文档的元（meta）数据，如 &lt;meta charset=&quot;utf-8&quot;&gt; 定义网页编码格式为 utf-8。</span><br><span class="line">&lt;title&gt; 定义网页标题，会显示在浏览器的标签页上。</span><br><span class="line">&lt;body&gt; 元素包含了可见的页面内容</span><br><span class="line">&lt;h1&gt; 元素定义一个大标题</span><br><span class="line">&lt;p&gt; 元素定义一个段落</span><br><span class="line">&lt;a&gt;标签定义超链接，用于从一张页面链接到另一张页面。元素最重要的属性是 href 属性，它指示链接的目的地。</span><br></pre></td></tr></table></figure><p>接下来学习一下HTML里常用的几个标签</p><h2 id="文本内容"><a href="#文本内容" class="headerlink" title="文本内容"></a>文本内容</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">HTML 标题（Heading）是通过&lt;h1&gt; - &lt;h6&gt; 标签来定义的。</span><br><span class="line"></span><br><span class="line">HTML 段落是通过标签 &lt;p&gt; 来定义的。</span><br><span class="line"></span><br><span class="line">&lt;strong&gt;、&lt;del&gt; 和 &lt;em&gt; 标签可以用于强调文本。</span><br><span class="line"></span><br><span class="line">&lt;strong&gt;定义重要的文本。加粗文本</span><br><span class="line"></span><br><span class="line">&lt;del&gt;标签定义文档中已删除的文本。</span><br><span class="line"></span><br><span class="line">&lt;em&gt;标签是一个短语标签，用来呈现为被强调的文本。标签内的内容通常以斜体显示。</span><br><span class="line"></span><br><span class="line">&lt;i&gt;定义与文本中其余部分不同的部分，并把这部分文本呈现为斜体文本。</span><br><span class="line"></span><br><span class="line">&lt;u&gt;  为文本加下划线</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>这是一个一级标题<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>这是一个二级标题<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>这是一个三级标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>这是一个四级标题<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>这是一个五级标题<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h6</span>&gt;</span>这是一个六级标题<span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>这是一个段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>加粗文本<span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>这个也是加粗<span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">i</span>&gt;</span>斜体<span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;<span class="name">u</span>&gt;</span>下划线<span class="tag">&lt;/<span class="name">u</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">del</span>&gt;</span>这是一个被删除的文本<span class="tag">&lt;/<span class="name">del</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">em</span>&gt;</span>被强调的文本<span class="tag">&lt;/<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/07/25/dFqp1gLhRvuCMf5.png"></p><p>这里只列举了其中几个标签，不能涵盖全部。</p><p>提示一句，使用css也可以到到同样的效果。</p><h2 id="列表与表格"><a href="#列表与表格" class="headerlink" title="列表与表格"></a>列表与表格</h2><p><strong>列表</strong>分无序列表、有序列表和自定义列表。使用 <code>&lt;ul&gt;</code> 和 <code>&lt;li&gt;</code> 标签创建无序列表，使用 <code>&lt;ol&gt;</code> 和 <code>&lt;li&gt;</code> 标签创建有序列表。使用 <code>&lt;dl&gt;</code> 和 <code>&lt;dt&gt;</code> 标签创建自定义列表</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>无序列表<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>无序列表<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>有序列表<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>有序列表<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dt</span>&gt;</span>自定义1<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span>&gt;</span>哈哈哈哈<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dt</span>&gt;</span>这是自定义的<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span>&gt;</span>哇哇哇哇<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/07/25/c8Kp9G4x5meR1rv.png"></p><p>列表项内部可以使用段落、换行符、图片、链接以及其他列表等等。</p><p>** 表格** ：使用 <code>&lt;table&gt;</code>、<code>&lt;tr&gt;</code>、<code>&lt;td&gt;</code>、<code>&lt;th&gt;</code> 等标签创建表格，<code>&lt;table&gt;</code> 是表格标签的根元素，然后是 <code>&lt;tr&gt;</code> 表格的行标签，在 <code>&lt;tr&gt;</code> 内部是 <code>&lt;td&gt;</code> 与 <code>&lt;th&gt;</code></p><ul><li><strong>tr</strong> ：tr 是 table row 的缩写，表示表格的一行。</li><li><strong>td</strong> ：td 是 table data 的缩写，表示表格的数据单元格。每行里面的内容</li><li><strong>th</strong> ：th 是 table header的缩写，表示表格的表头单元格。也就是列标题</li></ul><p>使用边框属性来显示一个带有边框的表格，如果不要边框这可以将border&#x3D;”1”删去。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>列标题A<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>列标题B<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>列标题C<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>第一行第一列<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>第一行第二列<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>第一行第三列<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>第二行第一列<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>第二行第二列<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>第二行第三列<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2024/07/25/SLBh3cPWzkCNKJf.png"></p><h2 id="图像、链接和注释"><a href="#图像、链接和注释" class="headerlink" title="图像、链接和注释"></a>图像、链接和注释</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;图片路径&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;图片描述&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://blog.csdn.net/qq_42683732?type=blog&quot;</span>&gt;</span>这是一个链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 注释内容 --&gt;</span></span><br></pre></td></tr></table></figure><h3 id="图像"><a href="#图像" class="headerlink" title="图像"></a><strong>图像</strong></h3><p>图像还可以设置宽（width）高（height）属性。</p><p>图片路径一般用相对路径，因为网页一般上传置服务器，服务器路径与本地路径一般不同</p><p><strong>绝对路径</strong>和<strong>相对路径</strong></p><p><strong>绝对路径</strong>是指从根目录开始</p><p>C:\Users\eh\AppData\Local\Programs\Microsoft VS Code</p><p>这样是从c盘开始的</p><p><strong>相对路径</strong>是从当前目录开始的如.\img\index.png</p><p>不同操作系统使用的斜杠不同Linux系统是&#x2F;，window系统是\</p><p><strong>..&#x2F;</strong> 表示上一级目录</p><p>alt&#x3D;”图片描述”,当图片不显示时显示图片描述，这里插一句，盲人无法查看图片，但盲人可以通过无障碍软件将图片的信息读出来，所以应当合理书写alt属性，不要与内容不符也不要过于冗长。</p><h3 id="链接"><a href="#链接" class="headerlink" title="链接"></a><strong>链接</strong></h3><p><code>href</code> 属性规定链接指向的页面的 URL。</p><p><code>href</code> 属性的值可以是任何有效文档的相对或绝对 URL，包括片段标识符和 JavaScript 代码段。如果用户选择了 &lt;a&gt; 标签中的内容，那么浏览器会尝试检索并显示 <code>href</code> 属性指定的 URL 所表示的文档，或者执行 JavaScript 表达式、方法和函数的列表。</p><p>如果 <code>href</code> 属性不存在，则 &lt;a&gt; 标签将不是超链接。</p><p>提示：您可以使用 href&#x3D;”#top” 或 href&#x3D;”#” 链接到当前页面的顶部！</p><p>链接还可以放到图片里，这样可以点击图片链接。</p><h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a><strong>注释</strong></h3><p><code>&lt;!-- &lt;p&gt;这是单行注释&lt;/p&gt; --&gt;</code><br><code>&lt;!--</code><br><code>这是多行注释</code><br><code>这是多行注释</code><br><code>这是多行注释</code><br><code>--&gt;</code></p><h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><p>在 HTML 中，每个元素都可以有一个或多个属性，用于描述元素的特征和行为。</p><ul><li>HTML 元素可以设置<strong>属性</strong></li><li>属性可以在元素中添加<strong>附加信息</strong></li><li>属性一般描述于<strong>开始标签</strong></li><li>属性总是以名称&#x2F;值对的形式出现， <strong>比如：name&#x3D;”value”</strong> 。</li></ul><p>上文的src、href、border等都是属性。</p><p>这里介绍几个常用的属性</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">&quot;note&quot;</span>&gt;</span>这是一个带有 note 类属性的 p 标签<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;myHeader&quot;</span>&gt;</span>My Header<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;color: red; font-size: 20px;&quot;</span>&gt;</span>这是一段红色的文字<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">abbr</span> <span class="attr">title</span>=<span class="string">&quot;世界卫生组织&quot;</span>&gt;</span>WHO<span class="tag">&lt;/<span class="name">abbr</span>&gt;</span> 成立于 1948。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>class</code> 属性：<code>class</code> 属性是用于向元素添加一个或多个类名，以便通过 CSS 样式表定义样式。此外，类名还可以用来实现 JavaScript 的交互效果。用空格分隔类名。</p><p><code>id</code> 属性：<code>id</code> 属性是用于将元素标识为<strong>唯一</strong>的标识符。它使得我们可以通过 JavaScript 或 CSS 来定位和操作该元素。</p><p><code>style</code> 属性：<code>style</code> 属性是用于将CSS样式规则直接应用于元素。它可以用于控制元素的颜色、字体、大小和布局等。一个或多个由分号分隔的 CSS 属性和值。style 属性将覆盖任何全局的样式设定，例如在 <style> 标签或在外部样式表中规定的样式。</p><p>title 属性规定关于元素的额外信息。这些信息通常会在鼠标移到元素上时显示一段工具提示文本</p><p>属性名称不区分大小写，属性值对大小写敏感。</p><p>​</p>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于单片机万年历设计（C语言+51单片机）</title>
      <link href="/archives/45b6aa0.html"/>
      <url>/archives/45b6aa0.html</url>
      
        <content type="html"><![CDATA[<p>​#  设计任务</p><p>结合所学单片机原理及应用知识，设计并制作完成基于单片机的万年历设 计，实现时分秒，年月日。</p><h1 id="设计要求"><a href="#设计要求" class="headerlink" title="设计要求"></a>设计要求</h1><p>①要求八位数码管输出显示时分秒；</p><p>②八位数码管输出显示年月日；</p><p>③可以通过按键加减调节时分秒年月日；</p><p>④扩展功能实现闹铃设置。</p><h1 id="原理图"><a href="#原理图" class="headerlink" title="原理图"></a>原理图</h1><p><img src="https://s2.loli.net/2024/07/25/oGrHqtFgNiCPOc9.png"></p><h1 id="C代码"><a href="#C代码" class="headerlink" title="C代码"></a>C代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REGX52.H&gt;</span></span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> flag=<span class="number">0</span>;<span class="comment">//闪烁标志位</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> year=<span class="number">24</span>;<span class="comment">//年</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> month=<span class="number">3</span>;<span class="comment">//月</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> day=<span class="number">31</span>;<span class="comment">//日</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> hour=<span class="number">23</span>;<span class="comment">//时</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> minute=<span class="number">59</span>;<span class="comment">//分</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> second=<span class="number">55</span>;<span class="comment">//秒</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> hour2=<span class="number">0</span>,minute2=<span class="number">0</span>, second2=<span class="number">0</span>;<span class="comment">//闹钟数据</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> tab[]=&#123;<span class="number">0x3f</span>,<span class="number">0x06</span>,<span class="number">0x5b</span>,<span class="number">0x4f</span>,<span class="number">0x66</span>,<span class="number">0x6d</span>,<span class="number">0x7d</span>,<span class="number">0x07</span>,<span class="number">0x7f</span>,<span class="number">0x6f</span>,<span class="number">0x40</span>&#125;;<span class="comment">//段码表</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">delay_ms</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> ms)</span><span class="comment">//ms延时函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=ms;i&gt;<span class="number">0</span>;i--)</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">110</span>;j&gt;<span class="number">0</span>;j--);</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Timer_Init</span><span class="params">()</span><span class="comment">//定时器初始化</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">TMOD=<span class="number">0x01</span>; <span class="comment">//设置为定时器0工作模式1</span></span><br><span class="line">TL0=(<span class="number">65536</span><span class="number">-50000</span>)%<span class="number">256</span>;<span class="comment">//低八位，50ms</span></span><br><span class="line">TH0=(<span class="number">65536</span><span class="number">-50000</span>)/<span class="number">256</span>;<span class="comment">//高八位</span></span><br><span class="line">TR0 = <span class="number">1</span>; <span class="comment">//定时器0开始计时</span></span><br><span class="line">EA=<span class="number">1</span>;<span class="comment">//开启总中断</span></span><br><span class="line">ET0=<span class="number">1</span>;<span class="comment">//开启定时器0中断</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//Num1  位选  Num2段码 </span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Nixie</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> Num1,<span class="type">unsigned</span> <span class="type">char</span> Num2)</span><span class="comment">//用于简化数码管操作</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">P2=Num1;<span class="comment">//位选</span></span><br><span class="line">P0=tab[Num2];<span class="comment">//段码</span></span><br><span class="line"><span class="built_in">delay_ms</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Num1   第一位数，Num2   第二位数，Num3   第三位数</span></span><br><span class="line"><span class="comment">//blink  等于0时不闪烁，等于1时第一位闪烁，以此类推</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">display</span><span class="params">(<span class="type">unsigned</span> <span class="type">char</span> Num1,<span class="type">unsigned</span> <span class="type">char</span> Num2,<span class="type">unsigned</span> <span class="type">char</span> Num3,<span class="type">unsigned</span> <span class="type">char</span> blink)</span><span class="comment">//数码管显示闪烁</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(blink==<span class="number">0</span>)<span class="comment">//不闪烁</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xfe</span>,Num1/<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xfd</span>,Num1%<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xfb</span>,<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xf7</span>,Num2/<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xef</span>,Num2%<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xdf</span>,<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xbf</span>,Num3/<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0x7f</span>,Num3%<span class="number">10</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(blink==<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(flag)<span class="comment">//闪烁标志位</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xfe</span>,Num1/<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xfd</span>,Num1%<span class="number">10</span>);</span><br><span class="line">&#125;<span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xff</span>,Num1/<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xff</span>,Num1%<span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xfb</span>,<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xf7</span>,Num2/<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xef</span>,Num2%<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xdf</span>,<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xbf</span>,Num3/<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0x7f</span>,Num3%<span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(blink==<span class="number">2</span>)<span class="comment">//第二位闪烁</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xfe</span>,Num1/<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xfd</span>,Num1%<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xfb</span>,<span class="number">10</span>);</span><br><span class="line"><span class="keyword">if</span>(flag)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xf7</span>,Num2/<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xef</span>,Num2%<span class="number">10</span>);</span><br><span class="line">&#125;<span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xff</span>,Num2/<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xff</span>,Num2%<span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xdf</span>,<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xbf</span>,Num3/<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0x7f</span>,Num3%<span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(blink==<span class="number">3</span>)<span class="comment">//第三位闪烁</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xfe</span>,Num1/<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xfd</span>,Num1%<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xfb</span>,<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xf7</span>,Num2/<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xef</span>,Num2%<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xdf</span>,<span class="number">10</span>);</span><br><span class="line"><span class="keyword">if</span>(flag)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xbf</span>,Num3/<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0x7f</span>,Num3%<span class="number">10</span>);</span><br><span class="line">&#125;<span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xff</span>,Num3/<span class="number">10</span>);</span><br><span class="line"><span class="built_in">Nixie</span>(<span class="number">0xff</span>,Num3%<span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">unsigned</span> <span class="type">char</span> <span class="title">key</span><span class="params">()</span><span class="comment">//获取按键键码</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> KeyNumber=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span>(P3_0==<span class="number">0</span>)&#123;<span class="built_in">delay_ms</span>(<span class="number">10</span>);<span class="keyword">while</span>(P3_0==<span class="number">0</span>);<span class="built_in">delay_ms</span>(<span class="number">10</span>);KeyNumber=<span class="number">1</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(P3_1==<span class="number">0</span>)&#123;<span class="built_in">delay_ms</span>(<span class="number">10</span>);<span class="keyword">while</span>(P3_1==<span class="number">0</span>);<span class="built_in">delay_ms</span>(<span class="number">10</span>);KeyNumber=<span class="number">2</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(P3_2==<span class="number">0</span>)&#123;<span class="built_in">delay_ms</span>(<span class="number">10</span>);<span class="keyword">while</span>(P3_2==<span class="number">0</span>);<span class="built_in">delay_ms</span>(<span class="number">10</span>);KeyNumber=<span class="number">3</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(P3_3==<span class="number">0</span>)&#123;<span class="built_in">delay_ms</span>(<span class="number">10</span>);<span class="keyword">while</span>(P3_3==<span class="number">0</span>);<span class="built_in">delay_ms</span>(<span class="number">10</span>);KeyNumber=<span class="number">4</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(P3_4==<span class="number">0</span>)&#123;<span class="built_in">delay_ms</span>(<span class="number">10</span>);<span class="keyword">while</span>(P3_4==<span class="number">0</span>);<span class="built_in">delay_ms</span>(<span class="number">10</span>);KeyNumber=<span class="number">5</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(P3_5==<span class="number">0</span>)&#123;<span class="built_in">delay_ms</span>(<span class="number">10</span>);<span class="keyword">while</span>(P3_5==<span class="number">0</span>);<span class="built_in">delay_ms</span>(<span class="number">10</span>);KeyNumber=<span class="number">6</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(P3_6==<span class="number">0</span>)&#123;<span class="built_in">delay_ms</span>(<span class="number">10</span>);<span class="keyword">while</span>(P3_6==<span class="number">0</span>);<span class="built_in">delay_ms</span>(<span class="number">10</span>);KeyNumber=<span class="number">7</span>;&#125;</span><br><span class="line"><span class="keyword">if</span>(P3_7==<span class="number">0</span>)&#123;<span class="built_in">delay_ms</span>(<span class="number">10</span>);<span class="keyword">while</span>(P3_7==<span class="number">0</span>);<span class="built_in">delay_ms</span>(<span class="number">10</span>);KeyNumber=<span class="number">8</span>;&#125;</span><br><span class="line"><span class="keyword">return</span> KeyNumber;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">YM</span><span class="params">()</span><span class="comment">//月份与年份判断</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">day=<span class="number">0</span>;</span><br><span class="line">month++;</span><br><span class="line"><span class="keyword">if</span>(month&gt;<span class="number">12</span>)<span class="comment">//月份</span></span><br><span class="line">&#123;</span><br><span class="line">month=<span class="number">0</span>;</span><br><span class="line">year++;</span><br><span class="line"><span class="keyword">if</span>(year&gt;<span class="number">99</span>)year=<span class="number">0</span>;<span class="comment">//年份</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">time</span><span class="params">()</span><span class="comment">//时分秒日判断</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">second++;</span><br><span class="line"><span class="keyword">if</span>(second&gt;<span class="number">59</span>)</span><br><span class="line">&#123;</span><br><span class="line">second=<span class="number">0</span>;</span><br><span class="line">minute++;</span><br><span class="line"><span class="keyword">if</span>(minute&gt;<span class="number">59</span>)</span><br><span class="line">&#123;</span><br><span class="line">minute=<span class="number">0</span>;</span><br><span class="line">hour++;</span><br><span class="line"><span class="keyword">if</span>(hour&gt;<span class="number">23</span>)</span><br><span class="line">&#123;</span><br><span class="line">hour=<span class="number">0</span>;</span><br><span class="line">day++;</span><br><span class="line"><span class="keyword">if</span>(year%<span class="number">4</span>==<span class="number">0</span> &amp;&amp; year%<span class="number">100</span>!=<span class="number">0</span>)<span class="comment">//判断闰年</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(month==<span class="number">2</span>)<span class="comment">//二月</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(day&gt;<span class="number">29</span>||day&lt;<span class="number">0</span>)<span class="built_in">YM</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (month == <span class="number">4</span> || month == <span class="number">6</span> || month == <span class="number">9</span> || month == <span class="number">11</span>)<span class="comment">//小月</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(day&gt;<span class="number">30</span>||day&lt;<span class="number">0</span>)<span class="built_in">YM</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span><span class="comment">//大月</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(day&gt;<span class="number">31</span>||day&lt;<span class="number">0</span>)<span class="built_in">YM</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(month==<span class="number">2</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(day&gt;<span class="number">28</span>||day&lt;<span class="number">0</span>)<span class="built_in">YM</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (month == <span class="number">4</span> || month == <span class="number">6</span> || month == <span class="number">9</span> || month == <span class="number">11</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(day&gt;<span class="number">30</span>||day&lt;<span class="number">0</span>)<span class="built_in">YM</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(day&gt;<span class="number">31</span>||day&lt;<span class="number">0</span>)<span class="built_in">YM</span>();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setTime</span><span class="params">()</span><span class="comment">//设置时间</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> year1=year,month1=month, day1=day, hour1=hour,minute1=minute, second1=second;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> KeyNum,mode=<span class="number">1</span>,num=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">KeyNum=<span class="built_in">key</span>();</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">1</span>||KeyNum==<span class="number">2</span>||KeyNum==<span class="number">3</span>)mode=KeyNum;<span class="comment">//获取模式</span></span><br><span class="line"><span class="keyword">if</span>(mode==<span class="number">3</span>)<span class="keyword">return</span>;<span class="comment">//按下按钮3回到主程序显示时分秒</span></span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">5</span>)<span class="comment">//闪烁右移</span></span><br><span class="line">&#123;</span><br><span class="line">num++;</span><br><span class="line"><span class="keyword">if</span>(num&gt;<span class="number">3</span>)num=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">6</span>)<span class="comment">//闪烁左移</span></span><br><span class="line">&#123;</span><br><span class="line">num--;</span><br><span class="line"><span class="keyword">if</span>(num&lt;<span class="number">1</span>)num=<span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(mode==<span class="number">1</span>)<span class="comment">//时分秒加减</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">display</span>(hour1,minute1,second1,num);</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">7</span>&amp;&amp;num==<span class="number">1</span>)&#123;hour1++;&#125;</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">8</span>&amp;&amp;num==<span class="number">1</span>)&#123;hour1--;&#125;</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">7</span>&amp;&amp;num==<span class="number">2</span>)&#123;minute1++;&#125;</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">8</span>&amp;&amp;num==<span class="number">2</span>)&#123;minute1--;&#125;</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">7</span>&amp;&amp;num==<span class="number">3</span>)&#123;second1++;&#125;</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">8</span>&amp;&amp;num==<span class="number">3</span>)&#123;second1--;&#125;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(mode==<span class="number">2</span>)<span class="comment">//年月日加减</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">display</span>(year1,month1,day1,num);</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">7</span>&amp;&amp;num==<span class="number">1</span>)&#123;year1++;&#125;</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">8</span>&amp;&amp;num==<span class="number">1</span>)&#123;year1--;&#125;</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">7</span>&amp;&amp;num==<span class="number">2</span>)&#123;month1++;&#125;</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">8</span>&amp;&amp;num==<span class="number">2</span>)&#123;month1--;&#125;</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">7</span>&amp;&amp;num==<span class="number">3</span>)&#123;day1++;&#125;</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">8</span>&amp;&amp;num==<span class="number">3</span>)&#123;day1--;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(hour1&gt;<span class="number">23</span>||hour1&lt;<span class="number">0</span>)hour1=<span class="number">0</span>;<span class="comment">//时界限</span></span><br><span class="line"><span class="keyword">if</span>(minute1&gt;<span class="number">59</span>||minute1&lt;<span class="number">0</span>)minute1=<span class="number">0</span>;<span class="comment">//分界限</span></span><br><span class="line"><span class="keyword">if</span>(second1&gt;<span class="number">59</span>||second1&lt;<span class="number">0</span>)second1=<span class="number">0</span>;<span class="comment">//秒界限</span></span><br><span class="line"><span class="keyword">if</span>(year1&gt;<span class="number">99</span>||year1&lt;<span class="number">0</span>)year1=<span class="number">0</span>;<span class="comment">//年份界限</span></span><br><span class="line"><span class="keyword">if</span>(month1&gt;<span class="number">12</span>||month1&lt;<span class="number">0</span>)month1=<span class="number">0</span>;<span class="comment">//月份界限</span></span><br><span class="line"><span class="keyword">if</span>(year1%<span class="number">4</span>==<span class="number">0</span> &amp;&amp; year1%<span class="number">100</span>!=<span class="number">0</span>)<span class="comment">//判断闰年</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(month1==<span class="number">2</span>)<span class="comment">//二月</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(day1&gt;<span class="number">29</span>||day1&lt;<span class="number">0</span>)day1=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (month1 == <span class="number">4</span> || month1 == <span class="number">6</span> || month1 == <span class="number">9</span> || month1 == <span class="number">11</span>)<span class="comment">//小月</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(day1&gt;<span class="number">30</span>||day1&lt;<span class="number">0</span>)day1=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span><span class="comment">//大月</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(day1&gt;<span class="number">31</span>||day1&lt;<span class="number">0</span>)day1=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;<span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(month1==<span class="number">2</span>)<span class="comment">//二月</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(day1&gt;<span class="number">28</span>||day1&lt;<span class="number">0</span>)day1=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (month1 == <span class="number">4</span> || month1 == <span class="number">6</span> || month1 == <span class="number">9</span> || month1 == <span class="number">11</span>)<span class="comment">//小月</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(day1&gt;<span class="number">30</span>||day1&lt;<span class="number">0</span>)day1=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span><span class="comment">//大月</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(day1&gt;<span class="number">31</span>||day1&lt;<span class="number">0</span>)day1=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">year=year1;<span class="comment">//将时间传回全局变量</span></span><br><span class="line">month=month1;</span><br><span class="line">day=day1;</span><br><span class="line">hour=hour1;</span><br><span class="line">minute=minute1; </span><br><span class="line">second=second1;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setClock</span><span class="params">()</span><span class="comment">//设置闹钟</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> KeyNum,mode=<span class="number">1</span>,num=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">KeyNum=<span class="built_in">key</span>();</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">1</span>||KeyNum==<span class="number">2</span>||KeyNum==<span class="number">4</span>)mode=KeyNum;<span class="comment">//获取模式</span></span><br><span class="line"><span class="keyword">if</span>(mode==<span class="number">4</span>)<span class="keyword">return</span>;<span class="comment">//按下按钮4回到主程序显示时分秒</span></span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">5</span>)<span class="comment">//闪烁右移</span></span><br><span class="line">&#123;</span><br><span class="line">num++;</span><br><span class="line"><span class="keyword">if</span>(num&gt;<span class="number">3</span>)num=<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">6</span>)<span class="comment">//闪烁左移</span></span><br><span class="line">&#123;</span><br><span class="line">num--;</span><br><span class="line"><span class="keyword">if</span>(num&lt;<span class="number">1</span>)num=<span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(mode==<span class="number">1</span>)<span class="comment">//时分秒加减修改闹钟</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">display</span>(hour2,minute2,second2,num);</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">7</span>&amp;&amp;num==<span class="number">1</span>)&#123;hour2++;&#125;</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">8</span>&amp;&amp;num==<span class="number">1</span>)&#123;hour2--;&#125;</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">7</span>&amp;&amp;num==<span class="number">2</span>)&#123;minute2++;&#125;</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">8</span>&amp;&amp;num==<span class="number">2</span>)&#123;minute2--;&#125;</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">7</span>&amp;&amp;num==<span class="number">3</span>)&#123;second2++;&#125;</span><br><span class="line"><span class="keyword">if</span>(KeyNum==<span class="number">8</span>&amp;&amp;num==<span class="number">3</span>)&#123;second2--;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(hour2&gt;<span class="number">23</span>||hour2&lt;<span class="number">0</span>)hour2=<span class="number">0</span>;<span class="comment">//时界限</span></span><br><span class="line"><span class="keyword">if</span>(minute2&gt;<span class="number">59</span>||minute2&lt;<span class="number">0</span>)minute2=<span class="number">0</span>;<span class="comment">//分界限</span></span><br><span class="line"><span class="keyword">if</span>(second2&gt;<span class="number">59</span>||second2&lt;<span class="number">0</span>)second2=<span class="number">0</span>;<span class="comment">//秒界限</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> KeyNum,mode=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">Timer_Init</span>();</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">KeyNum=<span class="built_in">key</span>();</span><br><span class="line"><span class="keyword">if</span>(KeyNum!=<span class="number">0</span>)mode=KeyNum;</span><br><span class="line"><span class="keyword">switch</span>(mode)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:<span class="comment">//显示时分秒</span></span><br><span class="line"><span class="built_in">display</span>(hour,minute,second,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:<span class="comment">//显示年月日</span></span><br><span class="line"><span class="built_in">display</span>(year,month,day,<span class="number">0</span>);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:<span class="comment">//时间设置</span></span><br><span class="line"><span class="built_in">setTime</span>();</span><br><span class="line">mode=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>:<span class="comment">//闹钟设置</span></span><br><span class="line"><span class="built_in">setClock</span>();</span><br><span class="line">mode=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Timer0</span><span class="params">()</span> interrupt 1</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">static</span> <span class="type">unsigned</span> <span class="type">int</span> count=<span class="number">0</span>,count2=<span class="number">0</span>,count3=<span class="number">10000</span>;</span><br><span class="line">TL0=(<span class="number">65536</span><span class="number">-50000</span>)%<span class="number">256</span>;<span class="comment">//低八位，50ms</span></span><br><span class="line">TH0=(<span class="number">65536</span><span class="number">-50000</span>)/<span class="number">256</span>;<span class="comment">//高八位</span></span><br><span class="line"><span class="keyword">if</span>(count&gt;=<span class="number">20</span>)</span><br><span class="line">&#123;</span><br><span class="line">count=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">time</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(count2&gt;=<span class="number">5</span>)</span><br><span class="line">&#123;</span><br><span class="line">count2=<span class="number">0</span>;</span><br><span class="line">flag=!flag;<span class="comment">//闪烁标志位</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(hour2==hour &amp;&amp; minute2==minute &amp;&amp; second2==second &amp;&amp; second2!=<span class="number">0</span>)</span><br><span class="line">&#123;<span class="comment">//到达闹钟设置时间,闹钟秒钟设置为零时闹钟无效</span></span><br><span class="line">count3=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(count3&lt;<span class="number">1200</span>)<span class="comment">//响一分钟</span></span><br><span class="line">&#123;</span><br><span class="line">P1_6=!P1_6;</span><br><span class="line">count3++;</span><br><span class="line">&#125;</span><br><span class="line">count++;</span><br><span class="line">count2++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​</p>]]></content>
      
      
      <categories>
          
          <category> 51单片机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> 51单片机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>外部中断0按键计数器（汇编+C语言）</title>
      <link href="/archives/5bb8d5c4.html"/>
      <url>/archives/5bb8d5c4.html</url>
      
        <content type="html"><![CDATA[<p>​ 编写程序实现每次按下计数键 时触发INT0中断，中断程序累加计数，计数值显示在1只数码管上</p><p>从0加到9清零。按下清零键时数码管清零。</p><h1 id="中断简介"><a href="#中断简介" class="headerlink" title="中断简介"></a>中断简介</h1><p><img src="https://s2.loli.net/2024/07/25/XQ1G3wfI8UsNbaB.png"></p><p><img src="https://s2.loli.net/2024/07/25/e5aDp8bMwOJKzk2.png"></p><p>51单片机的外部中断int0对应的引脚为p3.2，外部中断int1对应的引脚为p3.3。</p><p>要让51单片机发生中断必须要满足以下3个条件，这3个条件的顺序可以任意：</p><p>① 中断源有中断请求；</p><p>② 此中断源的中断允许位为1；</p><p>③ CPU开中断，即EA&#x3D;1；</p><p>比如配置外部中断0，对应的配置程序如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">EA=1;//总中断允许</span><br><span class="line">EX0=1;//允许外部中断0</span><br><span class="line">IT0=0;//选择外部中断0为电平触发方式</span><br></pre></td></tr></table></figure><p>其中IT0：选择外部中断请求1为负跳变触发方式还是电平触发方式。</p><p>IT0&#x3D;0，为电平触发方式,外部中断请求输入信号为低电平有效，并把IE置“1”。转向中断服务程序时，则由硬件自动把IE1清零。</p><p>IT0&#x3D;1，为负跳变触发方式，外部中断请求输入信号电平为从高到低的负跳变有效，，并把IE置“1”。转向中断服务程序时，则由硬件自动把IE1清零。</p><h1 id="电路图"><a href="#电路图" class="headerlink" title="电路图"></a>电路图</h1><p><img src="https://s2.loli.net/2024/07/25/iNweD2T4aBAvozq.png"></p><h1 id="汇编代码"><a href="#汇编代码" class="headerlink" title="汇编代码"></a>汇编代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">ORG <span class="number">0000</span>H;程序入口地址</span><br><span class="line">    AJMP START;跳转到START程序</span><br><span class="line">    ORG<span class="number">0003</span>H;中断服务程序入口</span><br><span class="line">LJMP INT1P;中断服务程序INT1</span><br><span class="line">ORG <span class="number">0040</span>H</span><br><span class="line">KEY1 BIT P<span class="number">3.2</span>;定义按钮引脚</span><br><span class="line">KEY2 BIT P<span class="number">3.7</span></span><br><span class="line">  </span><br><span class="line">START:  MOV   DPTR, #TAB;建表将TAB所在的地址赋值给DPTR</span><br><span class="line">SETB  EA;总中断允许</span><br><span class="line">SETB  EX0;允许外部中断<span class="number">0</span></span><br><span class="line">CLR   IT0;选择外部中断<span class="number">0</span>为电平触发方式</span><br><span class="line">MOV   P2,#<span class="number">0</span>FEH</span><br><span class="line">MOV   R1,#<span class="number">0</span>;清零</span><br><span class="line">LOOP:   MOV   A,R1</span><br><span class="line">MOVC  A,@A+DPTR</span><br><span class="line">MOV   P0,A</span><br><span class="line">JB    KEY2,LOOP</span><br><span class="line">LCALL DELAY;消抖</span><br><span class="line">JB    KEY2,LOOP</span><br><span class="line">LOOP2:JNB   KEY2,LOOP2;松手检测</span><br><span class="line">MOV   R1,#<span class="number">0</span></span><br><span class="line">LJMP  LOOP</span><br><span class="line"></span><br><span class="line">DELAY:  MOV   R7,#<span class="number">250</span></span><br><span class="line">D1:    MOV   R6,#<span class="number">40</span></span><br><span class="line">D2:    DJNZ  R6,D2</span><br><span class="line">    DJNZ  R7,D1</span><br><span class="line">    RET</span><br><span class="line">INT1P:  JB    KEY1,RETURN</span><br><span class="line">LCALL DELAY;消抖</span><br><span class="line">JB    KEY1,RETURN</span><br><span class="line">LOOP3:JNB   KEY1,LOOP3;松手检测</span><br><span class="line">INC   R1;数字加<span class="number">1</span></span><br><span class="line">CJNE  R1,#<span class="number">10</span>,RETURN;如果数字加到<span class="number">10</span>则置<span class="number">0</span></span><br><span class="line">MOV   R1,#<span class="number">0</span></span><br><span class="line">RETURN: RETI;中断返回</span><br><span class="line">TAB:</span><br><span class="line">        DB   <span class="number">3</span>FH, <span class="number">06</span>H, <span class="number">5</span>BH, <span class="number">4</span>FH, <span class="number">66</span>H, <span class="number">6</span>DH, <span class="number">7</span>DH, <span class="number">07</span>H, <span class="number">7</span>FH, <span class="number">6</span>FH</span><br><span class="line">END</span><br></pre></td></tr></table></figure><h1 id="C语言代码"><a href="#C语言代码" class="headerlink" title="C语言代码"></a>C语言代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REGX52.H&gt;</span></span></span><br><span class="line">sbit key1=P3^<span class="number">2</span>;</span><br><span class="line">sbit key2=P3^<span class="number">7</span>;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> tab[]=&#123;<span class="number">0x3f</span>,<span class="number">0x06</span>,<span class="number">0x5b</span>,<span class="number">0x4f</span>,<span class="number">0x66</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">0x6d</span>,<span class="number">0x7d</span>,<span class="number">0x07</span>,<span class="number">0x7f</span>,<span class="number">0x6f</span>&#125;;<span class="comment">//共阴不带小数点段码表</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">delay_ms</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> ms)</span><span class="comment">//ms延时函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=ms;i&gt;<span class="number">0</span>;i--)</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">110</span>;j&gt;<span class="number">0</span>;j--);</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> i=<span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">EA=<span class="number">1</span>;<span class="comment">//总中断允许</span></span><br><span class="line">EX0=<span class="number">1</span>;<span class="comment">//允许外部中断0</span></span><br><span class="line">IT0=<span class="number">0</span>;<span class="comment">//选择外部中断0为电平触发方式</span></span><br><span class="line">P2=<span class="number">0xfe</span>;<span class="comment">//位选</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">P0=tab[i];</span><br><span class="line"><span class="keyword">if</span>(key2==<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">delay_ms</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">if</span>(key2==<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">i=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Int0_Key</span><span class="params">()</span> interrupt 0</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">if</span>(key1==<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">delay_ms</span>(<span class="number">10</span>);<span class="comment">//延时消抖</span></span><br><span class="line"><span class="keyword">if</span>(key1==<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">while</span>(key1==<span class="number">0</span>);<span class="comment">//松手检测</span></span><br><span class="line">i++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(i==<span class="number">10</span>)i=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​</p>]]></content>
      
      
      <categories>
          
          <category> 51单片机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> 51单片机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>八段数码管动态显示（汇编+C语言）</title>
      <link href="/archives/29a8e1b5.html"/>
      <url>/archives/29a8e1b5.html</url>
      
        <content type="html"><![CDATA[<p>​** 显示数码管60S倒计时程序。**</p><h1 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h1><p>数码管动态显示介面是单片机中应用最为广泛的一种显示方式之一，动态驱 动是将所有数码管的8个显示笔划”a,b,c,d,e,f,g,dp “的同名端连在一起，另 外为每个数码管的公共极 COM 增加位选通控制电路，位选通由各自独立的 I&#x2F;O 线控制，当单片机输出字形码时，所有数码管都接收到相同的字形码，但究竟是 那个数码管会显示出字形，取决于单片机对位元选通COM端电路的控制，所以我 们只要将需要显示的数码管的选通控制打开，该位就显示出字形，没有选通的数 码管就不会亮。 透过分时轮流控制各个LED数码管的COM端，就使各个数码管轮流受控显 示，这就是动态驱动。在轮流显示过程中，每位数码管的点亮时间为 1～2ms， 由于<strong>人的视觉暂留现象</strong>及发光二极体的 <strong>余辉效应</strong> ，尽管实际上各位数码管并非同 时点亮，但只要扫描的速度足够快，给人的印象就是一组稳定的显示资料，不会 有闪烁感，动态显示的效果和静态显示是一样的，能够节省大量的I&#x2F;O口，而且 功耗更低。</p><h1 id="电路图"><a href="#电路图" class="headerlink" title="电路图"></a>电路图</h1><p><img src="https://s2.loli.net/2024/07/25/dSm8Qe5c3wNChY6.png"></p><h1 id="汇编代码"><a href="#汇编代码" class="headerlink" title="汇编代码"></a>汇编代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">ORG <span class="number">0000</span>H;程序入口地址</span><br><span class="line">    AJMPSTART;跳转到START程序</span><br><span class="line">    ORG <span class="number">0040</span>H</span><br><span class="line">  </span><br><span class="line">START:  MOV   DPTR, #TAB;建表将TAB所在的地址赋值给DPTR</span><br><span class="line">MOV   R1, #<span class="number">6</span>;十位</span><br><span class="line">MOV   R0, #<span class="number">0</span>;个位</span><br><span class="line">AJMP  DISPLAY</span><br><span class="line">TENS:MOV   R0, #<span class="number">10</span>;个位填充，十位减<span class="number">1</span></span><br><span class="line">DEC   R1</span><br><span class="line">UNITS:DEC   R0;个位减<span class="number">1</span>同时填充R5</span><br><span class="line">MOV   R5, #<span class="number">250</span></span><br><span class="line">DISPLAY:MOV   A,R1</span><br><span class="line">MOVC  A,@A+DPTR;基地变址寻址</span><br><span class="line">MOV   P3,#<span class="number">0</span>FEH</span><br><span class="line">MOV   P2,A;显示</span><br><span class="line">LCALL DELAY</span><br><span class="line">MOV   A,R0</span><br><span class="line">MOVC  A,@A+DPTR;基地变址寻址</span><br><span class="line">MOV   P3,#<span class="number">0</span>FDH</span><br><span class="line">MOV   P2,A;显示</span><br><span class="line">LCALL DELAY</span><br><span class="line">DJNZ  R5,DISPLAY;每显示一个数用时大约<span class="number">1</span>s</span><br><span class="line">CJNE  R0,#<span class="number">0</span>,UNITS;个位<span class="number">0</span>不等于跳转</span><br><span class="line">CJNE  R1,#<span class="number">0</span>,TENS;十位<span class="number">0</span>不等于跳转</span><br><span class="line">SJMP START </span><br><span class="line"></span><br><span class="line">DELAY:  MOV   R7,#<span class="number">250</span></span><br><span class="line">D1:    MOV   R6,#<span class="number">4</span></span><br><span class="line">D2:    DJNZ  R6,D2</span><br><span class="line">    DJNZ  R7,D1</span><br><span class="line">    RET</span><br><span class="line">TAB:</span><br><span class="line">        DB   <span class="number">3</span>FH, <span class="number">06</span>H, <span class="number">5</span>BH, <span class="number">4</span>FH, <span class="number">66</span>H, <span class="number">6</span>DH, <span class="number">7</span>DH, <span class="number">07</span>H, <span class="number">7</span>FH, <span class="number">6</span>FH</span><br><span class="line">END</span><br></pre></td></tr></table></figure><h1 id="C语言代码"><a href="#C语言代码" class="headerlink" title="C语言代码"></a>C语言代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REGX52.H&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> tab[]=&#123;<span class="number">0x3f</span>,<span class="number">0x06</span>,<span class="number">0x5b</span>,<span class="number">0x4f</span>,<span class="number">0x66</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">0x6d</span>,<span class="number">0x7d</span>,<span class="number">0x07</span>,<span class="number">0x7f</span>,<span class="number">0x6f</span>&#125;;<span class="comment">//共阴不带小数点段码表</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">delay_ms</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> ms)</span><span class="comment">//ms延时函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=ms;i&gt;<span class="number">0</span>;i--)</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">110</span>;j&gt;<span class="number">0</span>;j--);</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">60</span>;i&gt;<span class="number">0</span>;i--)<span class="comment">//60s</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">100</span>;j&gt;<span class="number">0</span>;j--)<span class="comment">//大约1s</span></span><br><span class="line">&#123;</span><br><span class="line">P3=<span class="number">0xfe</span>;<span class="comment">//位选</span></span><br><span class="line">P2=tab[i/<span class="number">10</span>];<span class="comment">//显示十位</span></span><br><span class="line"><span class="built_in">delay_ms</span>(<span class="number">5</span>);</span><br><span class="line">P3=<span class="number">0xfd</span>;<span class="comment">//位选</span></span><br><span class="line">P2=tab[i%<span class="number">10</span>];<span class="comment">//显示个位</span></span><br><span class="line"><span class="built_in">delay_ms</span>(<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​</p>]]></content>
      
      
      <categories>
          
          <category> 51单片机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> 51单片机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Proteus 8.17下载与安装教程</title>
      <link href="/archives/7058d591.html"/>
      <url>/archives/7058d591.html</url>
      
        <content type="html"><![CDATA[<p>​#  获取安装包</p><p>链接：<a href="https://pan.baidu.com/s/12lR_TKw8y4YlFc2SotUadg">https://pan.baidu.com/s/12lR_TKw8y4YlFc2SotUadg</a></p><p>提取码：8sdg</p><p>解压后获得以下几个文件</p><p><img src="https://s2.loli.net/2024/07/25/hblSPI4MBLpamVv.png"></p><h1 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h1><p>以管理员身份运行</p><p><img src="https://s2.loli.net/2024/07/25/7GDbuw9RxgMWQmv.png"></p><p>修改安装路径，可直接在输入框内输入或修改路径，也可按Browse键选择</p><p>之后next下一步</p><p><img src="https://s2.loli.net/2024/07/25/ct7dV9KTpfjehS5.png"></p><p>next下一步</p><p><img src="https://s2.loli.net/2024/07/25/v2yXukx3oazKert.png"></p><p>等待安装完成</p><p><img src="https://s2.loli.net/2024/07/25/GrbvRJ2QfUmopO8.png"></p><p>Finish安装完成并退出</p><p><img src="https://s2.loli.net/2024/07/25/OidYCvRGmyTraFJ.png"></p><p>在桌面选中Proteus 8右键打开文件所在位置</p><p><img src="https://s2.loli.net/2024/07/25/4LzwRh1KU8eoaW6.png"></p><p>退到上一级，也就是Proteus 8 Professional文件夹下</p><p><img src="https://s2.loli.net/2024/07/25/cuPfQGj63IWxNpa.png"></p><p>将解压文件夹里的Translations文件夹复制到上图Proteus 8 Professional文件夹下</p><p><img src="https://s2.loli.net/2024/07/25/hblSPI4MBLpamVv.png"></p><p>替换目标中的文件</p><p><img src="https://s2.loli.net/2024/07/25/hCEsWLFJqfj2ekU.png"></p><p>破解完成</p><p><img src="https://s2.loli.net/2024/07/25/4VunPM6IFwxBrfG.png"><br>​</p>]]></content>
      
      
      <categories>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Proteus </tag>
            
            <tag> 软件 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>八段数码管静态显示（汇编+C语言）</title>
      <link href="/archives/d0ab7fe2.html"/>
      <url>/archives/d0ab7fe2.html</url>
      
        <content type="html"><![CDATA[<p>​ 数码管0~9循环显示</p><p>一个数码管是由a、b、c、d、e、f、g、dp八个二极管组成，八个LED一端接在一起，另一端引脚引出来。二极管如果阳极连在一起，就是共阳极数码管，阴极连在一起，就是共阴极数码管。</p><p>带小数点也就是dp点亮</p><ol><li><strong>共阴不带小数点0-F段码为：</strong> {0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,0x7f,0x6f,0x77,0x7c,0x39,0x5e,0x79,0x71};</li><li><strong>共阳不带小数点0-F段码为：</strong> {0xc0,0xf9,0xa4,0xb0,0x99,0x92,0x82,0xf8,0x80,0x90,0x88,0x83,0xc6,0xa1,0x86,0x8e};</li></ol><p><img src="https://s2.loli.net/2024/07/25/RIrKWmeCUoAF59k.png"></p><ol start="3"><li><strong>共阴带小数点0-F段码为：</strong> {0xbf,0x86,0xdb,0xcf,0xe6,0xed,0xfd,0x87,0xff,0xef,0xf7,0xfc,0xb9,0xde,0xf9,0xf1};</li><li><strong>共阳带小数点0-F段码为：</strong> {0x40,0x79,0x24,0x30,0x19,0x12,0x02,0x78,0x00,0x10,0x08,0x03,0x46,0x21,0x06,0x0e};</li></ol><p><img src="https://s2.loli.net/2024/07/25/PT7G58kKxoYDX3d.png"></p><h1 id="原理图"><a href="#原理图" class="headerlink" title="原理图"></a>原理图</h1><p><img src="https://s2.loli.net/2024/07/25/KowNesOpyljtx4r.png"></p><h1 id="汇编代码"><a href="#汇编代码" class="headerlink" title="汇编代码"></a>汇编代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">ORG <span class="number">0000</span>H;程序入口地址</span><br><span class="line">  AJMPSTART;跳转到START程序</span><br><span class="line">  ORG <span class="number">0040</span>H</span><br><span class="line">  </span><br><span class="line">START:MOV   DPTR, #TAB;建表将TAB所在的地址赋值给DPTR</span><br><span class="line">  MOV   R0, #<span class="number">0</span></span><br><span class="line">  CPL P<span class="number">3.0</span>;位选</span><br><span class="line">DISPLAY:</span><br><span class="line">MOV A,R0</span><br><span class="line">MOVC A,@A+DPTR;基地变址寻址</span><br><span class="line">MOV P2,A;显示</span><br><span class="line">LCALL DELAY</span><br><span class="line">INC R0</span><br><span class="line">    CJNE R0,#<span class="number">10</span>,DISPLAY;到<span class="number">10</span>清零重新显示</span><br><span class="line">MOV   R0, #<span class="number">0</span>;</span><br><span class="line">LJMP DISPLAY</span><br><span class="line">SJMP $           ;在当前位置死循环</span><br><span class="line"></span><br><span class="line">DELAY:MOV R7,#<span class="number">250</span></span><br><span class="line">D1:  MOV R6,#<span class="number">250</span></span><br><span class="line">D2:  MOV R5,#<span class="number">8</span></span><br><span class="line">D3:  DJNZ R5,D3</span><br><span class="line">  DJNZ R6,D2</span><br><span class="line">  DJNZ R7,D1</span><br><span class="line">  RET</span><br><span class="line">TAB:</span><br><span class="line">    DB   <span class="number">3</span>FH, <span class="number">06</span>H, <span class="number">5</span>BH, <span class="number">4</span>FH, <span class="number">66</span>H, <span class="number">6</span>DH, <span class="number">7</span>DH, <span class="number">07</span>H, <span class="number">7</span>FH, <span class="number">6</span>FH</span><br><span class="line">END</span><br></pre></td></tr></table></figure><h1 id="C代码"><a href="#C代码" class="headerlink" title="C代码"></a>C代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REGX52.H&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> tab[]=&#123;<span class="number">0x3f</span>,<span class="number">0x06</span>,<span class="number">0x5b</span>,<span class="number">0x4f</span>,<span class="number">0x66</span>,</span><br><span class="line"></span><br><span class="line"><span class="number">0x6d</span>,<span class="number">0x7d</span>,<span class="number">0x07</span>,<span class="number">0x7f</span>,<span class="number">0x6f</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">delay_ms</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> ms)</span><span class="comment">//ms延时函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=ms;i&gt;<span class="number">0</span>;i--)</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">110</span>;j&gt;<span class="number">0</span>;j--);</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">P3_0=<span class="number">0</span>;<span class="comment">//位选</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> i;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line">P2=tab[i];<span class="comment">//显示</span></span><br><span class="line"><span class="built_in">delay_ms</span>(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​</p>]]></content>
      
      
      <categories>
          
          <category> 51单片机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> 51单片机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>esp32舵机机械臂</title>
      <link href="/archives/9327ebca.html"/>
      <url>/archives/9327ebca.html</url>
      
        <content type="html"><![CDATA[<p>​#  前言</p><p>参考<a href="https://www.bilibili.com/video/BV1k4411J7XD/?spm_id_from=333.337.search-card.all.click&vd_source=2c23b82f18fb25f92a441ab8616a4d32" title="【太极创客】零基础入门学用Arduino 第二部分 meArm机械臂 合辑_哔哩哔哩_bilibili">【太极创客】零基础入门学用Arduino 第二部分 meArm机械臂 合辑_哔哩哔哩_bilibili</a></p><p><img src="https://s2.loli.net/2024/07/25/bcpXjlhqHJiSVZ6.jpg"></p><p>主要是使用esp32控制四个舵机，学会使用串口通讯以及蓝牙通讯。</p><h1 id="代码部分"><a href="#代码部分" class="headerlink" title="代码部分"></a>代码部分</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ESP32Servo.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Arduino.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;BluetoothSerial.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SERVO_base   2   <span class="comment">//电机接口</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SERVO_rArm   4</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SERVO_fArm   5</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> SERVO_claw   18</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX_WIDTH   2500 <span class="comment">//脉宽范围50ms~2500ms</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MIN_WIDTH   500</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//存储电机极限值(const指定该数值为常量,常量数值在程序运行中不能改变)</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> baseMin = <span class="number">0</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> baseMax = <span class="number">180</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> rArmMin = <span class="number">30</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> rArmMax = <span class="number">180</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> fArmMin = <span class="number">50</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> fArmMax = <span class="number">180</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> clawMin = <span class="number">70</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">int</span> clawMax = <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> DSD = <span class="number">15</span>; <span class="comment">//Default Servo Delay (默认电机运动延迟时间)</span></span><br><span class="line"><span class="type">int</span> moveStep = <span class="number">3</span>;  <span class="comment">//手柄模式步进角度</span></span><br><span class="line"><span class="type">bool</span> mode = <span class="number">0</span>; <span class="comment">//手柄与命令模式 0手柄 1命令</span></span><br><span class="line"><span class="comment">// 定义 servo 对象</span></span><br><span class="line">Servo base, rArm, fArm, claw;  <span class="comment">//建立4个电机对象  底座、大臂、小臂、夹子</span></span><br><span class="line">BluetoothSerial SerialBT;  <span class="comment">//蓝牙对象</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reportStatus</span><span class="params">()</span></span>;  <span class="comment">//舵机状态信息</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">servoMove</span><span class="params">(<span class="type">char</span> servoName, <span class="type">int</span> toPos, <span class="type">int</span> servoDelay)</span></span>;  <span class="comment">//电机移动</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">armCmd</span><span class="params">(<span class="type">char</span> serialCmd)</span></span>;   <span class="comment">//命令模式</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">armJoy</span><span class="params">(<span class="type">char</span> serialCmd)</span></span>; <span class="comment">//手柄模式</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">armIniPos</span><span class="params">()</span></span>;   <span class="comment">//初始化电机角度</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setup</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  Serial.<span class="built_in">begin</span>(<span class="number">9600</span>); <span class="comment">//开启串口</span></span><br><span class="line">  <span class="comment">// 分配硬件定时器</span></span><br><span class="line">  ESP32PWM::<span class="built_in">allocateTimer</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="comment">// 设置频率</span></span><br><span class="line">  base.<span class="built_in">setPeriodHertz</span>(<span class="number">50</span>);</span><br><span class="line">  rArm.<span class="built_in">setPeriodHertz</span>(<span class="number">50</span>);</span><br><span class="line">  fArm.<span class="built_in">setPeriodHertz</span>(<span class="number">50</span>);</span><br><span class="line">  claw.<span class="built_in">setPeriodHertz</span>(<span class="number">50</span>);</span><br><span class="line">  <span class="comment">// 关联 servo 对象与 GPIO 引脚，设置脉宽范围</span></span><br><span class="line">  base.<span class="built_in">attach</span>(SERVO_base, MIN_WIDTH, MAX_WIDTH);</span><br><span class="line">  rArm.<span class="built_in">attach</span>(SERVO_rArm, MIN_WIDTH, MAX_WIDTH);</span><br><span class="line">  fArm.<span class="built_in">attach</span>(SERVO_fArm, MIN_WIDTH, MAX_WIDTH);</span><br><span class="line">  claw.<span class="built_in">attach</span>(SERVO_claw, MIN_WIDTH, MAX_WIDTH);</span><br><span class="line">  <span class="comment">//初始化电机角度</span></span><br><span class="line">  base.<span class="built_in">write</span>(<span class="number">90</span>); </span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">10</span>);</span><br><span class="line">  fArm.<span class="built_in">write</span>(<span class="number">90</span>); </span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">10</span>);</span><br><span class="line">  rArm.<span class="built_in">write</span>(<span class="number">90</span>); </span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">10</span>);</span><br><span class="line">  claw.<span class="built_in">write</span>(<span class="number">90</span>);  </span><br><span class="line">  <span class="built_in">delay</span>(<span class="number">10</span>); </span><br><span class="line"> </span><br><span class="line">  <span class="built_in">reportStatus</span>();<span class="comment">//输出当前电机角度信息</span></span><br><span class="line">  Serial.<span class="built_in">begin</span>(<span class="number">9600</span>);</span><br><span class="line">  SerialBT.<span class="built_in">begin</span>(<span class="string">&quot;eh&quot;</span>); <span class="comment">// 如果没有参数传入则默认是蓝牙名称是: &quot;ESP32&quot;</span></span><br><span class="line">  Serial.<span class="built_in">printf</span>(<span class="string">&quot;BT initial ok and ready to pair. \r\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">loop</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (Serial.<span class="built_in">available</span>()&gt;<span class="number">0</span>) &#123;  </span><br><span class="line">      <span class="type">char</span> serialCmd = Serial.<span class="built_in">read</span>();</span><br><span class="line">      <span class="built_in">delay</span>(<span class="number">10</span>);</span><br><span class="line">      SerialBT.<span class="built_in">write</span>(serialCmd);</span><br><span class="line">      <span class="built_in">delay</span>(<span class="number">10</span>);</span><br><span class="line">      <span class="keyword">if</span>( mode == <span class="number">1</span> )&#123;</span><br><span class="line">        <span class="built_in">armCmd</span>(serialCmd); <span class="comment">//指令模式</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">armJoy</span>(serialCmd); <span class="comment">//手柄模式</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (SerialBT.<span class="built_in">available</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//Serial.write(SerialBT.read());</span></span><br><span class="line">        <span class="type">char</span> serialCmd = SerialBT.<span class="built_in">read</span>();</span><br><span class="line">        Serial.<span class="built_in">print</span>(<span class="string">&quot;  &quot;</span>);</span><br><span class="line">        Serial.<span class="built_in">write</span>(serialCmd);</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;  &quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>( mode == <span class="number">1</span> )&#123;</span><br><span class="line">          <span class="built_in">armCmd</span>(serialCmd); <span class="comment">//指令模式</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="built_in">armJoy</span>(serialCmd); <span class="comment">//手柄模式</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">armJoy</span><span class="params">(<span class="type">char</span> serialCmd)</span> <span class="comment">//手柄模式</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="type">int</span> baseJoyPos;</span><br><span class="line">  <span class="type">int</span> rArmJoyPos;</span><br><span class="line">  <span class="type">int</span> fArmJoyPos;</span><br><span class="line">  <span class="type">int</span> clawJoyPos;</span><br><span class="line">  <span class="keyword">switch</span>(serialCmd)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;a&#x27;</span>:</span><br><span class="line">      Serial.<span class="built_in">println</span>(<span class="string">&quot;Received Command: a&quot;</span>);</span><br><span class="line">      baseJoyPos = base.<span class="built_in">read</span>()+moveStep;</span><br><span class="line">      <span class="built_in">servoMove</span>(<span class="string">&#x27;b&#x27;</span>,baseJoyPos,DSD);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;d&#x27;</span>:</span><br><span class="line">      Serial.<span class="built_in">println</span>(<span class="string">&quot;Received Command: d&quot;</span>);</span><br><span class="line">      baseJoyPos = base.<span class="built_in">read</span>()-moveStep;</span><br><span class="line">      <span class="built_in">servoMove</span>(<span class="string">&#x27;b&#x27;</span>,baseJoyPos,DSD);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;w&#x27;</span>:</span><br><span class="line">      Serial.<span class="built_in">println</span>(<span class="string">&quot;Received Command: w&quot;</span>);</span><br><span class="line">      baseJoyPos = rArm.<span class="built_in">read</span>()+moveStep;</span><br><span class="line">      <span class="built_in">servoMove</span>(<span class="string">&#x27;r&#x27;</span>,baseJoyPos,DSD);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;s&#x27;</span>:</span><br><span class="line">      Serial.<span class="built_in">println</span>(<span class="string">&quot;Received Command: s&quot;</span>);</span><br><span class="line">      baseJoyPos = rArm.<span class="built_in">read</span>()-moveStep;</span><br><span class="line">      <span class="built_in">servoMove</span>(<span class="string">&#x27;r&#x27;</span>,baseJoyPos,DSD);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;8&#x27;</span>:</span><br><span class="line">      Serial.<span class="built_in">println</span>(<span class="string">&quot;Received Command: 8&quot;</span>);</span><br><span class="line">      baseJoyPos = fArm.<span class="built_in">read</span>()+moveStep;</span><br><span class="line">      <span class="built_in">servoMove</span>(<span class="string">&#x27;f&#x27;</span>,baseJoyPos,DSD);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;5&#x27;</span>:</span><br><span class="line">    Serial.<span class="built_in">println</span>(<span class="string">&quot;Received Command: 5&quot;</span>);</span><br><span class="line">    baseJoyPos = fArm.<span class="built_in">read</span>()-moveStep;</span><br><span class="line">    <span class="built_in">servoMove</span>(<span class="string">&#x27;f&#x27;</span>,baseJoyPos,DSD);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;4&#x27;</span>:</span><br><span class="line">    Serial.<span class="built_in">println</span>(<span class="string">&quot;Received Command: 4&quot;</span>);</span><br><span class="line">    baseJoyPos = claw.<span class="built_in">read</span>()+moveStep;</span><br><span class="line">    <span class="built_in">servoMove</span>(<span class="string">&#x27;c&#x27;</span>,baseJoyPos,DSD);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;6&#x27;</span>:</span><br><span class="line">    Serial.<span class="built_in">println</span>(<span class="string">&quot;Received Command: 6&quot;</span>);</span><br><span class="line">    baseJoyPos = claw.<span class="built_in">read</span>()-moveStep;</span><br><span class="line">    <span class="built_in">servoMove</span>(<span class="string">&#x27;c&#x27;</span>,baseJoyPos,DSD);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">     <span class="keyword">case</span> <span class="string">&#x27;m&#x27;</span> :   <span class="comment">//切换至指令模式 </span></span><br><span class="line">      mode = <span class="number">1</span>; </span><br><span class="line">      Serial.<span class="built_in">println</span>(<span class="string">&quot;Command: Switch to Instruction Mode.&quot;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;o&#x27;</span>:  </span><br><span class="line">      <span class="built_in">reportStatus</span>();</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;i&#x27;</span>:  </span><br><span class="line">      <span class="built_in">armIniPos</span>();</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      Serial.<span class="built_in">println</span>(<span class="string">&quot;Unknown Command.&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">      </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">armCmd</span><span class="params">(<span class="type">char</span> serialCmd)</span>   <span class="comment">//命令模式</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (serialCmd == <span class="string">&#x27;b&#x27;</span> || serialCmd == <span class="string">&#x27;c&#x27;</span> || serialCmd == <span class="string">&#x27;f&#x27;</span> || serialCmd == <span class="string">&#x27;r&#x27;</span>)&#123;</span><br><span class="line">    <span class="type">int</span> servoData = Serial.<span class="built_in">parseInt</span>();</span><br><span class="line">    <span class="built_in">servoMove</span>(serialCmd, servoData, DSD);  <span class="comment">// 机械臂舵机运行函数（参数：舵机名，目标角度，延迟/速度）</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span>(serialCmd)&#123;    </span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;o&#x27;</span>:  <span class="comment">// 输出舵机状态信息</span></span><br><span class="line">        <span class="built_in">reportStatus</span>();</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;i&#x27;</span>:</span><br><span class="line">        <span class="built_in">armIniPos</span>();  </span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;m&#x27;</span> :   <span class="comment">//切换至手柄模式 </span></span><br><span class="line">        mode = <span class="number">0</span>; </span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;Command: Switch to Joy-Stick Mode.&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>; </span><br><span class="line">      <span class="keyword">default</span>:  <span class="comment">//未知指令反馈</span></span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;Unknown Command.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">armIniPos</span><span class="params">()</span></span>&#123;   <span class="comment">//初始化电机角度</span></span><br><span class="line">  Serial.<span class="built_in">println</span>(<span class="string">&quot;+Command: Restore Initial Position.&quot;</span>);</span><br><span class="line">  <span class="type">int</span> robotIniPosArray[<span class="number">4</span>][<span class="number">3</span>] = &#123;</span><br><span class="line">    &#123;<span class="string">&#x27;b&#x27;</span>, <span class="number">90</span>, DSD&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;r&#x27;</span>, <span class="number">90</span>, DSD&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;f&#x27;</span>, <span class="number">90</span>, DSD&#125;,</span><br><span class="line">    &#123;<span class="string">&#x27;c&#x27;</span>, <span class="number">90</span>, DSD&#125; </span><br><span class="line">  &#125;;   </span><br><span class="line"> </span><br><span class="line">  <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)&#123;</span><br><span class="line">    <span class="built_in">servoMove</span>(robotIniPosArray[i][<span class="number">0</span>], robotIniPosArray[i][<span class="number">1</span>], robotIniPosArray[i][<span class="number">2</span>]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">servoMove</span><span class="params">(<span class="type">char</span> servoName, <span class="type">int</span> toPos, <span class="type">int</span> servoDelay)</span>  <span class="comment">//电机移动</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">//串口监视器输出接收指令信息</span></span><br><span class="line">  Serial.<span class="built_in">println</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  Serial.<span class="built_in">print</span>(<span class="string">&quot;+Command: Servo &quot;</span>);</span><br><span class="line">  Serial.<span class="built_in">print</span>(servoName);</span><br><span class="line">  Serial.<span class="built_in">print</span>(<span class="string">&quot; to &quot;</span>);</span><br><span class="line">  Serial.<span class="built_in">print</span>(toPos);</span><br><span class="line">  Serial.<span class="built_in">print</span>(<span class="string">&quot; at servoDelay value &quot;</span>);</span><br><span class="line">  Serial.<span class="built_in">print</span>(servoDelay);</span><br><span class="line">  Serial.<span class="built_in">println</span>(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">  Serial.<span class="built_in">println</span>(<span class="string">&quot;&quot;</span>);  </span><br><span class="line"></span><br><span class="line">  <span class="type">int</span> fromPos; <span class="comment">//建立变量，存储电机起始运动角度值</span></span><br><span class="line">  <span class="keyword">switch</span>(servoName)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;b&#x27;</span>:</span><br><span class="line">      <span class="keyword">if</span>(toPos &gt;= baseMin &amp;&amp; toPos &lt;= baseMax)&#123;</span><br><span class="line">        fromPos = base.<span class="built_in">read</span>();  <span class="comment">// 获取当前电机角度值用于“电机运动起始角度值”</span></span><br><span class="line">        <span class="keyword">if</span> (fromPos &lt;= toPos)&#123;  <span class="comment">//如果“起始角度值”小于“目标角度值”</span></span><br><span class="line">              <span class="keyword">for</span> (<span class="type">int</span> i=fromPos; i&lt;=toPos; i++)&#123;</span><br><span class="line">                base.<span class="built_in">write</span>(i);</span><br><span class="line">                <span class="built_in">delay</span> (servoDelay);</span><br><span class="line">                <span class="comment">//Serial.println(base.read());</span></span><br><span class="line">            &#125;</span><br><span class="line">            &#125;  <span class="keyword">else</span> &#123; <span class="comment">//否则“起始角度值”大于“目标角度值”</span></span><br><span class="line">              <span class="keyword">for</span> (<span class="type">int</span> i=fromPos; i&gt;=toPos; i--)&#123;</span><br><span class="line">                base.<span class="built_in">write</span>(i);</span><br><span class="line">                <span class="built_in">delay</span> (servoDelay);</span><br><span class="line">                <span class="comment">//Serial.println(base.read());</span></span><br><span class="line">              &#125;</span><br><span class="line">            </span><br><span class="line">          &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;+Warning: Base Servo Value Out Of Limit!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;c&#x27;</span>:</span><br><span class="line">      <span class="keyword">if</span>(toPos &gt;= clawMin &amp;&amp; toPos &lt;= clawMax)&#123;</span><br><span class="line">        fromPos = claw.<span class="built_in">read</span>();  <span class="comment">// 获取当前电机角度值用于“电机运动起始角度值”</span></span><br><span class="line">        <span class="keyword">if</span> (fromPos &lt;= toPos)&#123;  <span class="comment">//如果“起始角度值”小于“目标角度值”</span></span><br><span class="line">              <span class="keyword">for</span> (<span class="type">int</span> i=fromPos; i&lt;=toPos; i++)&#123;</span><br><span class="line">                claw.<span class="built_in">write</span>(i);</span><br><span class="line">                <span class="built_in">delay</span> (servoDelay);</span><br><span class="line">                <span class="comment">//Serial.println(claw.read());</span></span><br><span class="line">            &#125;</span><br><span class="line">            &#125;  <span class="keyword">else</span> &#123; <span class="comment">//否则“起始角度值”大于“目标角度值”</span></span><br><span class="line">              <span class="keyword">for</span> (<span class="type">int</span> i=fromPos; i&gt;=toPos; i--)&#123;</span><br><span class="line">                claw.<span class="built_in">write</span>(i);</span><br><span class="line">                <span class="built_in">delay</span> (servoDelay);</span><br><span class="line">               <span class="comment">// Serial.println(claw.read());</span></span><br><span class="line">              &#125;</span><br><span class="line">            </span><br><span class="line">          &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;+Warning: Claw Servo Value Out Of Limit!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;        </span><br><span class="line">      &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;f&#x27;</span>:</span><br><span class="line">      <span class="keyword">if</span>(toPos &gt;= fArmMin &amp;&amp; toPos &lt;= fArmMax)&#123;</span><br><span class="line">        fromPos = fArm.<span class="built_in">read</span>();  <span class="comment">// 获取当前电机角度值用于“电机运动起始角度值”</span></span><br><span class="line">        <span class="keyword">if</span> (fromPos &lt;= toPos)&#123;  <span class="comment">//如果“起始角度值”小于“目标角度值”</span></span><br><span class="line">              <span class="keyword">for</span> (<span class="type">int</span> i=fromPos; i&lt;=toPos; i++)&#123;</span><br><span class="line">                fArm.<span class="built_in">write</span>(i);</span><br><span class="line">                <span class="built_in">delay</span> (servoDelay);</span><br><span class="line">                <span class="comment">//Serial.println(fArm.read());</span></span><br><span class="line">            &#125;</span><br><span class="line">            &#125;  <span class="keyword">else</span> &#123; <span class="comment">//否则“起始角度值”大于“目标角度值”</span></span><br><span class="line">              <span class="keyword">for</span> (<span class="type">int</span> i=fromPos; i&gt;=toPos; i--)&#123;</span><br><span class="line">                fArm.<span class="built_in">write</span>(i);</span><br><span class="line">                <span class="built_in">delay</span> (servoDelay);</span><br><span class="line">                <span class="comment">//Serial.println(fArm.read());</span></span><br><span class="line">              &#125;</span><br><span class="line">            </span><br><span class="line">          &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;+Warning: fArm Servo Value Out Of Limit!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">         </span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;r&#x27;</span>:</span><br><span class="line">      <span class="keyword">if</span>(toPos &gt;= rArmMin &amp;&amp; toPos &lt;= rArmMax)&#123;</span><br><span class="line">        fromPos = rArm.<span class="built_in">read</span>();  <span class="comment">// 获取当前电机角度值用于“电机运动起始角度值”</span></span><br><span class="line">        <span class="keyword">if</span> (fromPos &lt;= toPos)&#123;  <span class="comment">//如果“起始角度值”小于“目标角度值”</span></span><br><span class="line">              <span class="keyword">for</span> (<span class="type">int</span> i=fromPos; i&lt;=toPos; i++)&#123;</span><br><span class="line">                rArm.<span class="built_in">write</span>(i);</span><br><span class="line">                <span class="built_in">delay</span> (servoDelay);</span><br><span class="line">                <span class="comment">//Serial.println(rArm.read());</span></span><br><span class="line">            &#125;</span><br><span class="line">            &#125;  <span class="keyword">else</span> &#123; <span class="comment">//否则“起始角度值”大于“目标角度值”</span></span><br><span class="line">              <span class="keyword">for</span> (<span class="type">int</span> i=fromPos; i&gt;=toPos; i--)&#123;</span><br><span class="line">                rArm.<span class="built_in">write</span>(i);</span><br><span class="line">                <span class="built_in">delay</span> (servoDelay);</span><br><span class="line">                <span class="comment">//Serial.println(rArm.read());</span></span><br><span class="line">              &#125;</span><br><span class="line">            </span><br><span class="line">          &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Serial.<span class="built_in">println</span>(<span class="string">&quot;+Warning: rArm Servo Value Out Of Limit!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;      </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">reportStatus</span><span class="params">()</span></span>&#123;  <span class="comment">//舵机状态信息</span></span><br><span class="line">  Serial.<span class="built_in">println</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  Serial.<span class="built_in">println</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  Serial.<span class="built_in">println</span>(<span class="string">&quot;+ Robot-Arm Status Report +&quot;</span>);</span><br><span class="line">  Serial.<span class="built_in">print</span>(<span class="string">&quot;Claw Position: &quot;</span>); Serial.<span class="built_in">println</span>(claw.<span class="built_in">read</span>());</span><br><span class="line">  Serial.<span class="built_in">print</span>(<span class="string">&quot;Base Position: &quot;</span>); Serial.<span class="built_in">println</span>(base.<span class="built_in">read</span>());</span><br><span class="line">  Serial.<span class="built_in">print</span>(<span class="string">&quot;Rear  Arm Position:&quot;</span>); Serial.<span class="built_in">println</span>(rArm.<span class="built_in">read</span>());</span><br><span class="line">  Serial.<span class="built_in">print</span>(<span class="string">&quot;Front Arm Position:&quot;</span>); Serial.<span class="built_in">println</span>(fArm.<span class="built_in">read</span>());</span><br><span class="line">  Serial.<span class="built_in">println</span>(<span class="string">&quot;++++++++++++++++++++++++++&quot;</span>);</span><br><span class="line">  Serial.<span class="built_in">println</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> esp32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> esp32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>51流水灯+按键控制（汇编+C语言）</title>
      <link href="/archives/f6ea1b82.html"/>
      <url>/archives/f6ea1b82.html</url>
      
        <content type="html"><![CDATA[<p>​#  项目介绍</p><p>当按钮一按下流水灯左移，当按钮二按下流水灯右移，只需要按一下。本项目主要用到按键检测与定时器。</p><h1 id="51定时器与中断"><a href="#51定时器与中断" class="headerlink" title="51定时器与中断"></a>51定时器与中断</h1><p>以定时器0举例：定时器在单片机内部，根据时钟的输出信号，每隔1us(根据晶振与分频有所不同)，计数单元（TL1，TH1）的数值就增加一(TL1,TH1可以根据软件赋值)，当计数单元数值增加到“最大值65535”时，计数单元就会溢出TF1置1，该位作为中断请求标志位向中断系统发出中断申请，使程序跳转到中断服务函数中执行。</p><p>什么是中断？</p><p>中断是指计算机运行过程中，出现某些意外情况需主机干预时，机器能自动停止正在运行的程序并转入处理新情况的程序，处理完毕后又返回原被暂停的程序继续运行。</p><p><img src="https://s2.loli.net/2024/07/25/v5SdfbrHFAwJzi2.png"></p><p>如何使用定时器与中断呢？</p><p>以下是定时器1和中断的执行框图</p><p><img src="https://s2.loli.net/2024/07/25/FkrzntfXv1Mg39s.png"></p><p><img src="https://s2.loli.net/2024/07/25/vUoQhOymF1IzeqN.png"></p><p>通过中断号来查询中断服务程序</p><p><img src="https://s2.loli.net/2024/07/25/mjYZhun32KIfrEq.png"></p><p>定时器有四种工作方式</p><p><img src="https://s2.loli.net/2024/07/25/CdkGt2mLcDWpQ31.png"></p><p>GATE门控位：一般设置为0，设置为1时与外中断引脚的电平与运行控制位TRx共同控制定时器&#x2F;计数器。</p><p>C&#x2F;T位：计数器和定时器模式选择位，0为定时器模式，1为计数器模式由外部输入引脚T0(P3.4)或T1（P3.5）上的外部脉冲（负跳变）计数。</p><p>M1,M0：控制定时器计数器模式</p><p><img src="https://s2.loli.net/2024/07/25/8vx9XTwAaChkEc7.png"></p><p>设置寄存器TCON主要是设置TFx和TRx</p><p><img src="https://s2.loli.net/2024/07/25/JoSyHLz67NTnu5d.png"></p><h1 id="定时器设置"><a href="#定时器设置" class="headerlink" title="定时器设置"></a>定时器设置</h1><blockquote><p>TMOD&#x3D;0x01;  &#x2F;&#x2F;设置为定时器0工作模式1</p><p>TL0&#x3D;(65536-1000)%256;&#x2F;&#x2F;低四位，距离65536差1000，一次1us，1000次就是1ms</p><p>TH0&#x3D;(65536-1000)&#x2F;256;&#x2F;&#x2F;高四位</p><p>TR0 &#x3D; 1; &#x2F;&#x2F;定时器0开始计时</p><p>EA&#x3D;1;&#x2F;&#x2F;开总中断</p><p>ET0&#x3D;1;&#x2F;&#x2F;开启定时器0中断</p></blockquote><h1 id="仿真图"><a href="#仿真图" class="headerlink" title="仿真图"></a>仿真图</h1><p><img src="https://s2.loli.net/2024/07/25/9HlmbTPgFdcKJSZ.png"></p><h1 id="汇编代码"><a href="#汇编代码" class="headerlink" title="汇编代码"></a>汇编代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">ORG <span class="number">0000</span>H;程序入口地址</span><br><span class="line">  AJMPSTART;跳转到START程序</span><br><span class="line">  ORG<span class="number">000</span>BH;中断服务程序入口</span><br><span class="line">  LJMPTIME;中断服务程序TIME</span><br><span class="line">  ORG <span class="number">0040</span>H</span><br><span class="line">  KEY1 BIT P<span class="number">1.5</span>;定义按钮引脚</span><br><span class="line">  KEY2 BIT P<span class="number">1.6</span></span><br><span class="line">START:MOV A,#<span class="number">0</span>FEH;设置流水灯亮位置</span><br><span class="line">  MOV R7,#<span class="number">50</span>;<span class="number">50</span>*<span class="number">10</span>=<span class="number">500</span>ms</span><br><span class="line">  MOV R6,#<span class="number">0</span>;左移右移模式</span><br><span class="line">  MOV TMOD,#<span class="number">0</span>D8H;设置为定时器<span class="number">0</span>工作模式<span class="number">1</span></span><br><span class="line">  MOV TL0,#<span class="number">0</span>F0H;低八位，距离<span class="number">65536</span>差<span class="number">10000</span>，一次<span class="number">1u</span>s，<span class="number">10000</span>次就是<span class="number">10</span>ms</span><br><span class="line">  MOV TH0,#<span class="number">18</span>H;<span class="comment">//高八位</span></span><br><span class="line">  SETB TR0;定时器<span class="number">0</span>开始计时</span><br><span class="line">  SETB EA;开启总中断</span><br><span class="line">  SETB ET0;开启定时器<span class="number">0</span>中断</span><br><span class="line">LOOP: JNB KEY1,MODE1;按键检测</span><br><span class="line">  JNB KEY2,MODE2</span><br><span class="line">  LJMP LOOP</span><br><span class="line">TIME: MOV TMOD,#<span class="number">0</span>D8H;填入初值</span><br><span class="line">  MOV TL0,#<span class="number">0</span>F0H</span><br><span class="line">  DJNZ R7,RTURN</span><br><span class="line">  MOV R7,#<span class="number">50</span>;时间初值</span><br><span class="line">LEFT: CJNE R6,#<span class="number">1</span>,RIGHT;不等于则跳转</span><br><span class="line">  MOV P0,A;送显</span><br><span class="line">  RL A;左移</span><br><span class="line">  LJMP RTURN</span><br><span class="line">RIGHT:CJNE R6,#<span class="number">2</span>,RTURN</span><br><span class="line">  MOV P0,A</span><br><span class="line">  RR A;右移</span><br><span class="line">RTURN:RETI;中断返回</span><br><span class="line">MODE1:MOV R6,#<span class="number">1</span>;</span><br><span class="line">  LJMP LOOP;一定要在此时加入跳转，否则会往下执行</span><br><span class="line">MODE2:MOV R6,#<span class="number">2</span></span><br><span class="line">  LJMP LOOP</span><br><span class="line">END</span><br></pre></td></tr></table></figure><h1 id="C语言代码"><a href="#C语言代码" class="headerlink" title="C语言代码"></a>C语言代码</h1><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REGX52.H&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;intrins.h&gt;</span></span></span><br><span class="line">sbit key1=P1^<span class="number">5</span>;  <span class="comment">//设置两个按钮引脚</span></span><br><span class="line">sbit key2=P1^<span class="number">6</span>;</span><br><span class="line"><span class="type">char</span> mode=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">delay_ms</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> ms)</span><span class="comment">//ms延时函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=ms;i&gt;<span class="number">0</span>;i--)</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">110</span>;j&gt;<span class="number">0</span>;j--);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">P0=<span class="number">0xfe</span>;<span class="comment">//设置流水灯亮位置</span></span><br><span class="line">TMOD=<span class="number">0x01</span>; <span class="comment">//设置为定时器0工作模式1</span></span><br><span class="line">TL0=(<span class="number">65536</span><span class="number">-1000</span>)%<span class="number">256</span>;<span class="comment">//低八位，距离65536差1000，一次1us，1000次就是1ms</span></span><br><span class="line">TH0=(<span class="number">65536</span><span class="number">-1000</span>)/<span class="number">256</span>;<span class="comment">//高八位</span></span><br><span class="line">TR0 = <span class="number">1</span>; <span class="comment">//定时器0开始计时</span></span><br><span class="line">EA=<span class="number">1</span>;<span class="comment">//开启总中断</span></span><br><span class="line">ET0=<span class="number">1</span>;<span class="comment">//开启定时器0中断</span></span><br><span class="line">  <span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">  &#123; </span><br><span class="line"><span class="keyword">if</span>(key1==<span class="number">0</span>)<span class="comment">//按键1按下</span></span><br><span class="line">    &#123;</span><br><span class="line"><span class="built_in">delay_ms</span>(<span class="number">50</span>);<span class="comment">//延时消抖</span></span><br><span class="line">  mode=<span class="number">1</span>;<span class="comment">//左移模式</span></span><br><span class="line">  <span class="built_in">delay_ms</span>(<span class="number">50</span>);</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">if</span>(key2==<span class="number">0</span>)<span class="comment">//按键2按下</span></span><br><span class="line">    &#123;</span><br><span class="line">  <span class="built_in">delay_ms</span>(<span class="number">50</span>);</span><br><span class="line">  mode=<span class="number">2</span>;<span class="comment">//右移模式</span></span><br><span class="line">  <span class="built_in">delay_ms</span>(<span class="number">50</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">timer0</span><span class="params">()</span> interrupt 1</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">static</span> <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">TH0 = (<span class="number">65536</span> - <span class="number">1000</span>) / <span class="number">256</span>; <span class="comment">//设置初值</span></span><br><span class="line">TL0 = (<span class="number">65536</span> - <span class="number">1000</span>) % <span class="number">256</span>;</span><br><span class="line"><span class="keyword">if</span>(count&gt;<span class="number">500</span>)<span class="comment">//计数达到500，也就是每隔500ms</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span>(mode==<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">P0=_crol_(P0,<span class="number">1</span>);<span class="comment">//左移流水灯</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span>(mode==<span class="number">2</span>)</span><br><span class="line">&#123;</span><br><span class="line">P0=_cror_(P0,<span class="number">1</span>);<span class="comment">//右移流水灯</span></span><br><span class="line">&#125;</span><br><span class="line">count=<span class="number">0</span>;<span class="comment">//计数清零</span></span><br><span class="line"> &#125;</span><br><span class="line">count++;<span class="comment">//计数加1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 51单片机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> 51单片机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>51点灯闪烁（汇编+c语言）</title>
      <link href="/archives/bb9a55ce.html"/>
      <url>/archives/bb9a55ce.html</url>
      
        <content type="html"><![CDATA[<h2 id="时钟周期、机器周期、指令周期与指令时序"><a href="#时钟周期、机器周期、指令周期与指令时序" class="headerlink" title="时钟周期、机器周期、指令周期与指令时序"></a>时钟周期、机器周期、指令周期与指令时序</h2><p>时钟周期：时钟周期是单片机时钟控制信号的基本时间单位。若晶振的震荡频率为f，则时钟周期为T&#x3D;1&#x2F;f。如一块单片机晶振为f&#x3D;6MHz,T&#x3D;166.7ns。</p><p>机器周期：CPU完成一个基本操作所需要的时间称为机器周期。AT89C51&#x2F;52的12个时钟周期为一个机器周期。T&#x3D;12&#x2F;f。若f&#x3D;12MHZ,T&#x3D;1us。</p><p>指令周期：执行一条指令所需的时间，一般为1~4个机器周期。</p><h2 id="仿真"><a href="#仿真" class="headerlink" title="仿真"></a>仿真</h2><p>由于本人的51单片机不在身边本实验通过仿真来实现。</p><p><img src="https://s2.loli.net/2024/07/25/MsIbCcVrHnmtJBE.png"></p><h2 id="汇编代码"><a href="#汇编代码" class="headerlink" title="汇编代码"></a>汇编代码</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ORG 0000H</span><br><span class="line">LJMP START</span><br><span class="line">ORG 0040H</span><br><span class="line"></span><br><span class="line">START:SETB P0.0;熄灭p0.0的灯</span><br><span class="line">  LCALL DELAY;进入延时</span><br><span class="line">  CLR P0.0;点亮p0.0</span><br><span class="line">  LCALL DELAY;延时</span><br><span class="line">  AJMP START;跳转回START循环闪烁</span><br><span class="line">DELAY:MOV R7,#250;250*250=62500，62500*2=125000us=125ms</span><br><span class="line">D1:  MOV R6,#250</span><br><span class="line">D2:  DJNZ R6,D2;R6减一如果不等于0则跳转到D2,原地执行250次</span><br><span class="line">  DJNZ R7,D1;R7减一如果不等于0则跳转到D1</span><br><span class="line">  RET;子程序返回指令</span><br><span class="line">END</span><br></pre></td></tr></table></figure><p>延时时间的计算：DJNZ指令是双周期指令，执行一次需要两个指令周期，250<em>250&#x3D;62500，62500</em>2&#x3D;125000us&#x3D;125ms</p><h2 id="C语言代码"><a href="#C语言代码" class="headerlink" title="C语言代码"></a>C语言代码</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;REGX52.H&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">delay_ms</span><span class="params">(<span class="type">unsigned</span> <span class="type">int</span> ms)</span><span class="comment">//ms延时函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> i,j;</span><br><span class="line"><span class="keyword">for</span>(i=ms;i&gt;<span class="number">0</span>;i--)</span><br><span class="line"><span class="keyword">for</span>(j=<span class="number">110</span>;j&gt;<span class="number">0</span>;j--);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">P0_1=<span class="number">1</span>;</span><br><span class="line"><span class="built_in">delay_ms</span>(<span class="number">500</span>);</span><br><span class="line">P0_1=<span class="number">0</span>;</span><br><span class="line"><span class="built_in">delay_ms</span>(<span class="number">500</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​</p>]]></content>
      
      
      <categories>
          
          <category> 51单片机 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> 51单片机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>esp32、esp8266接入小爱同学</title>
      <link href="/archives/55988.html"/>
      <url>/archives/55988.html</url>
      
        <content type="html"><![CDATA[<p>​</p><h2 id="项目说明："><a href="#项目说明：" class="headerlink" title="项目说明："></a><strong>项目说明：</strong></h2><p>首先你需要一台电脑、一块esp32或esp8266开发板。通过手机上的小爱同学进行语音控制开发板上的板载灯，实现一个基础的语音控制。由于小爱同学不能直接对开发板进行控制所以在这里我使用点灯平台进行间接控制。</p><p><img src="https://s2.loli.net/2024/07/25/s2E9FMG3bdlgD6u.png"></p><p><img src="https://s2.loli.net/2024/07/25/AFVHadti4gIbT3Y.png"></p><h2 id="环境搭建："><a href="#环境搭建：" class="headerlink" title="环境搭建："></a><strong>环境搭建：</strong></h2><p>本项目使用Arduino IDE开发，具体环境搭建可自行百度。</p><p>小爱同学、米家app（非小米、红米手机也可直接找安装包下载）</p><p>点灯app</p><p>在点灯esp32官网上有Arduino IDE的安装包、esp32、esp8266的开发包、点灯库以及点灯app,同时本文也是对照电灯官网上的开发文档来写的。</p><p><strong>点灯官网</strong><a href="https://diandeng.tech/home" title="点灯科技 (diandeng.tech)">点灯科技 (diandeng.tech)</a></p><h2 id="软件设置"><a href="#软件设置" class="headerlink" title="软件设置"></a>软件设置</h2><p>在点灯app上添加独立设备</p><p><img src="https://s2.loli.net/2024/07/25/iWu9G1ATJm5IceB.png"></p><p>获取密钥</p><p><img src="https://s2.loli.net/2024/07/25/NOizBuogLWc2G3D.png"></p><p>添加按钮</p><p><img src="https://s2.loli.net/2024/07/25/xHsfL5FRv9N2hQW.png"></p><p>这里组件的数据键名与之后代码里组件的字符串一一对应</p><p>米家与点灯关联</p><p>点击米家-&gt;我的-&gt;连接其他平台-&gt;添加点灯科技</p><p>这样就可以使用小爱同学控制esp32了。</p><p><img src="https://s2.loli.net/2024/07/25/DXs9SIvVNRmBlYx.png"></p><h2 id="代码部分"><a href="#代码部分" class="headerlink" title="代码部分"></a><strong>代码部分</strong></h2><p>友情提示：乐鑫正在用esp32C2逐步替代esp8266，不建议大家继续使用esp8266进行产品开发。</p><p>blinker lib 0.3.9开始不再对esp8266做兼容性测试。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> BLINKER_WIFI</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BLINKER_MIOT_LIGHT   <span class="comment">//根据您定义的设备品类选择不同的参数用于配置Blinker</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LED_BUILTIN 2       <span class="comment">//板载灯引脚为GPIO2</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Blinker.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> auth[] = <span class="string">&quot;**********&quot;</span>;   <span class="comment">//点灯app中获取到的密钥</span></span><br><span class="line"><span class="type">char</span> ssid[] = <span class="string">&quot;eh&quot;</span>;             <span class="comment">//您的WiFi热点名称</span></span><br><span class="line"><span class="type">char</span> pswd[] = <span class="string">&quot;88888888&quot;</span>;       <span class="comment">//您的WiFi密码</span></span><br><span class="line"></span><br><span class="line"><span class="function">BlinkerButton <span class="title">Button1</span><span class="params">(<span class="string">&quot;btn-abc&quot;</span>)</span></span>;     <span class="comment">// 新建组件对象，这个组件是按钮</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 按下按键即会执行该函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">button1_callback</span><span class="params">(<span class="type">const</span> String &amp; state)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">BLINKER_LOG</span>(<span class="string">&quot;get button state: &quot;</span>, state);</span><br><span class="line">    <span class="built_in">digitalWrite</span>(LED_BUILTIN, !<span class="built_in">digitalRead</span>(LED_BUILTIN));<span class="comment">//对板载灯进行取反操作</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//用户自定义电源类操作的回调函数:这里是当小爱同学向设备发起控制, 设备端需要有对应控制处理函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">miotPowerState</span><span class="params">(<span class="type">const</span> String &amp; state)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">BLINKER_LOG</span>(<span class="string">&quot;need set power state: &quot;</span>, state);<span class="comment">//调试信息</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (state == BLINKER_CMD_ON) &#123;</span><br><span class="line">        <span class="built_in">digitalWrite</span>(LED_BUILTIN, HIGH);<span class="comment">//点亮</span></span><br><span class="line"></span><br><span class="line">        BlinkerMIOT.<span class="built_in">powerState</span>(<span class="string">&quot;on&quot;</span>);</span><br><span class="line">        BlinkerMIOT.<span class="built_in">print</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (state == BLINKER_CMD_OFF) &#123;</span><br><span class="line">        <span class="built_in">digitalWrite</span>(LED_BUILTIN, LOW);<span class="comment">//熄灭</span></span><br><span class="line"></span><br><span class="line">        BlinkerMIOT.<span class="built_in">powerState</span>(<span class="string">&quot;off&quot;</span>);</span><br><span class="line">        BlinkerMIOT.<span class="built_in">print</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">setup</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  Serial.<span class="built_in">begin</span>(<span class="number">9600</span>);</span><br><span class="line">  Serial.<span class="built_in">println</span>(<span class="string">&quot;hello&quot;</span>);<span class="comment">//串口</span></span><br><span class="line"></span><br><span class="line">  Blinker.<span class="built_in">begin</span>(auth, ssid, pswd); <span class="comment">//配置WiFi</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">pinMode</span>(LED_BUILTIN, OUTPUT);<span class="comment">//设置io口为输出模式</span></span><br><span class="line">  <span class="built_in">digitalWrite</span>(LED_BUILTIN, HIGH);<span class="comment">//默认点亮</span></span><br><span class="line"></span><br><span class="line">  Button<span class="number">1.</span><span class="built_in">attach</span>(button1_callback);<span class="comment">//注册按键回调函数</span></span><br><span class="line">  BlinkerMIOT.<span class="built_in">attachPowerState</span>(miotPowerState);<span class="comment">//注册回调函数，当有设备收到APP发来的数据时会调用对应的回调函数</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">loop</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"> Blinker.<span class="built_in">run</span>();<span class="comment">//运行点灯</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a><strong>结尾</strong></h2><p>可以看出点灯库的使用，首先新建组件，然后创建回调函数，所有操作都在回调函数当中实现，最后注册回调函数。</p><p>​</p>]]></content>
      
      
      <categories>
          
          <category> esp32 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 单片机 </tag>
            
            <tag> esp32 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
